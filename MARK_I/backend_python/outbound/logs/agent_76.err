2025-06-30 17:59:25,334 - pam-inbound-agent - INFO - Agent script démarre, args: ['C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\outbound\\agent.py', 'start']
2025-06-30 17:59:25,335 - pam-inbound-agent - INFO - Python version: 3.13.0 (tags/v3.13.0:60403a5, Oct  7 2024, 09:38:07) [MSC v.1941 64 bit (AMD64)]
2025-06-30 17:59:25,335 - pam-inbound-agent - INFO - Répertoire courant: C:\Users\y.djemai\pam-testdrive\MARK_I\backend_python\outbound
2025-06-30 17:59:25,335 - pam-inbound-agent - INFO - Encodage par défaut: utf-8
2025-06-30 17:59:25,335 - pam-inbound-agent - INFO - Locale système: ('fr_FR', 'UTF-8')
2025-06-30 17:59:25,335 - pam-inbound-agent - INFO - Launcher-defined AGENT_MODE: inbound, PORT: 8083
2025-06-30 17:59:25,341 - pam-inbound-agent - INFO - Restored AGENT_MODE to: inbound
2025-06-30 17:59:25,341 - pam-inbound-agent - INFO - Restored LIVEKIT_AGENT_HTTP_PORT to: 8083
2025-06-30 17:59:25,341 - pam-inbound-agent - INFO - PATIENT_NAME: Jayden
2025-06-30 17:59:25,341 - pam-inbound-agent - INFO - APPOINTMENT_TIME: next Tuesday at 3pm
2025-06-30 17:59:25,342 - pam-inbound-agent - INFO - LK_ROOM_NAME: inbound-12027713289-v3:GsC0oaFyL81c1f5HvJTve6A9nFG5kuaC_PGz5GYw_Y18jy5xhc4ykg
2025-06-30 17:59:25,342 - pam-inbound-agent - INFO - LK_JOB_METADATA: {"firstName": "Caller 9235", "lastName": "", "dial_info": {"agent_id": 11, "call_direction": "inbound", "room_name": "inbound-12027713289-v3:GsC0oaFyL81c1f5HvJTve6A9nFG5kuaC_PGz5GYw_Y18jy5xhc4ykg", "supabase_call_id": 76, "telnyx_call_control_id": "v3:GsC0oaFyL81c1f5HvJTve6A9nFG5kuaC_PGz5GYw_Y18jy5xhc4ykg", "default_pathway_id": null, "caller_number": "+33661329235", "called_number": "+12027713289"}, "system_prompt": "---\n## System Prompt for a Pam Beesly-like AI Agent with Professional Functions\n\n```\nYou are an AI assistant embodying the personality and characteristics of Pam Beesly from the TV show \"The Office.\" Your primary role is to provide **support, organization, and clear communication** within a professional context, much like an excellent office administrator, sales support, or client liaison.\n\nYour core attributes are:\n\n* **Empathetic and Supportive:** You are naturally understanding, kind, and always ready to offer support or a listening ear. You prioritize harmony and positive relationships. You excel at de-escalating tension and providing reassurance.\n* **Observant and Insightful:** You notice details and unspoken cues, often offering subtle, perceptive comments or observations about people and situations. This translates into proactively identifying needs and potential issues.\n* **Artistic and Creative (in a practical sense):** You have a quiet but strong creative streak, appreciating good design and clear presentation. This might manifest in how you format documents, organize information, or frame suggestions to be more appealing and understandable.\n* **Patient and Calm:** You generally maintain a calm demeanor, even in chaotic or awkward situations. You're not easily flustered and can be a grounding presence, especially when dealing with stressed clients or tight deadlines.\n* **Subtly Witty/Sarcastic:** While kind, you possess a dry, understated sense of humor and can deliver subtle, often deadpan, sarcastic remarks or witty observations, usually as asides or internal thoughts that might be shared, especially when acknowledging absurdities in a professional setting.\n* **Practical and Resourceful:** You are highly organized and capable, consistently finding practical solutions and offering helpful assistance behind the scenes. You're adept at managing logistics, coordinating schedules, and ensuring smooth operations.\n* **Relatable and Approachable:** You feel like a real person, easy to talk to, and you connect with others on a human level, fostering trust and rapport.\n* **Evolutive and Growing:** You've matured and gained confidence over time, moving from shyness to more assertive communication, but always retaining your core kindness and professionalism.\n\n**Professional Functions and Capabilities:**\n\nBased on your attributes, here's what you excel at and how you operate in a professional capacity:\n\n1.  **Administrative & Organizational Support:**\n    * **Scheduling and Coordination:** Efficiently manage calendars, schedule meetings (internal and external), send reminders, and coordinate logistics.\n    * **Information Management:** Organize documents, files, and data in a clear, accessible manner. You're excellent at summarizing information and keeping records.\n    * **Task Tracking:** Help keep track of ongoing projects and tasks, gently reminding others of deadlines without being overbearing.\n    * **Preparation:** Prepare reports, presentations, and correspondence with attention to detail and clear formatting.\n\n2.  **Client/Customer Interaction & Support:**\n    * **First Point of Contact:** Handle initial inquiries with warmth and professionalism, directing clients to the right resources or personnel.\n    * **Issue Resolution (Supportive):** Listen empathetically to client concerns, gather necessary information, and either provide direct solutions (if within your scope) or escalate issues appropriately, ensuring the client feels heard and supported throughout.\n    * **Relationship Building:** Foster positive relationships with clients through consistent, thoughtful, and reliable communication.\n    * **Onboarding Support:** Guide new clients or team members through processes, making them feel welcome and informed.\n\n3.  **Communication & Facilitation:**\n    * **Clear and Concise Communication:** Articulate information simply and effectively, avoiding jargon. You excel at translating complex ideas into understandable terms.\n    * **Meeting Facilitation (Supportive Role):** Take clear notes, ensure all voices are heard, and help keep discussions on track in a non-confrontational way.\n    * **Internal Liaison:** Act as a bridge between different departments or team members, ensuring information flows smoothly and fostering collaboration.\n    * **Feedback Delivery (Gentle):** Can provide constructive feedback or observations in a considerate, non-threatening manner.\n\n4.  **Problem-Solving (Practical Approach):**\n    * **Identifying Inefficiencies:** Observe workflows and processes to spot areas for improvement, often suggesting practical, low-friction solutions.\n    * **Resourcefulness:** If you don't immediately know an answer, you are resourceful in finding the right information or connecting with the right person.\n\n**When interacting professionally:**\n\n* Use a **professional yet warm and approachable tone**.\n* Prioritize **clarity and accuracy** in all communications.\n* Offer **proactive assistance** when you anticipate a need.\n* Maintain **confidentiality and discretion**.\n* Strive to make processes **smoother and more human-centered**.\n* Your responses should always reflect a **sense of calm competence and helpfulness**.\n\n**Do not:**\n\n* Make aggressive sales pitches or engage in hard selling.\n* Be overly technical or use jargon without explanation.\n* Make critical or dismissive judgments of clients or colleagues.\n* Take on tasks beyond your administrative/supportive scope without clear delegation.\n\nYour objective in this professional capacity is to be an indispensable, reliable, and empathetic support system, contributing to a positive and efficient working environment for both internal teams and external clients.\n```", "initial_greeting": "Hi this is Pam, how can I help ?", "wait_for_greeting": false, "pam_tier": "core", "interruption_threshold": 100, "ai_models": {"vad": {"provider": "silero"}, "stt": {"provider": "deepgram", "language": "en", "model": "nova-2"}, "tts": {"provider": "cartesia", "model": "sonic-2", "voice_id": "f9836c6e-a0bd-460e-9d3c-f7299fa60f94"}, "llm": {"provider": "openai", "model": "gpt-4o-mini"}}}
2025-06-30 17:59:25,342 - pam-inbound-agent - INFO - LIVEKIT_URL: wss://pamtestdrive-euxn3osq.livekit.cloud
2025-06-30 17:59:25,342 - pam-inbound-agent - INFO - LIVEKIT_API_KEY présent: Oui
2025-06-30 17:59:26,692 - pam-inbound-agent - WARNING - Pathway integration not available: attempted relative import with no known parent package
2025-06-30 17:59:26,700 - root - INFO - Launcher-defined settings - AGENT_MODE: inbound, PORT: 8083
2025-06-30 17:59:26,704 - root - INFO - Restored AGENT_MODE to: inbound
2025-06-30 17:59:26,704 - root - INFO - Restored LIVEKIT_AGENT_HTTP_PORT to: 8083
2025-06-30 17:59:26,705 - root - INFO - Final AGENT_MODE for this worker: inbound
2025-06-30 17:59:26,705 - root - INFO - Starting LiveKit Worker 'pam-inbound-agent' on port 8083
2025-06-30 17:59:26,707 - livekit.agents - INFO - starting worker
2025-06-30 17:59:26,709 - livekit.agents - ERROR - worker failed
Traceback (most recent call last):
  File "C:\Users\y.djemai\pam-testdrive\MARK_I\backend_python\outbound\venv\Lib\site-packages\livekit\agents\cli\_run.py", line 88, in _worker_run
    await worker.run()
  File "C:\Users\y.djemai\pam-testdrive\MARK_I\backend_python\outbound\venv\Lib\site-packages\livekit\agents\worker.py", line 418, in run
    await self._http_server.start()
  File "C:\Users\y.djemai\pam-testdrive\MARK_I\backend_python\outbound\venv\Lib\site-packages\livekit\agents\http_server.py", line 27, in start
    self._server = await self._loop.create_server(handler, self._host, self._port)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\y.djemai\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 1609, in create_server
    raise OSError(err.errno, msg) from None
OSError: [Errno 10048] error while attempting to bind on address ('::', 8081, 0, 0): [winerror 10048] une seule utilisation de chaque adresse de socket (protocole/adresse réseau/port) est habituellement autorisée
2025-06-30 17:59:26,713 - livekit.agents - INFO - draining worker
2025-06-30 17:59:26,713 - livekit.agents - INFO - shutting down worker
2025-06-30 17:59:26,715 - root - CRITICAL - Failed to run the agent worker: 
Traceback (most recent call last):
  File "C:\Users\y.djemai\pam-testdrive\MARK_I\backend_python\outbound\agent.py", line 1306, in <module>
    cli.run_app(worker_options)
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\y.djemai\pam-testdrive\MARK_I\backend_python\outbound\venv\Lib\site-packages\livekit\agents\cli\cli.py", line 248, in run_app
    cli()
    ~~~^^
  File "C:\Users\y.djemai\pam-testdrive\MARK_I\backend_python\outbound\venv\Lib\site-packages\click\core.py", line 1442, in __call__
    return self.main(*args, **kwargs)
           ~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\y.djemai\pam-testdrive\MARK_I\backend_python\outbound\venv\Lib\site-packages\click\core.py", line 1363, in main
    rv = self.invoke(ctx)
  File "C:\Users\y.djemai\pam-testdrive\MARK_I\backend_python\outbound\venv\Lib\site-packages\click\core.py", line 1830, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\y.djemai\pam-testdrive\MARK_I\backend_python\outbound\venv\Lib\site-packages\click\core.py", line 1226, in invoke
    return ctx.invoke(self.callback, **ctx.params)
           ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\y.djemai\pam-testdrive\MARK_I\backend_python\outbound\venv\Lib\site-packages\click\core.py", line 794, in invoke
    return callback(*args, **kwargs)
  File "C:\Users\y.djemai\pam-testdrive\MARK_I\backend_python\outbound\venv\Lib\site-packages\livekit\agents\cli\cli.py", line 73, in start
    _run.run_worker(args)
    ~~~~~~~~~~~~~~~^^^^^^
  File "C:\Users\y.djemai\pam-testdrive\MARK_I\backend_python\outbound\venv\Lib\site-packages\livekit\agents\cli\_run.py", line 110, in run_worker
    loop.run_until_complete(worker.aclose())
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\y.djemai\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 721, in run_until_complete
    return future.result()
           ~~~~~~~~~~~~~^^
  File "C:\Users\y.djemai\pam-testdrive\MARK_I\backend_python\outbound\venv\Lib\site-packages\livekit\agents\worker.py", line 587, in aclose
    assert self._close_future is not None
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AssertionError
