[AGENT] File logging enabled: C:\Users\y.djemai\pam-testdrive\MARK_I\backend_python\agents\logs\agent_457.log
[DB_CLIENT DEBUG] SUPABASE_URL: https://ioddvuvaxqywbzfcjmpi.supabase.co
[DB_CLIENT DEBUG] SUPABASE_ANON_KEY: SET
[DB_CLIENT DEBUG] SUPABASE_SERVICE_ROLE_KEY: SET
[DB_CLIENT DEBUG] Creating Supabase service client with URL: https://ioddvuvaxqywbzfcjmpi.supabase.co
[DB_CLIENT DEBUG] Supabase service client created successfully!
[DB_CLIENT DEBUG] SUPABASE_URL: https://ioddvuvaxqywbzfcjmpi.supabase.co
[DB_CLIENT DEBUG] SUPABASE_ANON_KEY: SET
[DB_CLIENT DEBUG] SUPABASE_SERVICE_ROLE_KEY: SET
[DB_CLIENT DEBUG] Creating Supabase service client with URL: https://ioddvuvaxqywbzfcjmpi.supabase.co
[DB_CLIENT DEBUG] Supabase service client created successfully!
Invalid encryption key format: Fernet key must be 32 url-safe base64-encoded bytes.
Generating new key for development...
Generated key: r_OJ52NN-kfiA-3DRcGHmDNuNJGapdNh5pi_10XkhMM=
Please set this in your INTEGRATION_ENCRYPTION_KEY environment variable
{"message": "starting worker", "level": "INFO", "name": "livekit.agents", "version": "1.1.6", "rtc-version": "1.0.11", "timestamp": "2025-08-03T19:07:03.289609+00:00"}
{"message": "initializing job runner", "level": "INFO", "name": "livekit.agents", "tid": 52600, "timestamp": "2025-08-03T19:07:03.342727+00:00"}
{"message": "initializing job runner", "level": "INFO", "name": "livekit.agents", "tid": 55700, "timestamp": "2025-08-03T19:07:03.344426+00:00"}
{"message": "initializing job runner", "level": "INFO", "name": "livekit.agents", "tid": 13096, "timestamp": "2025-08-03T19:07:03.345430+00:00"}
{"message": "initializing job runner", "level": "INFO", "name": "livekit.agents", "tid": 22948, "timestamp": "2025-08-03T19:07:03.346430+00:00"}
{"message": "initializing job runner", "level": "INFO", "name": "livekit.agents", "tid": 51512, "timestamp": "2025-08-03T19:07:03.346430+00:00"}
{"message": "initializing job runner", "level": "INFO", "name": "livekit.agents", "tid": 18700, "timestamp": "2025-08-03T19:07:03.347426+00:00"}
{"message": "initializing job runner", "level": "INFO", "name": "livekit.agents", "tid": 52668, "timestamp": "2025-08-03T19:07:03.348422+00:00"}
{"message": "initializing job runner", "level": "INFO", "name": "livekit.agents", "tid": 48820, "timestamp": "2025-08-03T19:07:03.349432+00:00"}
{"message": "initializing job runner", "level": "INFO", "name": "livekit.agents", "tid": 23936, "timestamp": "2025-08-03T19:07:03.350425+00:00"}
{"message": "initializing job runner", "level": "INFO", "name": "livekit.agents", "tid": 38004, "timestamp": "2025-08-03T19:07:03.351423+00:00"}
{"message": "initializing job runner", "level": "INFO", "name": "livekit.agents", "tid": 6544, "timestamp": "2025-08-03T19:07:03.351423+00:00"}
{"message": "initializing job runner", "level": "INFO", "name": "livekit.agents", "tid": 44544, "timestamp": "2025-08-03T19:07:03.352428+00:00"}
{"message": "job runner initialized", "level": "INFO", "name": "livekit.agents", "tid": 52600, "elapsed_time": 0.06, "timestamp": "2025-08-03T19:07:03.401654+00:00"}
{"message": "job runner initialized", "level": "INFO", "name": "livekit.agents", "tid": 55700, "elapsed_time": 0.06, "timestamp": "2025-08-03T19:07:03.402658+00:00"}
{"message": "job runner initialized", "level": "INFO", "name": "livekit.agents", "tid": 13096, "elapsed_time": 0.06, "timestamp": "2025-08-03T19:07:03.403658+00:00"}
{"message": "job runner initialized", "level": "INFO", "name": "livekit.agents", "tid": 22948, "elapsed_time": 0.06, "timestamp": "2025-08-03T19:07:03.404654+00:00"}
{"message": "job runner initialized", "level": "INFO", "name": "livekit.agents", "tid": 51512, "elapsed_time": 0.06, "timestamp": "2025-08-03T19:07:03.406105+00:00"}
{"message": "job runner initialized", "level": "INFO", "name": "livekit.agents", "tid": 52668, "elapsed_time": 0.06, "timestamp": "2025-08-03T19:07:03.407660+00:00"}
{"message": "job runner initialized", "level": "INFO", "name": "livekit.agents", "tid": 18700, "elapsed_time": 0.06, "timestamp": "2025-08-03T19:07:03.408665+00:00"}
{"message": "job runner initialized", "level": "INFO", "name": "livekit.agents", "tid": 23936, "elapsed_time": 0.06, "timestamp": "2025-08-03T19:07:03.408665+00:00"}
{"message": "job runner initialized", "level": "INFO", "name": "livekit.agents", "tid": 48820, "elapsed_time": 0.06, "timestamp": "2025-08-03T19:07:03.410180+00:00"}
{"message": "job runner initialized", "level": "INFO", "name": "livekit.agents", "tid": 38004, "elapsed_time": 0.06, "timestamp": "2025-08-03T19:07:03.411210+00:00"}
{"message": "job runner initialized", "level": "INFO", "name": "livekit.agents", "tid": 6544, "elapsed_time": 0.06, "timestamp": "2025-08-03T19:07:03.412211+00:00"}
{"message": "job runner initialized", "level": "INFO", "name": "livekit.agents", "tid": 44544, "elapsed_time": 0.06, "timestamp": "2025-08-03T19:07:03.413203+00:00"}
{"message": "see tracing information at http://localhost:52437/debug", "level": "INFO", "name": "livekit.agents", "timestamp": "2025-08-03T19:07:03.415212+00:00"}
{"message": "registered worker", "level": "INFO", "name": "livekit.agents", "id": "AW_VpzvD2YE8N8L", "url": "wss://pamtestdrive-euxn3osq.livekit.cloud", "region": "Germany", "protocol": 16, "timestamp": "2025-08-03T19:07:03.590224+00:00"}
{"message": "received job request", "level": "INFO", "name": "livekit.agents", "job_id": "AJ_S8KdRrowxEY6", "dispatch_id": "", "room_name": "agent-call-458", "agent_name": "outbound-caller", "resuming": false, "timestamp": "2025-08-03T19:08:03.278777+00:00"}
{"message": "üìû Outbound Agent entrypoint called", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-08-03T19:08:03.304220+00:00"}
{"message": "Starting entrypoint for supabase_call_id: 458", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-08-03T19:08:03.304220+00:00"}
{"message": "üìã Extracted dial_info: {'agent_id': 11, 'call_direction': 'outbound', 'room_name': 'agent-call-458', 'supabase_call_id': 458, 'telnyx_call_control_id': None, 'default_pathway_id': 'd5fc510b-7635-4715-9066-e522daa2336d', 'user_id': 'b55837c4-270f-4f1f-8023-7ab09ee5f44d', 'auth_token': None, 'phone_number': '+33661329235', 'sip_trunk_id': 'ST_6CYLZwTLMCe2', 'agent_caller_id_number': '+33189311209'}", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-08-03T19:08:03.307084+00:00"}
{"message": "initializing job runner", "level": "INFO", "name": "livekit.agents", "tid": 54056, "timestamp": "2025-08-03T19:08:03.377184+00:00"}
{"message": "job runner initialized", "level": "INFO", "name": "livekit.agents", "tid": 54056, "elapsed_time": 0.0, "timestamp": "2025-08-03T19:08:03.385597+00:00"}
{"message": "‚úÖ Connected to LiveKit room", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-08-03T19:08:03.916450+00:00"}
{"message": "Configuring AI models from job metadata...", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-08-03T19:08:03.917449+00:00"}
{"message": "‚úÖ AI Models configured successfully", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-08-03T19:08:04.830788+00:00"}
{"message": "Checking for default pathway for agent 11 and call 458", "level": "INFO", "name": "agent_pathway_integration", "timestamp": "2025-08-03T19:08:04.831899+00:00"}
{"message": "Created pathway execution record: 451291c9-5b55-4419-8dea-91c6dfda0b81", "level": "INFO", "name": "agent_pathway_integration", "timestamp": "2025-08-03T19:08:05.383157+00:00"}
{"message": "Linked call 458 to pathway execution 451291c9-5b55-4419-8dea-91c6dfda0b81", "level": "INFO", "name": "agent_pathway_integration", "timestamp": "2025-08-03T19:08:05.421054+00:00"}
{"message": "‚úÖ Started pathway execution 451291c9-5b55-4419-8dea-91c6dfda0b81 for call 458", "level": "INFO", "name": "agent_pathway_integration", "timestamp": "2025-08-03T19:08:05.421054+00:00"}
{"message": "‚úÖ Auto-started pathway execution: 451291c9-5b55-4419-8dea-91c6dfda0b81", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-08-03T19:08:05.421054+00:00"}
{"message": "Placeholder: Fetching pathway config for call_id 458 from backend...", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-08-03T19:08:05.422050+00:00"}
{"message": "üîç Fetching call details for call_id: 458", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-08-03T19:08:05.422050+00:00"}
{"message": "üìû Call 458 found with pathway_execution_id: 451291c9-5b55-4419-8dea-91c6dfda0b81", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-08-03T19:08:05.458565+00:00"}
{"message": "üìã Pathway execution found with pathway_id: d5fc510b-7635-4715-9066-e522daa2336d", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-08-03T19:08:05.501525+00:00"}
{"message": "‚úÖ Found pathway 'B2B Sales- Pathway' with config", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-08-03T19:08:05.547659+00:00"}
{"message": "Fetched pathway config for call_id 458: {'edges': [{'id': 'xy-edge__conversation-1752584446694-condition-1752585419519', 'key': 'xy-edge__conversation-1752584446694-condition-1752585419519', 'source': 'conversation-1752584446694', 'target': 'condition-1752585419519'}, {'id': 'xy-edge__condition-1752585419519true-conversation-1752585487904', 'key': 'xy-edge__condition-1752585419519true-conversation-1752585487904', 'source': 'condition-1752585419519', 'target': 'conversation-1752585487904'}, {'id': 'xy-edge__conversation-1752585487904-condition-1752585515969', 'key': 'xy-edge__conversation-1752585487904-condition-1752585515969', 'source': 'conversation-1752585487904', 'target': 'condition-1752585515969'}, {'id': 'xy-edge__conversation-1752585487904-condition-1752585517385', 'key': 'xy-edge__conversation-1752585487904-condition-1752585517385', 'source': 'conversation-1752585487904', 'target': 'condition-1752585517385'}, {'id': 'xy-edge__conversation-1752585487904-condition-1752585513967', 'key': 'xy-edge__conversation-1752585487904-condition-1752585513967', 'source': 'conversation-1752585487904', 'target': 'condition-1752585513967'}, {'id': 'xy-edge__conversation-1752584446694-condition-1752585422872', 'key': 'xy-edge__conversation-1752584446694-condition-1752585422872', 'source': 'conversation-1752584446694', 'target': 'condition-1752585422872'}, {'id': 'xy-edge__conversation-1752584446694-condition-1752585421207', 'key': 'xy-edge__conversation-1752584446694-condition-1752585421207', 'source': 'conversation-1752584446694', 'target': 'condition-1752585421207'}, {'id': 'xy-edge__condition-1752585421207true-conversation-1752585570818', 'key': 'xy-edge__condition-1752585421207true-conversation-1752585570818', 'source': 'condition-1752585421207', 'target': 'conversation-1752585570818'}, {'id': 'xy-edge__conversation-1752585570818-condition-1752585591007', 'key': 'xy-edge__conversation-1752585570818-condition-1752585591007', 'source': 'conversation-1752585570818', 'target': 'condition-1752585591007'}, {'id': 'xy-edge__conversation-1752585570818-condition-1752585592634', 'key': 'xy-edge__conversation-1752585570818-condition-1752585592634', 'source': 'conversation-1752585570818', 'target': 'condition-1752585592634'}, {'id': 'xy-edge__condition-1752585515969true-conversation-1752585662522', 'key': 'xy-edge__condition-1752585515969true-conversation-1752585662522', 'source': 'condition-1752585515969', 'target': 'conversation-1752585662522'}, {'id': 'xy-edge__condition-1752585517385true-conversation-1752585818106', 'key': 'xy-edge__condition-1752585517385true-conversation-1752585818106', 'source': 'condition-1752585517385', 'target': 'conversation-1752585818106'}, {'id': 'xy-edge__condition-1752585513967true-conversation-1752585761728', 'key': 'xy-edge__condition-1752585513967true-conversation-1752585761728', 'source': 'condition-1752585513967', 'target': 'conversation-1752585761728'}, {'id': 'xy-edge__conversation-1752585761728-end_call-1752586102371', 'key': 'xy-edge__conversation-1752585761728-end_call-1752586102371', 'source': 'conversation-1752585761728', 'target': 'end_call-1752586102371'}, {'id': 'xy-edge__conversation-1752585662522-condition-1752585685583', 'key': 'xy-edge__conversation-1752585662522-condition-1752585685583', 'source': 'conversation-1752585662522', 'target': 'condition-1752585685583'}, {'id': 'xy-edge__conversation-1752585662522-condition-1752585687002', 'key': 'xy-edge__conversation-1752585662522-condition-1752585687002', 'source': 'conversation-1752585662522', 'target': 'condition-1752585687002'}, {'id': 'xy-edge__conversation-1752585662522-condition-1752585684024', 'key': 'xy-edge__conversation-1752585662522-condition-1752585684024', 'source': 'conversation-1752585662522', 'target': 'condition-1752585684024'}, {'id': 'xy-edge__condition-1752585685583true-app_action-1752586209057', 'key': 'xy-edge__condition-1752585685583true-app_action-1752586209057', 'source': 'condition-1752585685583', 'target': 'app_action-1752586209057'}, {'id': 'xy-edge__condition-1752585687002true-conversation-1752585818106', 'key': 'xy-edge__condition-1752585687002true-conversation-1752585818106', 'source': 'condition-1752585687002', 'target': 'conversation-1752585818106'}, {'id': 'xy-edge__condition-1752585684024true-conversation-1752585761728', 'key': 'xy-edge__condition-1752585684024true-conversation-1752585761728', 'source': 'condition-1752585684024', 'target': 'conversation-1752585761728'}, {'id': 'xy-edge__condition-1752586789213false-conversation-1752585818106', 'key': 'xy-edge__condition-1752586789213false-conversation-1752585818106', 'source': 'condition-1752586789213', 'target': 'conversation-1752585818106'}, {'id': 'xy-edge__app_action-1752586209057-condition-1752586789213', 'key': 'xy-edge__app_action-1752586209057-condition-1752586789213', 'source': 'app_action-1752586209057', 'target': 'condition-1752586789213'}, {'id': 'xy-edge__condition-1752585848810true-tools-1752586942596', 'key': 'xy-edge__condition-1752585848810true-tools-1752586942596', 'source': 'condition-1752585848810', 'target': 'tools-1752586942596'}, {'id': 'xy-edge__conversation-1752585818106-condition-1752585848810', 'key': 'xy-edge__conversation-1752585818106-condition-1752585848810', 'source': 'conversation-1752585818106', 'target': 'condition-1752585848810'}, {'id': 'xy-edge__conversation-1752585818106-condition-1752585852282', 'key': 'xy-edge__conversation-1752585818106-condition-1752585852282', 'source': 'conversation-1752585818106', 'target': 'condition-1752585852282'}, {'id': 'xy-edge__condition-1752585852282true-end_call-1752587058511', 'key': 'xy-edge__condition-1752585852282true-end_call-1752587058511', 'source': 'condition-1752585852282', 'target': 'end_call-1752587058511'}, {'id': 'xy-edge__condition-1752585591007true-end_call-1752586097416', 'key': 'xy-edge__condition-1752585591007true-end_call-1752586097416', 'source': 'condition-1752585591007', 'target': 'end_call-1752586097416'}, {'id': 'xy-edge__condition-1752585592634true-tools-1752587100122', 'key': 'xy-edge__condition-1752585592634true-tools-1752587100122', 'source': 'condition-1752585592634', 'target': 'tools-1752587100122'}, {'id': 'xy-edge__tools-1752587100122-end_call-1752586097416', 'key': 'xy-edge__tools-1752587100122-end_call-1752586097416', 'source': 'tools-1752587100122', 'target': 'end_call-1752586097416'}, {'id': 'xy-edge__condition-1752587369230true-conversation-1752586729436', 'key': 'xy-edge__condition-1752587369230true-conversation-1752586729436', 'source': 'condition-1752587369230', 'target': 'conversation-1752586729436'}, {'id': 'xy-edge__app_action-1752586209057-condition-1752587369230', 'key': 'xy-edge__app_action-1752586209057-condition-1752587369230', 'source': 'app_action-1752586209057', 'target': 'condition-1752587369230'}, {'id': 'xy-edge__conversation-1752586729436-condition-1752586879584', 'key': 'xy-edge__conversation-1752586729436-condition-1752586879584', 'source': 'conversation-1752586729436', 'target': 'condition-1752586879584'}, {'id': 'xy-edge__condition-1752586879584true-end_call-1752586890630', 'key': 'xy-edge__condition-1752586879584true-end_call-1752586890630', 'source': 'condition-1752586879584', 'target': 'end_call-1752586890630'}, {'id': 'xy-edge__tools-1752586942596-condition-1752586959602', 'key': 'xy-edge__tools-1752586942596-condition-1752586959602', 'source': 'tools-1752586942596', 'target': 'condition-1752586959602'}, {'id': 'xy-edge__condition-1752586959602true-end_call-1752586990804', 'key': 'xy-edge__condition-1752586959602true-end_call-1752586990804', 'source': 'condition-1752586959602', 'target': 'end_call-1752586990804'}, {'id': 'xy-edge__condition-1752585422872true-end_call-1753698161049', 'key': 'xy-edge__condition-1752585422872true-end_call-1753698161049', 'source': 'condition-1752585422872', 'target': 'end_call-1753698161049'}], 'nodes': [{'id': 'conversation-1752584446694', 'name': 'Greeting', 'type': 'conversation', 'config': {'id': 'greeting', 'prompt': 'You are Pam from Dunder Mifflin. You are making an outbound sales call to someone who previously inquired about your services. Your goal is to determine if this is a good time to talk. Be friendly and professional. Start by introducing yourself and your company, mention that you are following up on their inquiry, then ask if they have a few minutes to talk. Listen carefully to their response to gauge their availability and interest level. Extract any information about their current situation or needs they mention.', 'greeting': 'Hi this is Pam from Dunder Mifflin', 'language': 'en', 'temperature': 0.7, 'global_access': False, 'silence_timeout': 10, 'extracted_variables': [{'name': 'conversation_started', 'type': 'boolean', 'description': 'Conversation has started', 'extraction_prompt': 'Conversation has started'}, {'name': 'call_start_time', 'type': 'string', 'description': 'Timestamp when call started', 'extraction_prompt': 'Timestamp when call started'}], 'interruption_enabled': True, 'transition_condition': '', 'transcription_enabled': True, 'transition_condition_enabled': False}, 'position': {'x': 159.19974474711404, 'y': -406.435592953321}}, {'id': 'condition-1752585419519', 'name': 'Greeting Condition 1', 'type': 'condition', 'config': {'id': 'greeting_condition_1', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Person is available to talk now and shows interest in the conversation', 'next_node': 'qualify_lead', 'confidence_threshold': 0.7}, 'source_node': 'greeting'}, 'position': {'x': 112.72206178621366, 'y': 127.8578385636643}}, {'id': 'condition-1752585421207', 'name': 'Schedule Callback Condition', 'type': 'condition', 'config': {'id': 'greeting_condition_2', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Person is busy or wants to be called back later', 'next_node': 'schedule_callback', 'confidence_threshold': 0.7}, 'source_node': 'greeting', 'routing_style': 'livekit', 'routing_targets': [{'name': 'Schedule Callback', 'node_id': 'conversation-1752585570818', 'description': 'Route to Schedule Callback', 'confidence_threshold': 0.7}]}, 'position': {'x': -313.0080598768747, 'y': -162.41507420188168}}, {'id': 'condition-1752585422872', 'name': 'Greeting Condition 3', 'type': 'condition', 'config': {'id': 'greeting_condition_3', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Person seems uninterested, hostile, or wants to end the call', 'next_node': 'polite_decline', 'confidence_threshold': 0.8}, 'source_node': 'greeting'}, 'position': {'x': -541.3518080512141, 'y': 374.79123495864394}}, {'id': 'conversation-1752585487904', 'name': 'Qualify Lead', 'type': 'conversation', 'config': {'id': 'qualify_lead', 'prompt': \"The person is willing to talk. Now you need to qualify them as a potential customer. Ask about their current situation, what specific services they're looking for, their timeline, and any challenges they're facing. Be conversational but focused on gathering key qualifying information: budget range, decision-making authority, urgency of need, and fit for your services. Listen for buying signals and pain points. Ask open-ended questions to understand their needs deeply.\", 'language': 'en', 'temperature': 0.7, 'global_access': False, 'system_prompt': '', 'silence_timeout': 10, 'extracted_variables': [{'name': 'qualification_started', 'type': 'boolean', 'description': 'Lead qualification process started', 'extraction_prompt': 'Lead qualification process started'}], 'interruption_enabled': True, 'transition_condition': '', 'transcription_enabled': True, 'transition_condition_enabled': False}, 'position': {'x': 163.4402281365625, 'y': 311.3499021877407}}, {'id': 'condition-1752585513967', 'name': 'Qualify Lead Condition 3', 'type': 'condition', 'config': {'id': 'qualify_lead_condition_3', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Person seems like a poor fit with no budget, no authority, no genuine need, or timing issues', 'next_node': 'polite_decline', 'confidence_threshold': 0.8}, 'source_node': 'qualify_lead'}, 'position': {'x': 573.7084072411365, 'y': 459.684096539979}}, {'id': 'condition-1752585515969', 'name': 'Qualify Lead Condition 1', 'type': 'condition', 'config': {'id': 'qualify_lead_condition_1', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Person is a qualified lead with genuine interest and potential budget for our services', 'next_node': 'book_appointment', 'confidence_threshold': 0.7}, 'source_node': 'qualify_lead'}, 'position': {'x': -191.31874774110742, 'y': 458.6868230734692}}, {'id': 'condition-1752585517385', 'name': 'Qualify Lead Condition 2', 'type': 'condition', 'config': {'id': 'qualify_lead_condition_2', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Person expressed interest but wants more information before scheduling anything', 'next_node': 'send_information', 'confidence_threshold': 0.7}, 'source_node': 'qualify_lead'}, 'position': {'x': 202.90168708178726, 'y': 488.9489925914291}}, {'id': 'conversation-1752585570818', 'name': 'Schedule Callback', 'type': 'conversation', 'config': {'id': 'schedule_callback', 'prompt': \"The person indicated they're busy or want to be called back later. Be understanding and accommodating. Ask for their preferred time for a callback - offer specific options like 'tomorrow afternoon' or 'later this week'. Try to get a specific day and time range. Also ask if there's any particular information they'd like you to have ready for the callback. Be flexible and work around their schedule.\", 'language': 'en', 'temperature': 0.7, 'global_access': False, 'system_prompt': '', 'silence_timeout': 10, 'extracted_variables': [{'name': 'callback_requested', 'type': 'boolean', 'description': 'Customer requested a callback', 'extraction_prompt': 'Customer requested a callback'}], 'interruption_enabled': True, 'transition_condition': '', 'transcription_enabled': True, 'transition_condition_enabled': False}, 'position': {'x': -824.9743648175192, 'y': 117.32593048536444}}, {'id': 'condition-1752585591007', 'name': 'Schedule Callback Condition 2', 'type': 'condition', 'config': {'id': 'schedule_callback_condition_2', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Person is politely trying to end the call without genuine interest in a callback', 'next_node': 'end_callback', 'confidence_threshold': 0.8}, 'source_node': 'schedule_callback'}, 'position': {'x': -952.3200684413032, 'y': 282.70220411280184}}, {'id': 'condition-1752585592634', 'name': 'Schedule Callback Condition 1', 'type': 'condition', 'config': {'id': 'schedule_callback_condition_1', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Person provided a specific time or preference for the callback', 'next_node': 'schedule_callback_tool', 'confidence_threshold': 0.7}, 'source_node': 'schedule_callback'}, 'position': {'x': -1310.484446829189, 'y': 285.194202724594}}, {'id': 'conversation-1752585662522', 'name': 'Book Appointment', 'type': 'conversation', 'config': {'id': 'book_appointment', 'prompt': \"This is a qualified lead who has shown interest. Your goal is to schedule a consultation or appointment. Mention the value they'll get from the meeting and how it will help solve their specific needs you've identified. Offer specific time slots and be flexible with scheduling. Try to get their availability, preferred meeting type (phone, video, in-person), and contact details for scheduling. If they hesitate, address their concerns and offer to send more information first.\", 'language': 'en', 'temperature': 0.7, 'global_access': False, 'system_prompt': '', 'silence_timeout': 10, 'extracted_variables': [{'name': 'booking_started', 'type': 'boolean', 'description': 'Appointment booking process started', 'extraction_prompt': 'Appointment booking process started'}, {'name': 'qualified_lead', 'type': 'boolean', 'description': 'Lead is qualified for appointment', 'extraction_prompt': 'Lead is qualified for appointment'}], 'interruption_enabled': True, 'transition_condition': '', 'transcription_enabled': True, 'transition_condition_enabled': False}, 'position': {'x': -157.01338060119002, 'y': 676.3166837636757}}, {'id': 'condition-1752585684024', 'name': 'Book Appointment Condition 3', 'type': 'condition', 'config': {'id': 'book_appointment_condition_3', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Person declined to schedule or seems hesitant about moving forward', 'next_node': 'polite_decline', 'confidence_threshold': 0.8}, 'source_node': 'book_appointment'}, 'position': {'x': -273.7854306622481, 'y': 1041.96815487565}}, {'id': 'condition-1752585685583', 'name': 'Book Appointment Condition 1', 'type': 'condition', 'config': {'id': 'book_appointment_condition_1', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Person agreed to schedule an appointment and provided their availability or preferred time', 'next_node': 'create_calendar_event', 'confidence_threshold': 0.7}, 'source_node': 'book_appointment'}, 'position': {'x': -943.9017843724146, 'y': 1044.3504442101917}}, {'id': 'condition-1752585687002', 'name': 'Book Appointment Condition 2', 'type': 'condition', 'config': {'id': 'book_appointment_condition_2', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Person wants to schedule but asked for information to be sent first', 'next_node': 'send_information', 'confidence_threshold': 0.7}, 'source_node': 'book_appointment'}, 'position': {'x': -606.1989666079745, 'y': 1056.062258946693}}, {'id': 'conversation-1752585761728', 'name': 'Polite Decline', 'type': 'conversation', 'config': {'id': 'polite_decline', 'prompt': \"This person doesn't seem like a good fit right now. Be polite and professional. Thank them for their time, acknowledge that the timing might not be right, and offer to send them information for future reference. Ask if they'd like to receive updates or if there's a better time to reach out in the future. End on a positive note and leave the door open for future contact.\", 'language': 'en', 'temperature': 0.7, 'global_access': False, 'system_prompt': '', 'silence_timeout': 10, 'extracted_variables': [{'name': 'lead_declined', 'type': 'boolean', 'description': 'Lead was politely declined', 'extraction_prompt': 'Lead was politely declined'}], 'interruption_enabled': True, 'transition_condition': '', 'transcription_enabled': True, 'transition_condition_enabled': False}, 'position': {'x': 716.720968381256, 'y': 1115.8291479001427}}, {'id': 'conversation-1752585818106', 'name': 'Send Information', 'type': 'conversation', 'config': {'id': 'send_information', 'prompt': \"The person wants more information before scheduling. Ask for their email address to send details about your services, pricing, case studies, or whatever information would be most relevant to their specific needs. Be specific about what you'll send and when they can expect it. Also ask if they have any specific questions you can address in the information packet. Make them feel comfortable that this isn't high-pressure follow-up.\", 'language': 'en', 'temperature': 0.7, 'global_access': False, 'system_prompt': '', 'silence_timeout': 10, 'extracted_variables': [{'name': 'info_requested', 'type': 'boolean', 'description': 'Customer requested information packet', 'extraction_prompt': 'Customer requested information packet'}], 'interruption_enabled': True, 'transition_condition': '', 'transcription_enabled': True, 'transition_condition_enabled': False}, 'position': {'x': 378.9665058084346, 'y': 1507.51975168371}}, {'id': 'condition-1752585848810', 'name': 'Send Information Condition 1', 'type': 'condition', 'config': {'id': 'send_information_condition_1', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Person provided their email address for sending information', 'next_node': 'capture_email', 'confidence_threshold': 0.7}, 'source_node': 'send_information'}, 'position': {'x': 165.51654504146074, 'y': 1635.6430622199036}}, {'id': 'condition-1752585852282', 'name': 'Send Information Condition 2', 'type': 'condition', 'config': {'id': 'send_information_condition_2', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Person declined to provide their email or seems uninterested in receiving information', 'next_node': 'end_declined', 'confidence_threshold': 0.8}, 'source_node': 'send_information'}, 'position': {'x': 500.68393482997806, 'y': 1628.8051584512218}}, {'id': 'end_call-1752586097416', 'name': 'End Callback', 'type': 'end_call', 'config': {'id': 'end_callback', 'custom_data': {}, 'save_recording': False, 'email_recipient': '', 'goodbye_message': \"Perfect! I'll call you back at {callback_time}. Have a great day!\", 'save_transcript': True, 'call_disposition': 'completed', 'send_summary_email': False, 'extracted_variables': [{'name': 'call_outcome', 'type': 'string', 'description': 'Final call outcome', 'extraction_prompt': 'Final call outcome'}, {'name': 'callback_scheduled_for', 'type': 'string', 'description': 'Scheduled callback time', 'extraction_prompt': 'Scheduled callback time'}]}, 'position': {'x': -1059.0542799629145, 'y': 741.924119385108}}, {'id': 'end_call-1752586102371', 'name': 'End Declined', 'type': 'end_call', 'config': {'id': 'end_declined', 'custom_data': {}, 'save_recording': False, 'email_recipient': '', 'goodbye_message': 'Thank you for your time. Have a great day!', 'save_transcript': True, 'call_disposition': 'completed', 'send_summary_email': False, 'extracted_variables': [{'name': 'call_outcome', 'type': 'string', 'description': 'Final call outcome', 'extraction_prompt': 'Final call outcome'}, {'name': 'decline_reason', 'type': 'string', 'description': 'Reason for declining', 'extraction_prompt': 'Reason for declining'}]}, 'position': {'x': 667.7410507582531, 'y': 1363.7408872996832}}, {'id': 'app_action-1752586209057', 'name': 'Create Calendar Event', 'type': 'app_action', 'config': {'id': 'create_calendar_event', 'data': {'app_name': 'google_calendar', 'action_type': 'create_event', 'action_config': {'calendar_id': 'primary', 'duration_minutes': 60}, 'field_mappings': {'summary': 'Consultation with {contact_name}', 'attendees': ['{contact_email}'], 'start_time': '{selected_appointment_time}', 'description': 'Sales consultation scheduled via PAM'}}, 'app_name': '', 'action_type': '', 'action_config': {}, 'field_mappings': {}, 'user_connection_id': '', 'extracted_variables': [{'name': 'appointment_booked', 'type': 'boolean', 'description': 'Appointment successfully booked', 'extraction_prompt': 'Appointment successfully booked'}]}, 'position': {'x': -931.7621809606596, 'y': 1347.8657791544829}}, {'id': 'conversation-1752586729436', 'name': 'Confirm Appointment', 'type': 'conversation', 'config': {'id': 'confirm_appointment', 'prompt': \"The calendar event has been successfully created. Confirm the appointment details with enthusiasm. Mention the date, time, and format of the meeting. Let them know they'll receive a calendar invite shortly. Ask if they have any specific topics they'd like to discuss or questions they want addressed during the consultation. Set clear expectations for what the meeting will cover and how long it will take.\", 'language': 'en', 'temperature': 0.7, 'global_access': False, 'system_prompt': '', 'silence_timeout': 10, 'extracted_variables': [{'name': 'appointment_confirmed', 'type': 'boolean', 'description': 'Appointment details confirmed with customer', 'extraction_prompt': 'Appointment details confirmed with customer'}], 'interruption_enabled': True, 'transition_condition': '', 'transcription_enabled': True, 'transition_condition_enabled': False}, 'position': {'x': -981.7639769305733, 'y': 1813.2009923352334}}, {'id': 'condition-1752586789213', 'name': 'Create Calendar Event Condition 2', 'type': 'condition', 'config': {'id': 'create_calendar_event_condition_2', 'prompt': 'Calendar event creation failed or encountered an error', 'source_node': 'create_calendar_event'}, 'position': {'x': -764.0953358329234, 'y': 1530.225098242719}}, {'id': 'condition-1752586879584', 'name': 'Confirm Appointment Condition 1', 'type': 'condition', 'config': {'id': 'confirm_appointment_condition_1', 'prompt': 'Appointment has been confirmed and conversation wrapped up successfully', 'source_node': 'confirm_appointment'}, 'position': {'x': -1011.2849335976309, 'y': 1938.9218754961776}}, {'id': 'end_call-1752586890630', 'name': 'End Success', 'type': 'end_call', 'config': {'id': 'end_success', 'custom_data': {}, 'save_recording': False, 'email_recipient': '', 'goodbye_message': 'Thank you! Looking forward to speaking with you on {appointment_date}. Have a great day!', 'save_transcript': True, 'call_disposition': 'completed', 'send_summary_email': False, 'extracted_variables': [{'name': 'call_outcome', 'type': 'string', 'description': 'Final call outcome', 'extraction_prompt': 'Final call outcome'}, {'name': 'success', 'type': 'boolean', 'description': 'Call was successful', 'extraction_prompt': 'Call was successful'}, {'name': 'appointment_date', 'type': 'string', 'description': 'Scheduled appointment date', 'extraction_prompt': 'Scheduled appointment date'}, {'name': 'appointment_time', 'type': 'string', 'description': 'Scheduled appointment time', 'extraction_prompt': 'Scheduled appointment time'}]}, 'position': {'x': -1000.4160641634687, 'y': 2109.1766822906798}}, {'id': 'tools-1752586942596', 'name': 'Capture Email', 'type': 'tools', 'config': {'id': 'capture_email', 'app_name': 'google_calendar', 'parameters': {'email': '{contact_email}', 'notes': '{conversation_summary}', 'source': 'phone_call', 'status': 'info_requested', 'contact_name': '{contact_name}', 'phone_number': '{phone_number}', 'interest_level': '{interest_level}', 'qualification_score': '{qualification_score}'}, 'webhook_url': 'https://hook.us1.make.com/abc123def456', 'selected_app_id': 'ebce972a-6206-4708-8557-90bfd816ad14', 'selected_app_name': 'Google Calendar', 'variable_mappings': {}, 'selected_action_id': '', 'extracted_variables': [{'name': 'email_captured', 'type': 'boolean', 'description': 'Customer email address captured', 'extraction_prompt': 'Customer email address captured'}], 'selected_action_name': '', 'selected_action_description': ''}, 'position': {'x': 212.10097682093254, 'y': 1877.1337109778142}}, {'id': 'condition-1752586959602', 'name': 'Condition Node', 'type': 'condition', 'config': {'prompt': 'email captured'}, 'position': {'x': 207.1067512553629, 'y': 2061.4359900186564}}, {'id': 'end_call-1752586990804', 'name': 'End Info Sent', 'type': 'end_call', 'config': {'id': 'end_info_sent', 'custom_data': {}, 'save_recording': False, 'email_recipient': '', 'goodbye_message': \"Great! I'll send that information right over. Feel free to call us with any questions. Have a wonderful day!\", 'save_transcript': True, 'call_disposition': 'completed', 'send_summary_email': False, 'extracted_variables': [{'name': 'call_outcome', 'type': 'string', 'description': 'Final call outcome', 'extraction_prompt': 'Final call outcome'}, {'name': 'follow_up_required', 'type': 'boolean', 'description': 'Follow-up is required', 'extraction_prompt': 'Follow-up is required'}]}, 'position': {'x': 201.81395080636105, 'y': 2189.0828212015595}}, {'id': 'end_call-1752587058511', 'name': 'End Declined', 'type': 'end_call', 'config': {'id': 'end_declined', 'custom_data': {}, 'save_recording': False, 'email_recipient': '', 'goodbye_message': 'Thank you for your time. Have a great day!', 'save_transcript': True, 'call_disposition': 'completed', 'send_summary_email': False, 'extracted_variables': [{'name': 'call_outcome', 'type': 'string', 'description': 'Final call outcome', 'extraction_prompt': 'Final call outcome'}, {'name': 'decline_reason', 'type': 'string', 'description': 'Reason for declining', 'extraction_prompt': 'Reason for declining'}]}, 'position': {'x': 860.3817328453051, 'y': 1807.0939093564982}}, {'id': 'tools-1752587100122', 'name': 'Schedule Callback Tool', 'type': 'tools', 'config': {'id': 'schedule_callback_tool', 'parameters': {'priority': 'medium', 'agent_notes': '{conversation_summary}', 'contact_name': '{contact_name}', 'phone_number': '{phone_number}', 'callback_time': '{preferred_callback_time}', 'callback_reason': 'customer_requested'}, 'webhook_url': 'https://hook.us1.make.com/callback789xyz', 'selected_app_id': '', 'selected_app_name': '', 'variable_mappings': {}, 'selected_action_id': '', 'extracted_variables': [{'name': 'callback_scheduled', 'type': 'boolean', 'description': 'Callback was successfully scheduled', 'extraction_prompt': 'Callback was successfully scheduled'}], 'selected_action_name': '', 'selected_action_description': ''}, 'position': {'x': -1299.6936738792808, 'y': 453.175693126387}}, {'id': 'condition-1752587369230', 'name': 'Create Calendar Event Condition 1', 'type': 'condition', 'config': {'id': 'create_calendar_event_condition_1', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Calendar event was successfully created', 'next_node': 'confirm_appointment', 'confidence_threshold': 0.9}, 'source_node': 'create_calendar_event'}, 'position': {'x': -1149.0097523440525, 'y': 1584.6468586902927}}, {'id': 'end_call-1753698161049', 'name': 'End_call  Greeting', 'type': 'end_call', 'config': {'custom_data': {}, 'save_recording': False, 'email_recipient': '', 'goodbye_message': 'Thank you for your time. Have a great day!', 'save_transcript': True, 'call_disposition': 'completed', 'send_summary_email': False}, 'position': {'x': -517.2888315376458, 'y': 701.791880267355}}], 'variables': {}, 'entry_point': 'conversation-1752584446694'}", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-08-03T19:08:05.548659+00:00"}
{"message": "‚úÖ Fetched pathway config for call_id 458", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-08-03T19:08:05.549658+00:00"}
{"message": "Pre-initialized PathwayNodeAgent for node: conversation-1752584446694", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-08-03T19:08:05.550658+00:00"}
{"message": "Pre-initialized PathwayNodeAgent for node: conversation-1752585487904", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-08-03T19:08:05.550658+00:00"}
{"message": "Pre-initialized PathwayNodeAgent for node: conversation-1752585570818", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-08-03T19:08:05.557748+00:00"}
{"message": "Pre-initialized PathwayNodeAgent for node: conversation-1752585662522", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-08-03T19:08:05.558777+00:00"}
{"message": "Pre-initialized PathwayNodeAgent for node: conversation-1752585761728", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-08-03T19:08:05.558777+00:00"}
{"message": "Pre-initialized PathwayNodeAgent for node: conversation-1752585818106", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-08-03T19:08:05.558777+00:00"}
{"message": "Pre-initialized PathwayNodeAgent for node: conversation-1752586729436", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-08-03T19:08:05.560154+00:00"}
{"message": "‚úÖ Creating session with PathwayNodeAgent for node: conversation-1752584446694", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-08-03T19:08:05.561173+00:00"}
{"message": "Creating SIP participant to initiate outbound call...", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-08-03T19:08:05.561173+00:00"}
{"message": "Dialing +33661329235 using SIP trunk ST_6CYLZwTLMCe2", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-08-03T19:08:05.561173+00:00"}
{"message": "SIP call initiated to +33661329235. Waiting for participant to join...", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-08-03T19:08:13.793512+00:00"}
{"message": "üéØ Entering pathway node: conversation-1752584446694", "level": "INFO", "name": "pathway_global_context", "timestamp": "2025-08-03T19:08:13.806908+00:00"}
{"message": "üí¨ Delivering greeting: 'Hi this is Pam from Dunder Mifflin'", "level": "INFO", "name": "pathway_global_context", "timestamp": "2025-08-03T19:08:13.807516+00:00"}
{"message": "ü§ñ Starting conversation for node: conversation-1752584446694", "level": "INFO", "name": "pathway_global_context", "timestamp": "2025-08-03T19:08:15.979349+00:00"}
{"message": "closing agent session due to participant disconnect (disable via `RoomInputOptions.close_on_disconnect=False`)", "level": "INFO", "name": "livekit.agents", "participant": "phone_user", "reason": "CLIENT_INITIATED", "timestamp": "2025-08-03T19:08:16.082042+00:00"}
{"message": "üëã Exiting pathway node: conversation-1752584446694", "level": "INFO", "name": "pathway_global_context", "timestamp": "2025-08-03T19:08:16.086100+00:00"}
{"message": "received job request", "level": "INFO", "name": "livekit.agents", "job_id": "AJ_vTsmRZoztgkm", "dispatch_id": "", "room_name": "agent-call-459", "agent_name": "outbound-caller", "resuming": false, "timestamp": "2025-08-03T19:08:37.299546+00:00"}
{"message": "üìû Outbound Agent entrypoint called", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-08-03T19:08:37.323711+00:00"}
{"message": "Starting entrypoint for supabase_call_id: 459", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-08-03T19:08:37.324712+00:00"}
{"message": "üìã Extracted dial_info: {'agent_id': 11, 'call_direction': 'outbound', 'room_name': 'agent-call-459', 'supabase_call_id': 459, 'telnyx_call_control_id': None, 'default_pathway_id': 'd5fc510b-7635-4715-9066-e522daa2336d', 'user_id': 'b55837c4-270f-4f1f-8023-7ab09ee5f44d', 'auth_token': None, 'phone_number': '+33661329235', 'sip_trunk_id': 'ST_6CYLZwTLMCe2', 'agent_caller_id_number': '+33189311209'}", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-08-03T19:08:37.324712+00:00"}
{"message": "initializing job runner", "level": "INFO", "name": "livekit.agents", "tid": 40628, "timestamp": "2025-08-03T19:08:37.411094+00:00"}
{"message": "job runner initialized", "level": "INFO", "name": "livekit.agents", "tid": 40628, "elapsed_time": 0.0, "timestamp": "2025-08-03T19:08:37.412096+00:00"}
{"message": "‚úÖ Connected to LiveKit room", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-08-03T19:08:37.787033+00:00"}
{"message": "Configuring AI models from job metadata...", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-08-03T19:08:37.787033+00:00"}
{"message": "‚úÖ AI Models configured successfully", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-08-03T19:08:38.049686+00:00"}
{"message": "Checking for default pathway for agent 11 and call 459", "level": "INFO", "name": "agent_pathway_integration", "timestamp": "2025-08-03T19:08:38.049686+00:00"}
{"message": "Created pathway execution record: 979e1531-7b9d-43d1-afae-c68c521b994f", "level": "INFO", "name": "agent_pathway_integration", "timestamp": "2025-08-03T19:08:38.208301+00:00"}
{"message": "Linked call 459 to pathway execution 979e1531-7b9d-43d1-afae-c68c521b994f", "level": "INFO", "name": "agent_pathway_integration", "timestamp": "2025-08-03T19:08:38.241595+00:00"}
{"message": "‚úÖ Started pathway execution 979e1531-7b9d-43d1-afae-c68c521b994f for call 459", "level": "INFO", "name": "agent_pathway_integration", "timestamp": "2025-08-03T19:08:38.241595+00:00"}
{"message": "‚úÖ Auto-started pathway execution: 979e1531-7b9d-43d1-afae-c68c521b994f", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-08-03T19:08:38.241595+00:00"}
{"message": "Placeholder: Fetching pathway config for call_id 459 from backend...", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-08-03T19:08:38.241595+00:00"}
{"message": "üîç Fetching call details for call_id: 459", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-08-03T19:08:38.241595+00:00"}
{"message": "üìû Call 459 found with pathway_execution_id: 979e1531-7b9d-43d1-afae-c68c521b994f", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-08-03T19:08:38.276595+00:00"}
{"message": "üìã Pathway execution found with pathway_id: d5fc510b-7635-4715-9066-e522daa2336d", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-08-03T19:08:38.312719+00:00"}
{"message": "‚úÖ Found pathway 'B2B Sales- Pathway' with config", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-08-03T19:08:38.347310+00:00"}
{"message": "Fetched pathway config for call_id 459: {'edges': [{'id': 'xy-edge__conversation-1752584446694-condition-1752585419519', 'key': 'xy-edge__conversation-1752584446694-condition-1752585419519', 'source': 'conversation-1752584446694', 'target': 'condition-1752585419519'}, {'id': 'xy-edge__condition-1752585419519true-conversation-1752585487904', 'key': 'xy-edge__condition-1752585419519true-conversation-1752585487904', 'source': 'condition-1752585419519', 'target': 'conversation-1752585487904'}, {'id': 'xy-edge__conversation-1752585487904-condition-1752585515969', 'key': 'xy-edge__conversation-1752585487904-condition-1752585515969', 'source': 'conversation-1752585487904', 'target': 'condition-1752585515969'}, {'id': 'xy-edge__conversation-1752585487904-condition-1752585517385', 'key': 'xy-edge__conversation-1752585487904-condition-1752585517385', 'source': 'conversation-1752585487904', 'target': 'condition-1752585517385'}, {'id': 'xy-edge__conversation-1752585487904-condition-1752585513967', 'key': 'xy-edge__conversation-1752585487904-condition-1752585513967', 'source': 'conversation-1752585487904', 'target': 'condition-1752585513967'}, {'id': 'xy-edge__conversation-1752584446694-condition-1752585422872', 'key': 'xy-edge__conversation-1752584446694-condition-1752585422872', 'source': 'conversation-1752584446694', 'target': 'condition-1752585422872'}, {'id': 'xy-edge__conversation-1752584446694-condition-1752585421207', 'key': 'xy-edge__conversation-1752584446694-condition-1752585421207', 'source': 'conversation-1752584446694', 'target': 'condition-1752585421207'}, {'id': 'xy-edge__condition-1752585421207true-conversation-1752585570818', 'key': 'xy-edge__condition-1752585421207true-conversation-1752585570818', 'source': 'condition-1752585421207', 'target': 'conversation-1752585570818'}, {'id': 'xy-edge__conversation-1752585570818-condition-1752585591007', 'key': 'xy-edge__conversation-1752585570818-condition-1752585591007', 'source': 'conversation-1752585570818', 'target': 'condition-1752585591007'}, {'id': 'xy-edge__conversation-1752585570818-condition-1752585592634', 'key': 'xy-edge__conversation-1752585570818-condition-1752585592634', 'source': 'conversation-1752585570818', 'target': 'condition-1752585592634'}, {'id': 'xy-edge__condition-1752585515969true-conversation-1752585662522', 'key': 'xy-edge__condition-1752585515969true-conversation-1752585662522', 'source': 'condition-1752585515969', 'target': 'conversation-1752585662522'}, {'id': 'xy-edge__condition-1752585517385true-conversation-1752585818106', 'key': 'xy-edge__condition-1752585517385true-conversation-1752585818106', 'source': 'condition-1752585517385', 'target': 'conversation-1752585818106'}, {'id': 'xy-edge__condition-1752585513967true-conversation-1752585761728', 'key': 'xy-edge__condition-1752585513967true-conversation-1752585761728', 'source': 'condition-1752585513967', 'target': 'conversation-1752585761728'}, {'id': 'xy-edge__conversation-1752585761728-end_call-1752586102371', 'key': 'xy-edge__conversation-1752585761728-end_call-1752586102371', 'source': 'conversation-1752585761728', 'target': 'end_call-1752586102371'}, {'id': 'xy-edge__conversation-1752585662522-condition-1752585685583', 'key': 'xy-edge__conversation-1752585662522-condition-1752585685583', 'source': 'conversation-1752585662522', 'target': 'condition-1752585685583'}, {'id': 'xy-edge__conversation-1752585662522-condition-1752585687002', 'key': 'xy-edge__conversation-1752585662522-condition-1752585687002', 'source': 'conversation-1752585662522', 'target': 'condition-1752585687002'}, {'id': 'xy-edge__conversation-1752585662522-condition-1752585684024', 'key': 'xy-edge__conversation-1752585662522-condition-1752585684024', 'source': 'conversation-1752585662522', 'target': 'condition-1752585684024'}, {'id': 'xy-edge__condition-1752585685583true-app_action-1752586209057', 'key': 'xy-edge__condition-1752585685583true-app_action-1752586209057', 'source': 'condition-1752585685583', 'target': 'app_action-1752586209057'}, {'id': 'xy-edge__condition-1752585687002true-conversation-1752585818106', 'key': 'xy-edge__condition-1752585687002true-conversation-1752585818106', 'source': 'condition-1752585687002', 'target': 'conversation-1752585818106'}, {'id': 'xy-edge__condition-1752585684024true-conversation-1752585761728', 'key': 'xy-edge__condition-1752585684024true-conversation-1752585761728', 'source': 'condition-1752585684024', 'target': 'conversation-1752585761728'}, {'id': 'xy-edge__condition-1752586789213false-conversation-1752585818106', 'key': 'xy-edge__condition-1752586789213false-conversation-1752585818106', 'source': 'condition-1752586789213', 'target': 'conversation-1752585818106'}, {'id': 'xy-edge__app_action-1752586209057-condition-1752586789213', 'key': 'xy-edge__app_action-1752586209057-condition-1752586789213', 'source': 'app_action-1752586209057', 'target': 'condition-1752586789213'}, {'id': 'xy-edge__condition-1752585848810true-tools-1752586942596', 'key': 'xy-edge__condition-1752585848810true-tools-1752586942596', 'source': 'condition-1752585848810', 'target': 'tools-1752586942596'}, {'id': 'xy-edge__conversation-1752585818106-condition-1752585848810', 'key': 'xy-edge__conversation-1752585818106-condition-1752585848810', 'source': 'conversation-1752585818106', 'target': 'condition-1752585848810'}, {'id': 'xy-edge__conversation-1752585818106-condition-1752585852282', 'key': 'xy-edge__conversation-1752585818106-condition-1752585852282', 'source': 'conversation-1752585818106', 'target': 'condition-1752585852282'}, {'id': 'xy-edge__condition-1752585852282true-end_call-1752587058511', 'key': 'xy-edge__condition-1752585852282true-end_call-1752587058511', 'source': 'condition-1752585852282', 'target': 'end_call-1752587058511'}, {'id': 'xy-edge__condition-1752585591007true-end_call-1752586097416', 'key': 'xy-edge__condition-1752585591007true-end_call-1752586097416', 'source': 'condition-1752585591007', 'target': 'end_call-1752586097416'}, {'id': 'xy-edge__condition-1752585592634true-tools-1752587100122', 'key': 'xy-edge__condition-1752585592634true-tools-1752587100122', 'source': 'condition-1752585592634', 'target': 'tools-1752587100122'}, {'id': 'xy-edge__tools-1752587100122-end_call-1752586097416', 'key': 'xy-edge__tools-1752587100122-end_call-1752586097416', 'source': 'tools-1752587100122', 'target': 'end_call-1752586097416'}, {'id': 'xy-edge__condition-1752587369230true-conversation-1752586729436', 'key': 'xy-edge__condition-1752587369230true-conversation-1752586729436', 'source': 'condition-1752587369230', 'target': 'conversation-1752586729436'}, {'id': 'xy-edge__app_action-1752586209057-condition-1752587369230', 'key': 'xy-edge__app_action-1752586209057-condition-1752587369230', 'source': 'app_action-1752586209057', 'target': 'condition-1752587369230'}, {'id': 'xy-edge__conversation-1752586729436-condition-1752586879584', 'key': 'xy-edge__conversation-1752586729436-condition-1752586879584', 'source': 'conversation-1752586729436', 'target': 'condition-1752586879584'}, {'id': 'xy-edge__condition-1752586879584true-end_call-1752586890630', 'key': 'xy-edge__condition-1752586879584true-end_call-1752586890630', 'source': 'condition-1752586879584', 'target': 'end_call-1752586890630'}, {'id': 'xy-edge__tools-1752586942596-condition-1752586959602', 'key': 'xy-edge__tools-1752586942596-condition-1752586959602', 'source': 'tools-1752586942596', 'target': 'condition-1752586959602'}, {'id': 'xy-edge__condition-1752586959602true-end_call-1752586990804', 'key': 'xy-edge__condition-1752586959602true-end_call-1752586990804', 'source': 'condition-1752586959602', 'target': 'end_call-1752586990804'}, {'id': 'xy-edge__condition-1752585422872true-end_call-1753698161049', 'key': 'xy-edge__condition-1752585422872true-end_call-1753698161049', 'source': 'condition-1752585422872', 'target': 'end_call-1753698161049'}], 'nodes': [{'id': 'conversation-1752584446694', 'name': 'Greeting', 'type': 'conversation', 'config': {'id': 'greeting', 'prompt': 'You are Pam from Dunder Mifflin. You are making an outbound sales call to someone who previously inquired about your services. Your goal is to determine if this is a good time to talk. Be friendly and professional. Start by introducing yourself and your company, mention that you are following up on their inquiry, then ask if they have a few minutes to talk. Listen carefully to their response to gauge their availability and interest level. Extract any information about their current situation or needs they mention.', 'greeting': 'Hi this is Pam from Dunder Mifflin', 'language': 'en', 'temperature': 0.7, 'global_access': False, 'silence_timeout': 10, 'extracted_variables': [{'name': 'conversation_started', 'type': 'boolean', 'description': 'Conversation has started', 'extraction_prompt': 'Conversation has started'}, {'name': 'call_start_time', 'type': 'string', 'description': 'Timestamp when call started', 'extraction_prompt': 'Timestamp when call started'}], 'interruption_enabled': True, 'transition_condition': '', 'transcription_enabled': True, 'transition_condition_enabled': False}, 'position': {'x': 159.19974474711404, 'y': -406.435592953321}}, {'id': 'condition-1752585419519', 'name': 'Greeting Condition 1', 'type': 'condition', 'config': {'id': 'greeting_condition_1', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Person is available to talk now and shows interest in the conversation', 'next_node': 'qualify_lead', 'confidence_threshold': 0.7}, 'source_node': 'greeting'}, 'position': {'x': 112.72206178621366, 'y': 127.8578385636643}}, {'id': 'condition-1752585421207', 'name': 'Schedule Callback Condition', 'type': 'condition', 'config': {'id': 'greeting_condition_2', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Person is busy or wants to be called back later', 'next_node': 'schedule_callback', 'confidence_threshold': 0.7}, 'source_node': 'greeting', 'routing_style': 'livekit', 'routing_targets': [{'name': 'Schedule Callback', 'node_id': 'conversation-1752585570818', 'description': 'Route to Schedule Callback', 'confidence_threshold': 0.7}]}, 'position': {'x': -313.0080598768747, 'y': -162.41507420188168}}, {'id': 'condition-1752585422872', 'name': 'Greeting Condition 3', 'type': 'condition', 'config': {'id': 'greeting_condition_3', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Person seems uninterested, hostile, or wants to end the call', 'next_node': 'polite_decline', 'confidence_threshold': 0.8}, 'source_node': 'greeting'}, 'position': {'x': -541.3518080512141, 'y': 374.79123495864394}}, {'id': 'conversation-1752585487904', 'name': 'Qualify Lead', 'type': 'conversation', 'config': {'id': 'qualify_lead', 'prompt': \"The person is willing to talk. Now you need to qualify them as a potential customer. Ask about their current situation, what specific services they're looking for, their timeline, and any challenges they're facing. Be conversational but focused on gathering key qualifying information: budget range, decision-making authority, urgency of need, and fit for your services. Listen for buying signals and pain points. Ask open-ended questions to understand their needs deeply.\", 'language': 'en', 'temperature': 0.7, 'global_access': False, 'system_prompt': '', 'silence_timeout': 10, 'extracted_variables': [{'name': 'qualification_started', 'type': 'boolean', 'description': 'Lead qualification process started', 'extraction_prompt': 'Lead qualification process started'}], 'interruption_enabled': True, 'transition_condition': '', 'transcription_enabled': True, 'transition_condition_enabled': False}, 'position': {'x': 163.4402281365625, 'y': 311.3499021877407}}, {'id': 'condition-1752585513967', 'name': 'Qualify Lead Condition 3', 'type': 'condition', 'config': {'id': 'qualify_lead_condition_3', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Person seems like a poor fit with no budget, no authority, no genuine need, or timing issues', 'next_node': 'polite_decline', 'confidence_threshold': 0.8}, 'source_node': 'qualify_lead'}, 'position': {'x': 573.7084072411365, 'y': 459.684096539979}}, {'id': 'condition-1752585515969', 'name': 'Qualify Lead Condition 1', 'type': 'condition', 'config': {'id': 'qualify_lead_condition_1', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Person is a qualified lead with genuine interest and potential budget for our services', 'next_node': 'book_appointment', 'confidence_threshold': 0.7}, 'source_node': 'qualify_lead'}, 'position': {'x': -191.31874774110742, 'y': 458.6868230734692}}, {'id': 'condition-1752585517385', 'name': 'Qualify Lead Condition 2', 'type': 'condition', 'config': {'id': 'qualify_lead_condition_2', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Person expressed interest but wants more information before scheduling anything', 'next_node': 'send_information', 'confidence_threshold': 0.7}, 'source_node': 'qualify_lead'}, 'position': {'x': 202.90168708178726, 'y': 488.9489925914291}}, {'id': 'conversation-1752585570818', 'name': 'Schedule Callback', 'type': 'conversation', 'config': {'id': 'schedule_callback', 'prompt': \"The person indicated they're busy or want to be called back later. Be understanding and accommodating. Ask for their preferred time for a callback - offer specific options like 'tomorrow afternoon' or 'later this week'. Try to get a specific day and time range. Also ask if there's any particular information they'd like you to have ready for the callback. Be flexible and work around their schedule.\", 'language': 'en', 'temperature': 0.7, 'global_access': False, 'system_prompt': '', 'silence_timeout': 10, 'extracted_variables': [{'name': 'callback_requested', 'type': 'boolean', 'description': 'Customer requested a callback', 'extraction_prompt': 'Customer requested a callback'}], 'interruption_enabled': True, 'transition_condition': '', 'transcription_enabled': True, 'transition_condition_enabled': False}, 'position': {'x': -824.9743648175192, 'y': 117.32593048536444}}, {'id': 'condition-1752585591007', 'name': 'Schedule Callback Condition 2', 'type': 'condition', 'config': {'id': 'schedule_callback_condition_2', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Person is politely trying to end the call without genuine interest in a callback', 'next_node': 'end_callback', 'confidence_threshold': 0.8}, 'source_node': 'schedule_callback'}, 'position': {'x': -952.3200684413032, 'y': 282.70220411280184}}, {'id': 'condition-1752585592634', 'name': 'Schedule Callback Condition 1', 'type': 'condition', 'config': {'id': 'schedule_callback_condition_1', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Person provided a specific time or preference for the callback', 'next_node': 'schedule_callback_tool', 'confidence_threshold': 0.7}, 'source_node': 'schedule_callback'}, 'position': {'x': -1310.484446829189, 'y': 285.194202724594}}, {'id': 'conversation-1752585662522', 'name': 'Book Appointment', 'type': 'conversation', 'config': {'id': 'book_appointment', 'prompt': \"This is a qualified lead who has shown interest. Your goal is to schedule a consultation or appointment. Mention the value they'll get from the meeting and how it will help solve their specific needs you've identified. Offer specific time slots and be flexible with scheduling. Try to get their availability, preferred meeting type (phone, video, in-person), and contact details for scheduling. If they hesitate, address their concerns and offer to send more information first.\", 'language': 'en', 'temperature': 0.7, 'global_access': False, 'system_prompt': '', 'silence_timeout': 10, 'extracted_variables': [{'name': 'booking_started', 'type': 'boolean', 'description': 'Appointment booking process started', 'extraction_prompt': 'Appointment booking process started'}, {'name': 'qualified_lead', 'type': 'boolean', 'description': 'Lead is qualified for appointment', 'extraction_prompt': 'Lead is qualified for appointment'}], 'interruption_enabled': True, 'transition_condition': '', 'transcription_enabled': True, 'transition_condition_enabled': False}, 'position': {'x': -157.01338060119002, 'y': 676.3166837636757}}, {'id': 'condition-1752585684024', 'name': 'Book Appointment Condition 3', 'type': 'condition', 'config': {'id': 'book_appointment_condition_3', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Person declined to schedule or seems hesitant about moving forward', 'next_node': 'polite_decline', 'confidence_threshold': 0.8}, 'source_node': 'book_appointment'}, 'position': {'x': -273.7854306622481, 'y': 1041.96815487565}}, {'id': 'condition-1752585685583', 'name': 'Book Appointment Condition 1', 'type': 'condition', 'config': {'id': 'book_appointment_condition_1', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Person agreed to schedule an appointment and provided their availability or preferred time', 'next_node': 'create_calendar_event', 'confidence_threshold': 0.7}, 'source_node': 'book_appointment'}, 'position': {'x': -943.9017843724146, 'y': 1044.3504442101917}}, {'id': 'condition-1752585687002', 'name': 'Book Appointment Condition 2', 'type': 'condition', 'config': {'id': 'book_appointment_condition_2', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Person wants to schedule but asked for information to be sent first', 'next_node': 'send_information', 'confidence_threshold': 0.7}, 'source_node': 'book_appointment'}, 'position': {'x': -606.1989666079745, 'y': 1056.062258946693}}, {'id': 'conversation-1752585761728', 'name': 'Polite Decline', 'type': 'conversation', 'config': {'id': 'polite_decline', 'prompt': \"This person doesn't seem like a good fit right now. Be polite and professional. Thank them for their time, acknowledge that the timing might not be right, and offer to send them information for future reference. Ask if they'd like to receive updates or if there's a better time to reach out in the future. End on a positive note and leave the door open for future contact.\", 'language': 'en', 'temperature': 0.7, 'global_access': False, 'system_prompt': '', 'silence_timeout': 10, 'extracted_variables': [{'name': 'lead_declined', 'type': 'boolean', 'description': 'Lead was politely declined', 'extraction_prompt': 'Lead was politely declined'}], 'interruption_enabled': True, 'transition_condition': '', 'transcription_enabled': True, 'transition_condition_enabled': False}, 'position': {'x': 716.720968381256, 'y': 1115.8291479001427}}, {'id': 'conversation-1752585818106', 'name': 'Send Information', 'type': 'conversation', 'config': {'id': 'send_information', 'prompt': \"The person wants more information before scheduling. Ask for their email address to send details about your services, pricing, case studies, or whatever information would be most relevant to their specific needs. Be specific about what you'll send and when they can expect it. Also ask if they have any specific questions you can address in the information packet. Make them feel comfortable that this isn't high-pressure follow-up.\", 'language': 'en', 'temperature': 0.7, 'global_access': False, 'system_prompt': '', 'silence_timeout': 10, 'extracted_variables': [{'name': 'info_requested', 'type': 'boolean', 'description': 'Customer requested information packet', 'extraction_prompt': 'Customer requested information packet'}], 'interruption_enabled': True, 'transition_condition': '', 'transcription_enabled': True, 'transition_condition_enabled': False}, 'position': {'x': 378.9665058084346, 'y': 1507.51975168371}}, {'id': 'condition-1752585848810', 'name': 'Send Information Condition 1', 'type': 'condition', 'config': {'id': 'send_information_condition_1', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Person provided their email address for sending information', 'next_node': 'capture_email', 'confidence_threshold': 0.7}, 'source_node': 'send_information'}, 'position': {'x': 165.51654504146074, 'y': 1635.6430622199036}}, {'id': 'condition-1752585852282', 'name': 'Send Information Condition 2', 'type': 'condition', 'config': {'id': 'send_information_condition_2', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Person declined to provide their email or seems uninterested in receiving information', 'next_node': 'end_declined', 'confidence_threshold': 0.8}, 'source_node': 'send_information'}, 'position': {'x': 500.68393482997806, 'y': 1628.8051584512218}}, {'id': 'end_call-1752586097416', 'name': 'End Callback', 'type': 'end_call', 'config': {'id': 'end_callback', 'custom_data': {}, 'save_recording': False, 'email_recipient': '', 'goodbye_message': \"Perfect! I'll call you back at {callback_time}. Have a great day!\", 'save_transcript': True, 'call_disposition': 'completed', 'send_summary_email': False, 'extracted_variables': [{'name': 'call_outcome', 'type': 'string', 'description': 'Final call outcome', 'extraction_prompt': 'Final call outcome'}, {'name': 'callback_scheduled_for', 'type': 'string', 'description': 'Scheduled callback time', 'extraction_prompt': 'Scheduled callback time'}]}, 'position': {'x': -1059.0542799629145, 'y': 741.924119385108}}, {'id': 'end_call-1752586102371', 'name': 'End Declined', 'type': 'end_call', 'config': {'id': 'end_declined', 'custom_data': {}, 'save_recording': False, 'email_recipient': '', 'goodbye_message': 'Thank you for your time. Have a great day!', 'save_transcript': True, 'call_disposition': 'completed', 'send_summary_email': False, 'extracted_variables': [{'name': 'call_outcome', 'type': 'string', 'description': 'Final call outcome', 'extraction_prompt': 'Final call outcome'}, {'name': 'decline_reason', 'type': 'string', 'description': 'Reason for declining', 'extraction_prompt': 'Reason for declining'}]}, 'position': {'x': 667.7410507582531, 'y': 1363.7408872996832}}, {'id': 'app_action-1752586209057', 'name': 'Create Calendar Event', 'type': 'app_action', 'config': {'id': 'create_calendar_event', 'data': {'app_name': 'google_calendar', 'action_type': 'create_event', 'action_config': {'calendar_id': 'primary', 'duration_minutes': 60}, 'field_mappings': {'summary': 'Consultation with {contact_name}', 'attendees': ['{contact_email}'], 'start_time': '{selected_appointment_time}', 'description': 'Sales consultation scheduled via PAM'}}, 'app_name': '', 'action_type': '', 'action_config': {}, 'field_mappings': {}, 'user_connection_id': '', 'extracted_variables': [{'name': 'appointment_booked', 'type': 'boolean', 'description': 'Appointment successfully booked', 'extraction_prompt': 'Appointment successfully booked'}]}, 'position': {'x': -931.7621809606596, 'y': 1347.8657791544829}}, {'id': 'conversation-1752586729436', 'name': 'Confirm Appointment', 'type': 'conversation', 'config': {'id': 'confirm_appointment', 'prompt': \"The calendar event has been successfully created. Confirm the appointment details with enthusiasm. Mention the date, time, and format of the meeting. Let them know they'll receive a calendar invite shortly. Ask if they have any specific topics they'd like to discuss or questions they want addressed during the consultation. Set clear expectations for what the meeting will cover and how long it will take.\", 'language': 'en', 'temperature': 0.7, 'global_access': False, 'system_prompt': '', 'silence_timeout': 10, 'extracted_variables': [{'name': 'appointment_confirmed', 'type': 'boolean', 'description': 'Appointment details confirmed with customer', 'extraction_prompt': 'Appointment details confirmed with customer'}], 'interruption_enabled': True, 'transition_condition': '', 'transcription_enabled': True, 'transition_condition_enabled': False}, 'position': {'x': -981.7639769305733, 'y': 1813.2009923352334}}, {'id': 'condition-1752586789213', 'name': 'Create Calendar Event Condition 2', 'type': 'condition', 'config': {'id': 'create_calendar_event_condition_2', 'prompt': 'Calendar event creation failed or encountered an error', 'source_node': 'create_calendar_event'}, 'position': {'x': -764.0953358329234, 'y': 1530.225098242719}}, {'id': 'condition-1752586879584', 'name': 'Confirm Appointment Condition 1', 'type': 'condition', 'config': {'id': 'confirm_appointment_condition_1', 'prompt': 'Appointment has been confirmed and conversation wrapped up successfully', 'source_node': 'confirm_appointment'}, 'position': {'x': -1011.2849335976309, 'y': 1938.9218754961776}}, {'id': 'end_call-1752586890630', 'name': 'End Success', 'type': 'end_call', 'config': {'id': 'end_success', 'custom_data': {}, 'save_recording': False, 'email_recipient': '', 'goodbye_message': 'Thank you! Looking forward to speaking with you on {appointment_date}. Have a great day!', 'save_transcript': True, 'call_disposition': 'completed', 'send_summary_email': False, 'extracted_variables': [{'name': 'call_outcome', 'type': 'string', 'description': 'Final call outcome', 'extraction_prompt': 'Final call outcome'}, {'name': 'success', 'type': 'boolean', 'description': 'Call was successful', 'extraction_prompt': 'Call was successful'}, {'name': 'appointment_date', 'type': 'string', 'description': 'Scheduled appointment date', 'extraction_prompt': 'Scheduled appointment date'}, {'name': 'appointment_time', 'type': 'string', 'description': 'Scheduled appointment time', 'extraction_prompt': 'Scheduled appointment time'}]}, 'position': {'x': -1000.4160641634687, 'y': 2109.1766822906798}}, {'id': 'tools-1752586942596', 'name': 'Capture Email', 'type': 'tools', 'config': {'id': 'capture_email', 'app_name': 'google_calendar', 'parameters': {'email': '{contact_email}', 'notes': '{conversation_summary}', 'source': 'phone_call', 'status': 'info_requested', 'contact_name': '{contact_name}', 'phone_number': '{phone_number}', 'interest_level': '{interest_level}', 'qualification_score': '{qualification_score}'}, 'webhook_url': 'https://hook.us1.make.com/abc123def456', 'selected_app_id': 'ebce972a-6206-4708-8557-90bfd816ad14', 'selected_app_name': 'Google Calendar', 'variable_mappings': {}, 'selected_action_id': '', 'extracted_variables': [{'name': 'email_captured', 'type': 'boolean', 'description': 'Customer email address captured', 'extraction_prompt': 'Customer email address captured'}], 'selected_action_name': '', 'selected_action_description': ''}, 'position': {'x': 212.10097682093254, 'y': 1877.1337109778142}}, {'id': 'condition-1752586959602', 'name': 'Condition Node', 'type': 'condition', 'config': {'prompt': 'email captured'}, 'position': {'x': 207.1067512553629, 'y': 2061.4359900186564}}, {'id': 'end_call-1752586990804', 'name': 'End Info Sent', 'type': 'end_call', 'config': {'id': 'end_info_sent', 'custom_data': {}, 'save_recording': False, 'email_recipient': '', 'goodbye_message': \"Great! I'll send that information right over. Feel free to call us with any questions. Have a wonderful day!\", 'save_transcript': True, 'call_disposition': 'completed', 'send_summary_email': False, 'extracted_variables': [{'name': 'call_outcome', 'type': 'string', 'description': 'Final call outcome', 'extraction_prompt': 'Final call outcome'}, {'name': 'follow_up_required', 'type': 'boolean', 'description': 'Follow-up is required', 'extraction_prompt': 'Follow-up is required'}]}, 'position': {'x': 201.81395080636105, 'y': 2189.0828212015595}}, {'id': 'end_call-1752587058511', 'name': 'End Declined', 'type': 'end_call', 'config': {'id': 'end_declined', 'custom_data': {}, 'save_recording': False, 'email_recipient': '', 'goodbye_message': 'Thank you for your time. Have a great day!', 'save_transcript': True, 'call_disposition': 'completed', 'send_summary_email': False, 'extracted_variables': [{'name': 'call_outcome', 'type': 'string', 'description': 'Final call outcome', 'extraction_prompt': 'Final call outcome'}, {'name': 'decline_reason', 'type': 'string', 'description': 'Reason for declining', 'extraction_prompt': 'Reason for declining'}]}, 'position': {'x': 860.3817328453051, 'y': 1807.0939093564982}}, {'id': 'tools-1752587100122', 'name': 'Schedule Callback Tool', 'type': 'tools', 'config': {'id': 'schedule_callback_tool', 'parameters': {'priority': 'medium', 'agent_notes': '{conversation_summary}', 'contact_name': '{contact_name}', 'phone_number': '{phone_number}', 'callback_time': '{preferred_callback_time}', 'callback_reason': 'customer_requested'}, 'webhook_url': 'https://hook.us1.make.com/callback789xyz', 'selected_app_id': '', 'selected_app_name': '', 'variable_mappings': {}, 'selected_action_id': '', 'extracted_variables': [{'name': 'callback_scheduled', 'type': 'boolean', 'description': 'Callback was successfully scheduled', 'extraction_prompt': 'Callback was successfully scheduled'}], 'selected_action_name': '', 'selected_action_description': ''}, 'position': {'x': -1299.6936738792808, 'y': 453.175693126387}}, {'id': 'condition-1752587369230', 'name': 'Create Calendar Event Condition 1', 'type': 'condition', 'config': {'id': 'create_calendar_event_condition_1', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Calendar event was successfully created', 'next_node': 'confirm_appointment', 'confidence_threshold': 0.9}, 'source_node': 'create_calendar_event'}, 'position': {'x': -1149.0097523440525, 'y': 1584.6468586902927}}, {'id': 'end_call-1753698161049', 'name': 'End_call  Greeting', 'type': 'end_call', 'config': {'custom_data': {}, 'save_recording': False, 'email_recipient': '', 'goodbye_message': 'Thank you for your time. Have a great day!', 'save_transcript': True, 'call_disposition': 'completed', 'send_summary_email': False}, 'position': {'x': -517.2888315376458, 'y': 701.791880267355}}], 'variables': {}, 'entry_point': 'conversation-1752584446694'}", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-08-03T19:08:38.348318+00:00"}
{"message": "‚úÖ Fetched pathway config for call_id 459", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-08-03T19:08:38.348318+00:00"}
{"message": "Pre-initialized PathwayNodeAgent for node: conversation-1752584446694", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-08-03T19:08:38.348318+00:00"}
{"message": "Pre-initialized PathwayNodeAgent for node: conversation-1752585487904", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-08-03T19:08:38.348318+00:00"}
{"message": "Pre-initialized PathwayNodeAgent for node: conversation-1752585570818", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-08-03T19:08:38.349313+00:00"}
{"message": "Pre-initialized PathwayNodeAgent for node: conversation-1752585662522", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-08-03T19:08:38.349313+00:00"}
{"message": "Pre-initialized PathwayNodeAgent for node: conversation-1752585761728", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-08-03T19:08:38.349313+00:00"}
{"message": "Pre-initialized PathwayNodeAgent for node: conversation-1752585818106", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-08-03T19:08:38.350312+00:00"}
{"message": "Pre-initialized PathwayNodeAgent for node: conversation-1752586729436", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-08-03T19:08:38.350654+00:00"}
{"message": "‚úÖ Creating session with PathwayNodeAgent for node: conversation-1752584446694", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-08-03T19:08:38.350654+00:00"}
{"message": "Creating SIP participant to initiate outbound call...", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-08-03T19:08:38.350654+00:00"}
{"message": "Dialing +33661329235 using SIP trunk ST_6CYLZwTLMCe2", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-08-03T19:08:38.350654+00:00"}
{"message": "SIP call initiated to +33661329235. Waiting for participant to join...", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-08-03T19:08:43.810143+00:00"}
{"message": "üéØ Entering pathway node: conversation-1752584446694", "level": "INFO", "name": "pathway_global_context", "timestamp": "2025-08-03T19:08:43.820835+00:00"}
{"message": "üí¨ Delivering greeting: 'Hi this is Pam from Dunder Mifflin'", "level": "INFO", "name": "pathway_global_context", "timestamp": "2025-08-03T19:08:43.820835+00:00"}
{"message": "closing agent session due to participant disconnect (disable via `RoomInputOptions.close_on_disconnect=False`)", "level": "INFO", "name": "livekit.agents", "participant": "phone_user", "reason": "CLIENT_INITIATED", "timestamp": "2025-08-03T19:08:44.143469+00:00"}
{"message": "ü§ñ Starting conversation for node: conversation-1752584446694", "level": "INFO", "name": "pathway_global_context", "timestamp": "2025-08-03T19:08:44.149491+00:00"}
{"message": "üëã Exiting pathway node: conversation-1752584446694", "level": "INFO", "name": "pathway_global_context", "timestamp": "2025-08-03T19:08:44.150022+00:00"}
{"message": "livekit::rtc_engine:453:livekit::rtc_engine - received session close: \"signal client closed: \\\"stream closed\\\"\" UnknownReason Resume", "level": "WARNING", "name": "livekit", "timestamp": "2025-08-03T19:09:09.339948+00:00"}
{"message": "draining worker", "level": "INFO", "name": "livekit.agents", "id": "AW_VpzvD2YE8N8L", "timeout": 1800, "timestamp": "2025-08-03T19:09:22.686639+00:00"}
{"message": "job shutdown is taking too much time..", "level": "ERROR", "name": "livekit.agents", "tid": 55700, "job_id": "AJ_vTsmRZoztgkm", "timestamp": "2025-08-03T19:10:09.339797+00:00"}
{"message": "Exception in callback Future.set_result(None)\nhandle: <Handle Future.set_result(None)>", "level": "ERROR", "name": "asyncio", "exc_info": "Traceback (most recent call last):\n  File \"C:\\Program Files\\Python312\\Lib\\asyncio\\tasks.py\", line 520, in wait_for\n    return await fut\n           ^^^^^^^^^\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\livekit\\agents\\worker.py\", line 508, in _join_jobs\n    await proc.join()\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\livekit\\agents\\ipc\\job_thread_executor.py\", line 154, in join\n    async with self._lock:\n  File \"C:\\Program Files\\Python312\\Lib\\asyncio\\locks.py\", line 14, in __aenter__\n    await self.acquire()\n  File \"C:\\Program Files\\Python312\\Lib\\asyncio\\locks.py\", line 113, in acquire\n    await fut\nasyncio.exceptions.CancelledError\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\livekit\\agents\\cli\\_run.py\", line 108, in run_worker\n    loop.run_until_complete(worker.drain(timeout=args.opts.drain_timeout))\n  File \"C:\\Program Files\\Python312\\Lib\\asyncio\\base_events.py\", line 687, in run_until_complete\n    return future.result()\n           ^^^^^^^^^^^^^^^\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\livekit\\agents\\worker.py\", line 511, in drain\n    await asyncio.wait_for(_join_jobs(), timeout)  # raises asyncio.TimeoutError on timeout\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\Python312\\Lib\\asyncio\\tasks.py\", line 519, in wait_for\n    async with timeouts.timeout(timeout):\n  File \"C:\\Program Files\\Python312\\Lib\\asyncio\\timeouts.py\", line 115, in __aexit__\n    raise TimeoutError from exc_val\nTimeoutError\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Program Files\\Python312\\Lib\\asyncio\\events.py\", line 88, in _run\n    self._context.run(self._callback, *self._args)\nasyncio.exceptions.InvalidStateError: invalid state", "timestamp": "2025-08-03T19:39:22.715114+00:00"}
{"message": "Exception in callback Future.set_result(None)\nhandle: <Handle Future.set_result(None)>", "level": "ERROR", "name": "asyncio", "exc_info": "Traceback (most recent call last):\n  File \"C:\\Program Files\\Python312\\Lib\\asyncio\\tasks.py\", line 520, in wait_for\n    return await fut\n           ^^^^^^^^^\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\livekit\\agents\\worker.py\", line 508, in _join_jobs\n    await proc.join()\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\livekit\\agents\\ipc\\job_thread_executor.py\", line 154, in join\n    async with self._lock:\n  File \"C:\\Program Files\\Python312\\Lib\\asyncio\\locks.py\", line 14, in __aenter__\n    await self.acquire()\n  File \"C:\\Program Files\\Python312\\Lib\\asyncio\\locks.py\", line 113, in acquire\n    await fut\nasyncio.exceptions.CancelledError\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\livekit\\agents\\cli\\_run.py\", line 108, in run_worker\n    loop.run_until_complete(worker.drain(timeout=args.opts.drain_timeout))\n  File \"C:\\Program Files\\Python312\\Lib\\asyncio\\base_events.py\", line 687, in run_until_complete\n    return future.result()\n           ^^^^^^^^^^^^^^^\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\livekit\\agents\\worker.py\", line 511, in drain\n    await asyncio.wait_for(_join_jobs(), timeout)  # raises asyncio.TimeoutError on timeout\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\Python312\\Lib\\asyncio\\tasks.py\", line 519, in wait_for\n    async with timeouts.timeout(timeout):\n  File \"C:\\Program Files\\Python312\\Lib\\asyncio\\timeouts.py\", line 115, in __aexit__\n    raise TimeoutError from exc_val\nTimeoutError\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Program Files\\Python312\\Lib\\asyncio\\events.py\", line 88, in _run\n    self._context.run(self._callback, *self._args)\nasyncio.exceptions.InvalidStateError: invalid state", "timestamp": "2025-08-03T19:39:22.734231+00:00"}
{"message": "Exception in callback Future.set_result(None)\nhandle: <Handle Future.set_result(None)>", "level": "ERROR", "name": "asyncio", "exc_info": "Traceback (most recent call last):\n  File \"C:\\Program Files\\Python312\\Lib\\asyncio\\tasks.py\", line 520, in wait_for\n    return await fut\n           ^^^^^^^^^\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\livekit\\agents\\worker.py\", line 508, in _join_jobs\n    await proc.join()\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\livekit\\agents\\ipc\\job_thread_executor.py\", line 154, in join\n    async with self._lock:\n  File \"C:\\Program Files\\Python312\\Lib\\asyncio\\locks.py\", line 14, in __aenter__\n    await self.acquire()\n  File \"C:\\Program Files\\Python312\\Lib\\asyncio\\locks.py\", line 113, in acquire\n    await fut\nasyncio.exceptions.CancelledError\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\livekit\\agents\\cli\\_run.py\", line 108, in run_worker\n    loop.run_until_complete(worker.drain(timeout=args.opts.drain_timeout))\n  File \"C:\\Program Files\\Python312\\Lib\\asyncio\\base_events.py\", line 687, in run_until_complete\n    return future.result()\n           ^^^^^^^^^^^^^^^\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\livekit\\agents\\worker.py\", line 511, in drain\n    await asyncio.wait_for(_join_jobs(), timeout)  # raises asyncio.TimeoutError on timeout\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\Python312\\Lib\\asyncio\\tasks.py\", line 519, in wait_for\n    async with timeouts.timeout(timeout):\n  File \"C:\\Program Files\\Python312\\Lib\\asyncio\\timeouts.py\", line 115, in __aexit__\n    raise TimeoutError from exc_val\nTimeoutError\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Program Files\\Python312\\Lib\\asyncio\\events.py\", line 88, in _run\n    self._context.run(self._callback, *self._args)\nasyncio.exceptions.InvalidStateError: invalid state", "timestamp": "2025-08-03T19:39:22.739221+00:00"}
{"message": "Failed to run the agent worker: ", "level": "CRITICAL", "name": "root", "exc_info": "Traceback (most recent call last):\n  File \"C:\\Program Files\\Python312\\Lib\\asyncio\\tasks.py\", line 520, in wait_for\n    return await fut\n           ^^^^^^^^^\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\livekit\\agents\\worker.py\", line 508, in _join_jobs\n    await proc.join()\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\livekit\\agents\\ipc\\job_thread_executor.py\", line 154, in join\n    async with self._lock:\n  File \"C:\\Program Files\\Python312\\Lib\\asyncio\\locks.py\", line 14, in __aenter__\n    await self.acquire()\n  File \"C:\\Program Files\\Python312\\Lib\\asyncio\\locks.py\", line 113, in acquire\n    await fut\nasyncio.exceptions.CancelledError\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\outbound_agent.py\", line 1014, in <module>\n    cli.run_app(opts)\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\livekit\\agents\\cli\\cli.py\", line 248, in run_app\n    cli()\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\click\\core.py\", line 1442, in __call__\n    return self.main(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\click\\core.py\", line 1363, in main\n    rv = self.invoke(ctx)\n         ^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\click\\core.py\", line 1830, in invoke\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\click\\core.py\", line 1226, in invoke\n    return ctx.invoke(self.callback, **ctx.params)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\click\\core.py\", line 794, in invoke\n    return callback(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\livekit\\agents\\cli\\cli.py\", line 73, in start\n    _run.run_worker(args)\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\livekit\\agents\\cli\\_run.py\", line 108, in run_worker\n    loop.run_until_complete(worker.drain(timeout=args.opts.drain_timeout))\n  File \"C:\\Program Files\\Python312\\Lib\\asyncio\\base_events.py\", line 687, in run_until_complete\n    return future.result()\n           ^^^^^^^^^^^^^^^\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\livekit\\agents\\worker.py\", line 511, in drain\n    await asyncio.wait_for(_join_jobs(), timeout)  # raises asyncio.TimeoutError on timeout\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\Python312\\Lib\\asyncio\\tasks.py\", line 519, in wait_for\n    async with timeouts.timeout(timeout):\n  File \"C:\\Program Files\\Python312\\Lib\\asyncio\\timeouts.py\", line 115, in __aexit__\n    raise TimeoutError from exc_val\nTimeoutError", "timestamp": "2025-08-03T19:39:22.745505+00:00"}
{"message": "Error in recv_task", "level": "ERROR", "name": "livekit.plugins.deepgram", "exc_info": "Traceback (most recent call last):\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\livekit\\agents\\utils\\log.py\", line 16, in async_fn_logs\n    return await fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\livekit\\plugins\\deepgram\\stt.py\", line 473, in recv_task\n    raise APIStatusError(message=\"deepgram connection closed unexpectedly\")\nlivekit.agents._exceptions.APIStatusError: deepgram connection closed unexpectedly (status_code=-1, request_id=None, body=None, retryable=True)", "timestamp": "2025-08-03T20:08:54.603539+00:00"}
{"message": "failed to recognize speech, retrying in 0.1s", "level": "WARNING", "name": "livekit.agents", "exc_info": "Traceback (most recent call last):\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\livekit\\agents\\stt\\stt.py\", line 251, in _main_task\n    return await self._run()\n           ^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\livekit\\plugins\\deepgram\\stt.py\", line 505, in _run\n    task.result()\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\livekit\\agents\\utils\\log.py\", line 16, in async_fn_logs\n    return await fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\livekit\\plugins\\deepgram\\stt.py\", line 473, in recv_task\n    raise APIStatusError(message=\"deepgram connection closed unexpectedly\")\nlivekit.agents._exceptions.APIStatusError: deepgram connection closed unexpectedly (status_code=-1, request_id=None, body=None, retryable=True)", "tts": "livekit.plugins.deepgram.stt.STT", "attempt": 0, "streamed": true, "timestamp": "2025-08-03T20:08:54.606702+00:00"}
{"message": "AgentSession is closing due to unrecoverable error", "level": "ERROR", "name": "livekit.agents", "exc_info": "Traceback (most recent call last):\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\livekit\\agents\\stt\\stt.py\", line 251, in _main_task\n    return await self._run()\n           ^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\livekit\\plugins\\deepgram\\stt.py\", line 488, in _run\n    ws = await self._connect_ws()\n         ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\livekit\\plugins\\deepgram\\stt.py\", line 550, in _connect_ws\n    ws = await asyncio.wait_for(\n         ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\Python312\\Lib\\asyncio\\tasks.py\", line 520, in wait_for\n    return await fut\n           ^^^^^^^^^\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\aiohttp\\client.py\", line 1067, in _ws_connect\n    resp = await self.request(\n           ^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\aiohttp\\client.py\", line 770, in _request\n    resp = await handler(req)\n           ^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\aiohttp\\client.py\", line 725, in _connect_and_send_request\n    conn = await self._connector.connect(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\aiohttp\\connector.py\", line 642, in connect\n    proto = await self._create_connection(req, traces, timeout)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\aiohttp\\connector.py\", line 1209, in _create_connection\n    _, proto = await self._create_direct_connection(req, traces, timeout)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\aiohttp\\connector.py\", line 1532, in _create_direct_connection\n    hosts = await self._resolve_host(host, port, traces=traces)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\aiohttp\\connector.py\", line 1148, in _resolve_host\n    return await asyncio.shield(resolved_host_task)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\aiohttp\\connector.py\", line 1179, in _resolve_host_with_throttle\n    addrs = await self._resolver.resolve(host, port, family=self._family)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\aiohttp\\resolver.py\", line 40, in resolve\n    infos = await self._loop.getaddrinfo(\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\Python312\\Lib\\asyncio\\base_events.py\", line 901, in getaddrinfo\n    return await self.run_in_executor(\n                 ^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\Python312\\Lib\\asyncio\\base_events.py\", line 863, in run_in_executor\n    executor.submit(func, *args), loop=self)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\Python312\\Lib\\concurrent\\futures\\thread.py\", line 170, in submit\n    raise RuntimeError('cannot schedule new futures after shutdown')\nRuntimeError: cannot schedule new futures after shutdown", "timestamp": "2025-08-03T20:08:54.715033+00:00"}
{"message": "Error in _stt_task", "level": "ERROR", "name": "livekit.agents", "exc_info": "Traceback (most recent call last):\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\livekit\\agents\\stt\\stt.py\", line 367, in __anext__\n    val = await self._event_aiter.__anext__()\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nStopAsyncIteration\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\livekit\\agents\\utils\\log.py\", line 16, in async_fn_logs\n    return await fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\livekit\\agents\\voice\\audio_recognition.py\", line 408, in _stt_task\n    async for ev in node:\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\livekit\\agents\\voice\\agent.py\", line 330, in stt_node\n    async for event in stream:\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\livekit\\agents\\stt\\stt.py\", line 370, in __anext__\n    raise exc  # noqa: B904\n    ^^^^^^^^^\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\livekit\\agents\\stt\\stt.py\", line 251, in _main_task\n    return await self._run()\n           ^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\livekit\\plugins\\deepgram\\stt.py\", line 488, in _run\n    ws = await self._connect_ws()\n         ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\livekit\\plugins\\deepgram\\stt.py\", line 550, in _connect_ws\n    ws = await asyncio.wait_for(\n         ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\Python312\\Lib\\asyncio\\tasks.py\", line 520, in wait_for\n    return await fut\n           ^^^^^^^^^\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\aiohttp\\client.py\", line 1067, in _ws_connect\n    resp = await self.request(\n           ^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\aiohttp\\client.py\", line 770, in _request\n    resp = await handler(req)\n           ^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\aiohttp\\client.py\", line 725, in _connect_and_send_request\n    conn = await self._connector.connect(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\aiohttp\\connector.py\", line 642, in connect\n    proto = await self._create_connection(req, traces, timeout)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\aiohttp\\connector.py\", line 1209, in _create_connection\n    _, proto = await self._create_direct_connection(req, traces, timeout)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\aiohttp\\connector.py\", line 1532, in _create_direct_connection\n    hosts = await self._resolve_host(host, port, traces=traces)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\aiohttp\\connector.py\", line 1148, in _resolve_host\n    return await asyncio.shield(resolved_host_task)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\aiohttp\\connector.py\", line 1179, in _resolve_host_with_throttle\n    addrs = await self._resolver.resolve(host, port, family=self._family)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\aiohttp\\resolver.py\", line 40, in resolve\n    infos = await self._loop.getaddrinfo(\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\Python312\\Lib\\asyncio\\base_events.py\", line 901, in getaddrinfo\n    return await self.run_in_executor(\n                 ^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\Python312\\Lib\\asyncio\\base_events.py\", line 863, in run_in_executor\n    executor.submit(func, *args), loop=self)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\Python312\\Lib\\concurrent\\futures\\thread.py\", line 170, in submit\n    raise RuntimeError('cannot schedule new futures after shutdown')\nRuntimeError: cannot schedule new futures after shutdown", "timestamp": "2025-08-03T20:08:54.724048+00:00"}
