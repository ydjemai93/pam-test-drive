[WINDOWS-FIX] Applying proven Windows subprocess logging fixes...
[WINDOWS-FIX] [OK] Windows subprocess logging configured successfully
2025-08-25 18:55:20,412 - outbound-caller - INFO - [STARTUP] OUTBOUND AGENT STARTING WITH WINDOWS SUBPROCESS FIX
2025-08-25 18:55:20,412 - outbound-caller - INFO - [STARTUP] Script args: ['C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\outbound_agent.py', 'start']
2025-08-25 18:55:20,412 - outbound-caller - INFO - [STARTUP] Python version: 3.12.3 (tags/v3.12.3:f6650f9, Apr  9 2024, 14:05:25) [MSC v.1938 64 bit (AMD64)]
2025-08-25 18:55:20,412 - outbound-caller - INFO - [STARTUP] Current directory: C:\Users\y.djemai\pam-testdrive\MARK_I\backend_python\agents
2025-08-25 18:55:20,412 - outbound-caller - INFO - [STARTUP] Default encoding: utf-8
2025-08-25 18:55:20,412 - outbound-caller - INFO - [STARTUP] System locale: ('fr_FR', 'cp1252')
2025-08-25 18:55:20,412 - outbound-caller - INFO - [STARTUP] Platform: win32

============================================================
[TEST] TESTING WINDOWS SUBPROCESS FIX
============================================================
[REALTIME] Executing: echo Windows subprocess test successful!
Windows subprocess test successful!

[REALTIME] [OK] Command completed (exit code: 0)
2025-08-25 18:55:20,458 - outbound-caller - INFO - [STARTUP] [OK] Subprocess test result: Windows subprocess test successful!
============================================================
[STARTUP] CONTINUING WITH LIVEKIT AGENT INITIALIZATION
============================================================

2025-08-25 18:55:20,458 - outbound-caller - INFO - [STARTUP] PATIENT_NAME: Jayden
2025-08-25 18:55:20,458 - outbound-caller - INFO - [STARTUP] APPOINTMENT_TIME: next Tuesday at 3pm
2025-08-25 18:55:20,458 - outbound-caller - INFO - [STARTUP] LK_ROOM_NAME: agent-call-525
2025-08-25 18:55:20,458 - outbound-caller - INFO - [STARTUP] LK_JOB_METADATA: {"firstName": "Valued Customer", "lastName": "", "dial_info": {"agent_id": 11, "call_direction": "outbound", "room_name": "agent-call-525", "supabase_call_id": 525, "telnyx_call_control_id": null, "default_pathway_id": "d5fc510b-7635-4715-9066-e522daa2336d", "user_id": "b55837c4-270f-4f1f-8023-7ab09ee5f44d", "phone_number": "+33661329235", "sip_trunk_id": "ST_6CYLZwTLMCe2", "agent_caller_id_number": "+33189311209"}, "system_prompt": "test", "initial_greeting": "test", "wait_for_greeting": false, "pam_tier": "core", "interruption_threshold": 100, "ai_models": {"vad": {"provider": "silero"}, "stt": {"provider": "deepgram", "language": "en", "model": "nova-2"}, "tts": {"provider": "cartesia", "model": "sonic-2", "voice_id": "f9836c6e-a0bd-460e-9d3c-f7299fa60f94"}, "llm": {"provider": "openai", "model": "gpt-4o-mini"}}}
2025-08-25 18:55:20,458 - outbound-caller - INFO - [STARTUP] LIVEKIT_URL: wss://pamtestdrive-euxn3osq.livekit.cloud
2025-08-25 18:55:20,458 - outbound-caller - INFO - [STARTUP] LIVEKIT_API_KEY présent: Oui
[DB_CLIENT DEBUG] SUPABASE_URL: https://ioddvuvaxqywbzfcjmpi.supabase.co
[DB_CLIENT DEBUG] SUPABASE_ANON_KEY: SET
[DB_CLIENT DEBUG] SUPABASE_SERVICE_ROLE_KEY: SET
[DB_CLIENT DEBUG] Creating Supabase service client with URL: https://ioddvuvaxqywbzfcjmpi.supabase.co
[DB_CLIENT DEBUG] Supabase service client created successfully!
2025-08-25 18:55:21,387 - db_client - INFO - Supabase service client initialized successfully.
2025-08-25 18:55:21,387 - outbound-caller - INFO - [STARTUP] [OK] Supabase client imported successfully
[DB_CLIENT DEBUG] SUPABASE_URL: https://ioddvuvaxqywbzfcjmpi.supabase.co
[DB_CLIENT DEBUG] SUPABASE_ANON_KEY: SET
[DB_CLIENT DEBUG] SUPABASE_SERVICE_ROLE_KEY: SET
[DB_CLIENT DEBUG] Creating Supabase service client with URL: https://ioddvuvaxqywbzfcjmpi.supabase.co
[DB_CLIENT DEBUG] Supabase service client created successfully!
2025-08-25 18:55:24,518 - api.db_client - INFO - Supabase service client initialized successfully.
2025-08-25 18:55:24,522 - workflow-agent - INFO - [SUCCESS] App actions module imported successfully
2025-08-25 18:55:24,529 - agent_pathway_integration - INFO - Agent Pathway Integration module loaded successfully
2025-08-25 18:55:24,529 - outbound-caller - INFO - [STARTUP] Pathway integration loaded successfully
[WINDOWS-FIX] Applying proven Windows subprocess logging fixes...
[WINDOWS-FIX] [OK] Windows subprocess logging configured successfully
2025-08-25 18:55:24,539 - outbound-caller - INFO - [ENV] Loaded environment from: C:\Users\y.djemai\pam-testdrive\MARK_I\backend_python\agents\.env
2025-08-25 18:55:24,539 - outbound-caller - INFO - [STARTUP] Starting outbound agent
2025-08-25 18:55:24,547 - livekit.agents - INFO - starting worker
{"message": "starting worker", "level": "INFO", "name": "livekit.agents", "version": "1.2.6", "rtc-version": "1.0.12", "timestamp": "2025-08-25T16:55:24.547820+00:00"}
2025-08-25 18:55:24,554 - livekit.agents - ERROR - worker failed
Traceback (most recent call last):
  File "C:\Users\y.djemai\pam-testdrive\MARK_I\backend_python\agents\venv\Lib\site-packages\livekit\agents\cli\_run.py", line 79, in _worker_run
    await worker.run()
  File "C:\Users\y.djemai\pam-testdrive\MARK_I\backend_python\agents\venv\Lib\site-packages\livekit\agents\worker.py", line 412, in run
    await self._http_server.start()
  File "C:\Users\y.djemai\pam-testdrive\MARK_I\backend_python\agents\venv\Lib\site-packages\livekit\agents\utils\http_server.py", line 27, in start
    self._server = await self._loop.create_server(handler, self._host, self._port)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python312\Lib\asyncio\base_events.py", line 1572, in create_server
    raise OSError(err.errno, msg) from None
OSError: [Errno 10048] error while attempting to bind on address ('0.0.0.0', 8081): une seule utilisation de chaque adresse de socket (protocole/adresse réseau/port) est habituellement autorisée
{"message": "worker failed", "level": "ERROR", "name": "livekit.agents", "exc_info": "Traceback (most recent call last):\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\livekit\\agents\\cli\\_run.py\", line 79, in _worker_run\n    await worker.run()\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\livekit\\agents\\worker.py\", line 412, in run\n    await self._http_server.start()\n  File \"C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\venv\\Lib\\site-packages\\livekit\\agents\\utils\\http_server.py\", line 27, in start\n    self._server = await self._loop.create_server(handler, self._host, self._port)\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\Python312\\Lib\\asyncio\\base_events.py\", line 1572, in create_server\n    raise OSError(err.errno, msg) from None\nOSError: [Errno 10048] error while attempting to bind on address ('0.0.0.0', 8081): une seule utilisation de chaque adresse de socket (protocole/adresse réseau/port) est habituellement autorisée", "timestamp": "2025-08-25T16:55:24.554358+00:00"}
2025-08-25 18:55:24,564 - livekit.agents - INFO - draining worker
{"message": "draining worker", "level": "INFO", "name": "livekit.agents", "id": "unregistered", "timeout": 1800, "timestamp": "2025-08-25T16:55:24.564750+00:00"}
2025-08-25 18:55:24,565 - livekit.agents - INFO - shutting down worker
{"message": "shutting down worker", "level": "INFO", "name": "livekit.agents", "id": "unregistered", "timestamp": "2025-08-25T16:55:24.565755+00:00"}
