2025-07-16 10:26:14,520 - outbound-caller - INFO - Outbound Agent script démarre, args: ['C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\outbound_agent.py', 'start']
2025-07-16 10:26:14,524 - outbound-caller - INFO - Python version: 3.12.3 (tags/v3.12.3:f6650f9, Apr  9 2024, 14:05:25) [MSC v.1938 64 bit (AMD64)]
2025-07-16 10:26:14,524 - outbound-caller - INFO - Répertoire courant: C:\Users\y.djemai\pam-testdrive\MARK_I\backend_python\agents
2025-07-16 10:26:14,524 - outbound-caller - INFO - Encodage par défaut: utf-8
2025-07-16 10:26:14,526 - outbound-caller - INFO - Locale système: ('fr_FR', 'UTF-8')
2025-07-16 10:26:15,174 - outbound-caller - INFO - PATIENT_NAME: Jayden
2025-07-16 10:26:15,174 - outbound-caller - INFO - APPOINTMENT_TIME: next Tuesday at 3pm
2025-07-16 10:26:15,174 - outbound-caller - INFO - LK_ROOM_NAME: agent-call-150
2025-07-16 10:26:15,174 - outbound-caller - INFO - LK_JOB_METADATA: {"firstName": "Valued Customer", "lastName": "", "dial_info": {"agent_id": 11, "call_direction": "outbound", "room_name": "agent-call-150", "supabase_call_id": 150, "telnyx_call_control_id": null, "default_pathway_id": "d5fc510b-7635-4715-9066-e522daa2336d", "user_id": "b55837c4-270f-4f1f-8023-7ab09ee5f44d", "phone_number": "+33661329235", "sip_trunk_id": "ST_pYivozcRKCMc", "agent_caller_id_number": "+12027713289"}, "system_prompt": "You're an AI sales assistant called Jen. Your Goal is to sell me paper.", "initial_greeting": "Hi this is Pam, how can I help ?", "wait_for_greeting": false, "pam_tier": "core", "interruption_threshold": 100, "ai_models": {"vad": {"provider": "silero"}, "stt": {"provider": "deepgram", "language": "en", "model": "nova-2"}, "tts": {"provider": "cartesia", "model": "sonic-2", "voice_id": "f9836c6e-a0bd-460e-9d3c-f7299fa60f94"}, "llm": {"provider": "openai", "model": "gpt-4o-mini"}}}
2025-07-16 10:26:15,174 - outbound-caller - INFO - LIVEKIT_URL: wss://pamtestdrive-euxn3osq.livekit.cloud
2025-07-16 10:26:15,174 - outbound-caller - INFO - LIVEKIT_API_KEY présent: Oui
2025-07-16 10:26:30,340 - outbound-caller - WARNING - Pathway integration not available: attempted relative import with no known parent package
2025-07-16 10:26:30,364 - root - INFO - Starting LiveKit Worker 'outbound-caller' on port 62614
2025-07-16 10:26:30,370 - livekit.agents - INFO - starting worker
2025-07-16 10:26:30,403 - livekit.agents - INFO - initializing job runner
2025-07-16 10:26:30,403 - livekit.agents - INFO - initializing job runner
2025-07-16 10:26:30,403 - livekit.agents - INFO - initializing job runner
2025-07-16 10:26:30,405 - livekit.agents - INFO - initializing job runner
2025-07-16 10:26:30,407 - livekit.agents - INFO - initializing job runner
2025-07-16 10:26:30,407 - livekit.agents - INFO - initializing job runner
2025-07-16 10:26:30,407 - livekit.agents - INFO - initializing job runner
2025-07-16 10:26:30,407 - livekit.agents - INFO - initializing job runner
2025-07-16 10:26:30,411 - livekit.agents - INFO - initializing job runner
2025-07-16 10:26:30,411 - livekit.agents - INFO - initializing job runner
2025-07-16 10:26:30,411 - livekit.agents - INFO - initializing job runner
2025-07-16 10:26:30,411 - livekit.agents - INFO - initializing job runner
2025-07-16 10:26:30,443 - livekit.agents - INFO - job runner initialized
2025-07-16 10:26:30,443 - livekit.agents - INFO - job runner initialized
2025-07-16 10:26:30,445 - livekit.agents - INFO - job runner initialized
2025-07-16 10:26:30,445 - livekit.agents - INFO - job runner initialized
2025-07-16 10:26:30,445 - livekit.agents - INFO - job runner initialized
2025-07-16 10:26:30,445 - livekit.agents - INFO - job runner initialized
2025-07-16 10:26:30,445 - livekit.agents - INFO - job runner initialized
2025-07-16 10:26:30,445 - livekit.agents - INFO - job runner initialized
2025-07-16 10:26:30,445 - livekit.agents - INFO - job runner initialized
2025-07-16 10:26:30,445 - livekit.agents - INFO - job runner initialized
2025-07-16 10:26:30,445 - livekit.agents - INFO - job runner initialized
2025-07-16 10:26:30,445 - livekit.agents - INFO - job runner initialized
2025-07-16 10:26:30,445 - livekit.agents - INFO - see tracing information at http://localhost:62614/debug
2025-07-16 10:26:30,721 - livekit.agents - INFO - registered worker
2025-07-16 10:26:30,786 - livekit.agents - INFO - received job request
2025-07-16 10:26:30,834 - outbound-caller - INFO - Entrée dans la fonction entrypoint pour le job AJ_Sgrb3HVGDYdj
2025-07-16 10:26:30,834 - outbound-caller - INFO - Entrée dans la fonction entrypoint pour le job AJ_Sgrb3HVGDYdj
2025-07-16 10:26:30,876 - livekit.agents - INFO - initializing job runner
2025-07-16 10:26:30,877 - livekit.agents - INFO - job runner initialized
2025-07-16 10:26:31,260 - outbound-caller - INFO - Connexion établie à la room agent-call-150
2025-07-16 10:26:31,260 - outbound-caller - INFO - Connexion établie à la room agent-call-150
2025-07-16 10:26:31,261 - outbound-caller - INFO - Métadonnées brutes du job: {"firstName": "Valued Customer", "lastName": "", "dial_info": {"agent_id": 11, "call_direction": "outbound", "room_name": "agent-call-150", "supabase_call_id": 150, "telnyx_call_control_id": null, "default_pathway_id": "d5fc510b-7635-4715-9066-e522daa2336d", "user_id": "b55837c4-270f-4f1f-8023-7ab09ee5f44d", "phone_number": "+33661329235", "sip_trunk_id": "ST_pYivozcRKCMc"}, "system_prompt": "You're an AI sales assistant called Jen. Your Goal is to sell me paper.", "initial_greeting": "Hi this is Pam, how can I help ?", "wait_for_greeting": false, "pam_tier": "core", "interruption_threshold": 100, "ai_models": {"vad": {"provider": "silero"}, "stt": {"provider": "deepgram", "language": "en", "model": "nova-2"}, "tts": {"provider": "cartesia", "model": "sonic-2", "voice_id": "f9836c6e-a0bd-460e-9d3c-f7299fa60f94"}, "llm": {"provider": "openai", "model": "gpt-4o-mini"}}}
2025-07-16 10:26:31,261 - outbound-caller - INFO - Métadonnées brutes du job: {"firstName": "Valued Customer", "lastName": "", "dial_info": {"agent_id": 11, "call_direction": "outbound", "room_name": "agent-call-150", "supabase_call_id": 150, "telnyx_call_control_id": null, "default_pathway_id": "d5fc510b-7635-4715-9066-e522daa2336d", "user_id": "b55837c4-270f-4f1f-8023-7ab09ee5f44d", "phone_number": "+33661329235", "sip_trunk_id": "ST_pYivozcRKCMc"}, "system_prompt": "You're an AI sales assistant called Jen. Your Goal is to sell me paper.", "initial_greeting": "Hi this is Pam, how can I help ?", "wait_for_greeting": false, "pam_tier": "core", "interruption_threshold": 100, "ai_models": {"vad": {"provider": "silero"}, "stt": {"provider": "deepgram", "language": "en", "model": "nova-2"}, "tts": {"provider": "cartesia", "model": "sonic-2", "voice_id": "f9836c6e-a0bd-460e-9d3c-f7299fa60f94"}, "llm": {"provider": "openai", "model": "gpt-4o-mini"}}}
2025-07-16 10:26:31,262 - outbound-caller - INFO - Métadonnées parsées: {'firstName': 'Valued Customer', 'lastName': '', 'dial_info': {'agent_id': 11, 'call_direction': 'outbound', 'room_name': 'agent-call-150', 'supabase_call_id': 150, 'telnyx_call_control_id': None, 'default_pathway_id': 'd5fc510b-7635-4715-9066-e522daa2336d', 'user_id': 'b55837c4-270f-4f1f-8023-7ab09ee5f44d', 'phone_number': '+33661329235', 'sip_trunk_id': 'ST_pYivozcRKCMc'}, 'system_prompt': "You're an AI sales assistant called Jen. Your Goal is to sell me paper.", 'initial_greeting': 'Hi this is Pam, how can I help ?', 'wait_for_greeting': False, 'pam_tier': 'core', 'interruption_threshold': 100, 'ai_models': {'vad': {'provider': 'silero'}, 'stt': {'provider': 'deepgram', 'language': 'en', 'model': 'nova-2'}, 'tts': {'provider': 'cartesia', 'model': 'sonic-2', 'voice_id': 'f9836c6e-a0bd-460e-9d3c-f7299fa60f94'}, 'llm': {'provider': 'openai', 'model': 'gpt-4o-mini'}}}
2025-07-16 10:26:31,262 - outbound-caller - INFO - Métadonnées parsées: {'firstName': 'Valued Customer', 'lastName': '', 'dial_info': {'agent_id': 11, 'call_direction': 'outbound', 'room_name': 'agent-call-150', 'supabase_call_id': 150, 'telnyx_call_control_id': None, 'default_pathway_id': 'd5fc510b-7635-4715-9066-e522daa2336d', 'user_id': 'b55837c4-270f-4f1f-8023-7ab09ee5f44d', 'phone_number': '+33661329235', 'sip_trunk_id': 'ST_pYivozcRKCMc'}, 'system_prompt': "You're an AI sales assistant called Jen. Your Goal is to sell me paper.", 'initial_greeting': 'Hi this is Pam, how can I help ?', 'wait_for_greeting': False, 'pam_tier': 'core', 'interruption_threshold': 100, 'ai_models': {'vad': {'provider': 'silero'}, 'stt': {'provider': 'deepgram', 'language': 'en', 'model': 'nova-2'}, 'tts': {'provider': 'cartesia', 'model': 'sonic-2', 'voice_id': 'f9836c6e-a0bd-460e-9d3c-f7299fa60f94'}, 'llm': {'provider': 'openai', 'model': 'gpt-4o-mini'}}}
2025-07-16 10:26:31,263 - outbound-caller - INFO - supabase_call_id extrait des métadonnées: 150
2025-07-16 10:26:31,263 - outbound-caller - INFO - supabase_call_id extrait des métadonnées: 150
2025-07-16 10:26:31,263 - outbound-caller - INFO - Métadonnées du job: {"firstName": "Valued Customer", "lastName": "", "dial_info": {"agent_id": 11, "call_direction": "outbound", "room_name": "agent-call-150", "supabase_call_id": 150, "telnyx_call_control_id": null, "default_pathway_id": "d5fc510b-7635-4715-9066-e522daa2336d", "user_id": "b55837c4-270f-4f1f-8023-7ab09ee5f44d", "phone_number": "+33661329235", "sip_trunk_id": "ST_pYivozcRKCMc"}, "system_prompt": "You're an AI sales assistant called Jen. Your Goal is to sell me paper.", "initial_greeting": "Hi this is Pam, how can I help ?", "wait_for_greeting": false, "pam_tier": "core", "interruption_threshold": 100, "ai_models": {"vad": {"provider": "silero"}, "stt": {"provider": "deepgram", "language": "en", "model": "nova-2"}, "tts": {"provider": "cartesia", "model": "sonic-2", "voice_id": "f9836c6e-a0bd-460e-9d3c-f7299fa60f94"}, "llm": {"provider": "openai", "model": "gpt-4o-mini"}}}
2025-07-16 10:26:31,263 - outbound-caller - INFO - Métadonnées du job: {"firstName": "Valued Customer", "lastName": "", "dial_info": {"agent_id": 11, "call_direction": "outbound", "room_name": "agent-call-150", "supabase_call_id": 150, "telnyx_call_control_id": null, "default_pathway_id": "d5fc510b-7635-4715-9066-e522daa2336d", "user_id": "b55837c4-270f-4f1f-8023-7ab09ee5f44d", "phone_number": "+33661329235", "sip_trunk_id": "ST_pYivozcRKCMc"}, "system_prompt": "You're an AI sales assistant called Jen. Your Goal is to sell me paper.", "initial_greeting": "Hi this is Pam, how can I help ?", "wait_for_greeting": false, "pam_tier": "core", "interruption_threshold": 100, "ai_models": {"vad": {"provider": "silero"}, "stt": {"provider": "deepgram", "language": "en", "model": "nova-2"}, "tts": {"provider": "cartesia", "model": "sonic-2", "voice_id": "f9836c6e-a0bd-460e-9d3c-f7299fa60f94"}, "llm": {"provider": "openai", "model": "gpt-4o-mini"}}}
2025-07-16 10:26:31,265 - outbound-caller - INFO - dial_info parsed from metadata: {'firstName': 'Valued Customer', 'lastName': '', 'dial_info': {'agent_id': 11, 'call_direction': 'outbound', 'room_name': 'agent-call-150', 'supabase_call_id': 150, 'telnyx_call_control_id': None, 'default_pathway_id': 'd5fc510b-7635-4715-9066-e522daa2336d', 'user_id': 'b55837c4-270f-4f1f-8023-7ab09ee5f44d', 'phone_number': '+33661329235', 'sip_trunk_id': 'ST_pYivozcRKCMc'}, 'system_prompt': "You're an AI sales assistant called Jen. Your Goal is to sell me paper.", 'initial_greeting': 'Hi this is Pam, how can I help ?', 'wait_for_greeting': False, 'pam_tier': 'core', 'interruption_threshold': 100, 'ai_models': {'vad': {'provider': 'silero'}, 'stt': {'provider': 'deepgram', 'language': 'en', 'model': 'nova-2'}, 'tts': {'provider': 'cartesia', 'model': 'sonic-2', 'voice_id': 'f9836c6e-a0bd-460e-9d3c-f7299fa60f94'}, 'llm': {'provider': 'openai', 'model': 'gpt-4o-mini'}}}
2025-07-16 10:26:31,265 - outbound-caller - INFO - dial_info parsed from metadata: {'firstName': 'Valued Customer', 'lastName': '', 'dial_info': {'agent_id': 11, 'call_direction': 'outbound', 'room_name': 'agent-call-150', 'supabase_call_id': 150, 'telnyx_call_control_id': None, 'default_pathway_id': 'd5fc510b-7635-4715-9066-e522daa2336d', 'user_id': 'b55837c4-270f-4f1f-8023-7ab09ee5f44d', 'phone_number': '+33661329235', 'sip_trunk_id': 'ST_pYivozcRKCMc'}, 'system_prompt': "You're an AI sales assistant called Jen. Your Goal is to sell me paper.", 'initial_greeting': 'Hi this is Pam, how can I help ?', 'wait_for_greeting': False, 'pam_tier': 'core', 'interruption_threshold': 100, 'ai_models': {'vad': {'provider': 'silero'}, 'stt': {'provider': 'deepgram', 'language': 'en', 'model': 'nova-2'}, 'tts': {'provider': 'cartesia', 'model': 'sonic-2', 'voice_id': 'f9836c6e-a0bd-460e-9d3c-f7299fa60f94'}, 'llm': {'provider': 'openai', 'model': 'gpt-4o-mini'}}}
2025-07-16 10:26:31,266 - outbound-caller - INFO - Using firstName from metadata or default: Valued Customer
2025-07-16 10:26:31,266 - outbound-caller - INFO - Using firstName from metadata or default: Valued Customer
2025-07-16 10:26:31,267 - outbound-caller - INFO - OUTBOUND CALL: To +33661329235
2025-07-16 10:26:31,267 - outbound-caller - INFO - OUTBOUND CALL: To +33661329235
2025-07-16 10:26:31,267 - outbound-caller - INFO - PAM Tier: core, Wait for Greeting: False, Interruption Threshold: 100ms
2025-07-16 10:26:31,267 - outbound-caller - INFO - PAM Tier: core, Wait for Greeting: False, Interruption Threshold: 100ms
2025-07-16 10:26:31,268 - outbound-caller - INFO - DEBUG: Full dial_info structure: {'firstName': 'Valued Customer', 'lastName': '', 'dial_info': {'agent_id': 11, 'call_direction': 'outbound', 'room_name': 'agent-call-150', 'supabase_call_id': 150, 'telnyx_call_control_id': None, 'default_pathway_id': 'd5fc510b-7635-4715-9066-e522daa2336d', 'user_id': 'b55837c4-270f-4f1f-8023-7ab09ee5f44d', 'phone_number': '+33661329235', 'sip_trunk_id': 'ST_pYivozcRKCMc'}, 'system_prompt': "You're an AI sales assistant called Jen. Your Goal is to sell me paper.", 'initial_greeting': 'Hi this is Pam, how can I help ?', 'wait_for_greeting': False, 'pam_tier': 'core', 'interruption_threshold': 100, 'ai_models': {'vad': {'provider': 'silero'}, 'stt': {'provider': 'deepgram', 'language': 'en', 'model': 'nova-2'}, 'tts': {'provider': 'cartesia', 'model': 'sonic-2', 'voice_id': 'f9836c6e-a0bd-460e-9d3c-f7299fa60f94'}, 'llm': {'provider': 'openai', 'model': 'gpt-4o-mini'}}}
2025-07-16 10:26:31,268 - outbound-caller - INFO - DEBUG: Full dial_info structure: {'firstName': 'Valued Customer', 'lastName': '', 'dial_info': {'agent_id': 11, 'call_direction': 'outbound', 'room_name': 'agent-call-150', 'supabase_call_id': 150, 'telnyx_call_control_id': None, 'default_pathway_id': 'd5fc510b-7635-4715-9066-e522daa2336d', 'user_id': 'b55837c4-270f-4f1f-8023-7ab09ee5f44d', 'phone_number': '+33661329235', 'sip_trunk_id': 'ST_pYivozcRKCMc'}, 'system_prompt': "You're an AI sales assistant called Jen. Your Goal is to sell me paper.", 'initial_greeting': 'Hi this is Pam, how can I help ?', 'wait_for_greeting': False, 'pam_tier': 'core', 'interruption_threshold': 100, 'ai_models': {'vad': {'provider': 'silero'}, 'stt': {'provider': 'deepgram', 'language': 'en', 'model': 'nova-2'}, 'tts': {'provider': 'cartesia', 'model': 'sonic-2', 'voice_id': 'f9836c6e-a0bd-460e-9d3c-f7299fa60f94'}, 'llm': {'provider': 'openai', 'model': 'gpt-4o-mini'}}}
2025-07-16 10:26:31,268 - outbound-caller - INFO - DEBUG: dial_info.get('dial_info'): {'agent_id': 11, 'call_direction': 'outbound', 'room_name': 'agent-call-150', 'supabase_call_id': 150, 'telnyx_call_control_id': None, 'default_pathway_id': 'd5fc510b-7635-4715-9066-e522daa2336d', 'user_id': 'b55837c4-270f-4f1f-8023-7ab09ee5f44d', 'phone_number': '+33661329235', 'sip_trunk_id': 'ST_pYivozcRKCMc'}
2025-07-16 10:26:31,268 - outbound-caller - INFO - DEBUG: dial_info.get('dial_info'): {'agent_id': 11, 'call_direction': 'outbound', 'room_name': 'agent-call-150', 'supabase_call_id': 150, 'telnyx_call_control_id': None, 'default_pathway_id': 'd5fc510b-7635-4715-9066-e522daa2336d', 'user_id': 'b55837c4-270f-4f1f-8023-7ab09ee5f44d', 'phone_number': '+33661329235', 'sip_trunk_id': 'ST_pYivozcRKCMc'}
2025-07-16 10:26:31,269 - outbound-caller - INFO - DEBUG: Extracted agent_caller_id_number: None
2025-07-16 10:26:31,269 - outbound-caller - INFO - DEBUG: Extracted agent_caller_id_number: None
2025-07-16 10:26:31,270 - outbound-caller - WARNING - agent_caller_id_number NOT found in job metadata. Outbound call may fail if Caller ID is required by Telnyx.
2025-07-16 10:26:31,270 - outbound-caller - WARNING - agent_caller_id_number NOT found in job metadata. Outbound call may fail if Caller ID is required by Telnyx.
2025-07-16 10:26:31,271 - outbound-caller - ERROR - CRITICAL: agent_caller_id_number not found at any level in metadata!
2025-07-16 10:26:31,271 - outbound-caller - ERROR - CRITICAL: agent_caller_id_number not found at any level in metadata!
2025-07-16 10:26:31,272 - outbound-caller - INFO - Utilisation du SIP Trunk ID des métadonnées: ST_pYivozcRKCMc
2025-07-16 10:26:31,272 - outbound-caller - INFO - Utilisation du SIP Trunk ID des métadonnées: ST_pYivozcRKCMc
2025-07-16 10:26:31,272 - outbound-caller - INFO - Utilisation du prompt système formaté depuis les métadonnées.
2025-07-16 10:26:31,272 - outbound-caller - INFO - Utilisation du prompt système formaté depuis les métadonnées.
2025-07-16 10:26:31,274 - outbound-caller - INFO - Final dial info for agent: {'firstName': 'Valued Customer', 'lastName': '', 'dial_info': {'agent_id': 11, 'call_direction': 'outbound', 'room_name': 'agent-call-150', 'supabase_call_id': 150, 'telnyx_call_control_id': None, 'default_pathway_id': 'd5fc510b-7635-4715-9066-e522daa2336d', 'user_id': 'b55837c4-270f-4f1f-8023-7ab09ee5f44d', 'phone_number': '+33661329235', 'sip_trunk_id': 'ST_pYivozcRKCMc'}, 'system_prompt': "You're an AI sales assistant called Jen. Your Goal is to sell me paper.", 'initial_greeting': 'Hi this is Pam, how can I help ?', 'wait_for_greeting': False, 'pam_tier': 'core', 'interruption_threshold': 100, 'ai_models': {'vad': {'provider': 'silero'}, 'stt': {'provider': 'deepgram', 'language': 'en', 'model': 'nova-2'}, 'tts': {'provider': 'cartesia', 'model': 'sonic-2', 'voice_id': 'f9836c6e-a0bd-460e-9d3c-f7299fa60f94'}, 'llm': {'provider': 'openai', 'model': 'gpt-4o-mini'}}}
2025-07-16 10:26:31,274 - outbound-caller - INFO - Final dial info for agent: {'firstName': 'Valued Customer', 'lastName': '', 'dial_info': {'agent_id': 11, 'call_direction': 'outbound', 'room_name': 'agent-call-150', 'supabase_call_id': 150, 'telnyx_call_control_id': None, 'default_pathway_id': 'd5fc510b-7635-4715-9066-e522daa2336d', 'user_id': 'b55837c4-270f-4f1f-8023-7ab09ee5f44d', 'phone_number': '+33661329235', 'sip_trunk_id': 'ST_pYivozcRKCMc'}, 'system_prompt': "You're an AI sales assistant called Jen. Your Goal is to sell me paper.", 'initial_greeting': 'Hi this is Pam, how can I help ?', 'wait_for_greeting': False, 'pam_tier': 'core', 'interruption_threshold': 100, 'ai_models': {'vad': {'provider': 'silero'}, 'stt': {'provider': 'deepgram', 'language': 'en', 'model': 'nova-2'}, 'tts': {'provider': 'cartesia', 'model': 'sonic-2', 'voice_id': 'f9836c6e-a0bd-460e-9d3c-f7299fa60f94'}, 'llm': {'provider': 'openai', 'model': 'gpt-4o-mini'}}}
2025-07-16 10:26:31,275 - outbound-caller - INFO - Agent will use name: Valued Customer
2025-07-16 10:26:31,275 - outbound-caller - INFO - Agent will use name: Valued Customer
2025-07-16 10:26:31,276 - outbound-caller - INFO - Dialing number: +33661329235
2025-07-16 10:26:31,276 - outbound-caller - INFO - Dialing number: +33661329235
2025-07-16 10:26:31,277 - outbound-caller - INFO - Configuration IA chargée depuis les métadonnées: {'vad': {'provider': 'silero'}, 'stt': {'provider': 'deepgram', 'language': 'en', 'model': 'nova-2'}, 'tts': {'provider': 'cartesia', 'model': 'sonic-2', 'voice_id': 'f9836c6e-a0bd-460e-9d3c-f7299fa60f94'}, 'llm': {'provider': 'openai', 'model': 'gpt-4o-mini'}}
2025-07-16 10:26:31,277 - outbound-caller - INFO - Configuration IA chargée depuis les métadonnées: {'vad': {'provider': 'silero'}, 'stt': {'provider': 'deepgram', 'language': 'en', 'model': 'nova-2'}, 'tts': {'provider': 'cartesia', 'model': 'sonic-2', 'voice_id': 'f9836c6e-a0bd-460e-9d3c-f7299fa60f94'}, 'llm': {'provider': 'openai', 'model': 'gpt-4o-mini'}}
2025-07-16 10:26:31,663 - outbound-caller - INFO - Plugin VAD Silero chargé.
2025-07-16 10:26:31,663 - outbound-caller - INFO - Plugin VAD Silero chargé.
2025-07-16 10:26:31,667 - outbound-caller - INFO - Plugin STT Deepgram chargé (lang: en, model: nova-2).
2025-07-16 10:26:31,667 - outbound-caller - INFO - Plugin STT Deepgram chargé (lang: en, model: nova-2).
2025-07-16 10:26:31,668 - outbound-caller - INFO - Plugin TTS Cartesia chargé (model: sonic-2, voice: f9836c6e-a0bd-460e-9d3c-f7299fa60f94).
2025-07-16 10:26:31,668 - outbound-caller - INFO - Plugin TTS Cartesia chargé (model: sonic-2, voice: f9836c6e-a0bd-460e-9d3c-f7299fa60f94).
2025-07-16 10:26:32,528 - outbound-caller - INFO - Plugin LLM OpenAI chargé (model: gpt-4o-mini).
2025-07-16 10:26:32,528 - outbound-caller - INFO - Plugin LLM OpenAI chargé (model: gpt-4o-mini).
2025-07-16 10:26:32,528 - outbound-caller - INFO - Creating standard OutboundCaller (no pathway configured)
2025-07-16 10:26:32,528 - outbound-caller - INFO - Creating standard OutboundCaller (no pathway configured)
2025-07-16 10:26:32,528 - outbound-caller - INFO - --- Agent System Prompt ---
2025-07-16 10:26:32,528 - outbound-caller - INFO - --- Agent System Prompt ---
2025-07-16 10:26:32,528 - outbound-caller - INFO - You're an AI sales assistant called Jen. Your Goal is to sell me paper.
2025-07-16 10:26:32,528 - outbound-caller - INFO - You're an AI sales assistant called Jen. Your Goal is to sell me paper.
2025-07-16 10:26:32,529 - outbound-caller - INFO - --- End Agent System Prompt ---
2025-07-16 10:26:32,529 - outbound-caller - INFO - --- End Agent System Prompt ---
2025-07-16 10:26:32,529 - outbound-caller - INFO - Agent initialized for OUTBOUND call to None
2025-07-16 10:26:32,529 - outbound-caller - INFO - Agent initialized for OUTBOUND call to None
2025-07-16 10:26:32,529 - outbound-caller - INFO - OutboundCaller (Pam Assistant) initialized for Valued Customer
2025-07-16 10:26:32,529 - outbound-caller - INFO - OutboundCaller (Pam Assistant) initialized for Valued Customer
2025-07-16 10:26:32,529 - outbound-caller - INFO - dial_info provided: {'firstName': 'Valued Customer', 'lastName': '', 'dial_info': {'agent_id': 11, 'call_direction': 'outbound', 'room_name': 'agent-call-150', 'supabase_call_id': 150, 'telnyx_call_control_id': None, 'default_pathway_id': 'd5fc510b-7635-4715-9066-e522daa2336d', 'user_id': 'b55837c4-270f-4f1f-8023-7ab09ee5f44d', 'phone_number': '+33661329235', 'sip_trunk_id': 'ST_pYivozcRKCMc'}, 'system_prompt': "You're an AI sales assistant called Jen. Your Goal is to sell me paper.", 'initial_greeting': 'Hi this is Pam, how can I help ?', 'wait_for_greeting': False, 'pam_tier': 'core', 'interruption_threshold': 100, 'ai_models': {'vad': {'provider': 'silero'}, 'stt': {'provider': 'deepgram', 'language': 'en', 'model': 'nova-2'}, 'tts': {'provider': 'cartesia', 'model': 'sonic-2', 'voice_id': 'f9836c6e-a0bd-460e-9d3c-f7299fa60f94'}, 'llm': {'provider': 'openai', 'model': 'gpt-4o-mini'}}}
2025-07-16 10:26:32,529 - outbound-caller - INFO - dial_info provided: {'firstName': 'Valued Customer', 'lastName': '', 'dial_info': {'agent_id': 11, 'call_direction': 'outbound', 'room_name': 'agent-call-150', 'supabase_call_id': 150, 'telnyx_call_control_id': None, 'default_pathway_id': 'd5fc510b-7635-4715-9066-e522daa2336d', 'user_id': 'b55837c4-270f-4f1f-8023-7ab09ee5f44d', 'phone_number': '+33661329235', 'sip_trunk_id': 'ST_pYivozcRKCMc'}, 'system_prompt': "You're an AI sales assistant called Jen. Your Goal is to sell me paper.", 'initial_greeting': 'Hi this is Pam, how can I help ?', 'wait_for_greeting': False, 'pam_tier': 'core', 'interruption_threshold': 100, 'ai_models': {'vad': {'provider': 'silero'}, 'stt': {'provider': 'deepgram', 'language': 'en', 'model': 'nova-2'}, 'tts': {'provider': 'cartesia', 'model': 'sonic-2', 'voice_id': 'f9836c6e-a0bd-460e-9d3c-f7299fa60f94'}, 'llm': {'provider': 'openai', 'model': 'gpt-4o-mini'}}}
2025-07-16 10:26:32,529 - outbound-caller - INFO - Initial greeting set to: Hi this is Pam, how can I help ?
2025-07-16 10:26:32,529 - outbound-caller - INFO - Initial greeting set to: Hi this is Pam, how can I help ?
2025-07-16 10:26:32,530 - outbound-caller - INFO - Wait for greeting: False
2025-07-16 10:26:32,530 - outbound-caller - INFO - Wait for greeting: False
2025-07-16 10:26:32,530 - outbound-caller - INFO - Interruption threshold: 100ms
2025-07-16 10:26:32,530 - outbound-caller - INFO - Interruption threshold: 100ms
2025-07-16 10:26:32,530 - outbound-caller - INFO - Instantiating AgentSession with dynamically loaded plugins.
2025-07-16 10:26:32,530 - outbound-caller - INFO - Instantiating AgentSession with dynamically loaded plugins.
2025-07-16 10:26:32,530 - outbound-caller - INFO - AgentSession created successfully with dynamic plugins.
2025-07-16 10:26:32,530 - outbound-caller - INFO - AgentSession created successfully with dynamic plugins.
2025-07-16 10:26:32,530 - outbound-caller - INFO - OUTBOUND CALL: Attempting SIP dial to +33661329235 via trunk ST_pYivozcRKCMc pour Supabase ID: 150
2025-07-16 10:26:32,530 - outbound-caller - INFO - OUTBOUND CALL: Attempting SIP dial to +33661329235 via trunk ST_pYivozcRKCMc pour Supabase ID: 150
2025-07-16 10:26:32,530 - outbound-caller - INFO - Préparation de l'en-tête SIP X-Client-State avec valeur (encodée): MTUw
2025-07-16 10:26:32,530 - outbound-caller - INFO - Préparation de l'en-tête SIP X-Client-State avec valeur (encodée): MTUw
2025-07-16 10:26:32,530 - outbound-caller - INFO - Tentative de mise à jour des infos pour room agent-call-150 (Supabase ID: 150) avec payload: {'new_status': 'dialing', 'supabase_call_id': '150'} via backend: http://localhost:8000/calls/room/agent-call-150/status
2025-07-16 10:26:32,530 - outbound-caller - INFO - Tentative de mise à jour des infos pour room agent-call-150 (Supabase ID: 150) avec payload: {'new_status': 'dialing', 'supabase_call_id': '150'} via backend: http://localhost:8000/calls/room/agent-call-150/status
2025-07-16 10:26:33,590 - outbound-caller - INFO - Infos mises à jour avec succès pour room agent-call-150 (Supabase ID: 150): {'message': 'Call status updated successfully', 'call': {'id': 150, 'created_at': '2025-07-16T08:26:08.098988+00:00', 'updated_at': '2025-07-16T08:26:33.631423+00:00', 'agent_id': 11, 'user_id': 'b55837c4-270f-4f1f-8023-7ab09ee5f44d', 'to_phone_number': '+33661329235', 'status': 'dialing', 'initiated_at': None, 'answered_at': None, 'ended_at': None, 'call_duration': None, 'from_phone_number': None, 'ended_reason': None, 'livekit_room_name': None, 'livekit_participant_identity': None, 'provider': None, 'livekit_outbound_trunk_id': None, 'call_control_id': None, 'agent_name': None, 'telnyx_call_session_id': None, 'batch_campaign_id': None, 'batch_call_item_id': None, 'call_type': 'outbound', 'phone_number_e164': '+33661329235', 'contact_name': None, 'room_name': 'agent-call-150', 'pathway_execution_id': None, 'current_pathway_node_id': None, 'pathway_variables': None, 'call_direction': 'outbound', 'caller_number': None, 'agent_process_pid': 21636, 'error_message': None, 'duration_seconds': None}}
2025-07-16 10:26:33,590 - outbound-caller - INFO - Infos mises à jour avec succès pour room agent-call-150 (Supabase ID: 150): {'message': 'Call status updated successfully', 'call': {'id': 150, 'created_at': '2025-07-16T08:26:08.098988+00:00', 'updated_at': '2025-07-16T08:26:33.631423+00:00', 'agent_id': 11, 'user_id': 'b55837c4-270f-4f1f-8023-7ab09ee5f44d', 'to_phone_number': '+33661329235', 'status': 'dialing', 'initiated_at': None, 'answered_at': None, 'ended_at': None, 'call_duration': None, 'from_phone_number': None, 'ended_reason': None, 'livekit_room_name': None, 'livekit_participant_identity': None, 'provider': None, 'livekit_outbound_trunk_id': None, 'call_control_id': None, 'agent_name': None, 'telnyx_call_session_id': None, 'batch_campaign_id': None, 'batch_call_item_id': None, 'call_type': 'outbound', 'phone_number_e164': '+33661329235', 'contact_name': None, 'room_name': 'agent-call-150', 'pathway_execution_id': None, 'current_pathway_node_id': None, 'pathway_variables': None, 'call_direction': 'outbound', 'caller_number': None, 'agent_process_pid': 21636, 'error_message': None, 'duration_seconds': None}}
2025-07-16 10:26:33,591 - outbound-caller - INFO - Appel à ctx.api.sip.create_sip_participant avec phoneNumber: +33661329235, trunk: ST_pYivozcRKCMc, from: None, metadata: {"supabase_call_id": "150"}
2025-07-16 10:26:33,591 - outbound-caller - INFO - Appel à ctx.api.sip.create_sip_participant avec phoneNumber: +33661329235, trunk: ST_pYivozcRKCMc, from: None, metadata: {"supabase_call_id": "150"}
2025-07-16 10:26:34,067 - outbound-caller - INFO - SIP call created for +33661329235. Waiting for SIP participant to join room.
2025-07-16 10:26:34,067 - outbound-caller - INFO - SIP call created for +33661329235. Waiting for SIP participant to join room.
2025-07-16 10:26:34,069 - outbound-caller - INFO - SIP participant 'agent_sip_participant_+33661329235' (PA_C852MrFjj7C4) connected to room agent-call-150.
2025-07-16 10:26:34,069 - outbound-caller - INFO - SIP participant 'agent_sip_participant_+33661329235' (PA_C852MrFjj7C4) connected to room agent-call-150.
2025-07-16 10:26:34,070 - outbound-caller - INFO - Tentative de mise à jour des infos pour room agent-call-150 (Supabase ID: 150) avec payload: {'new_status': 'connected', 'supabase_call_id': '150'} via backend: http://localhost:8000/calls/room/agent-call-150/status
2025-07-16 10:26:34,070 - outbound-caller - INFO - Tentative de mise à jour des infos pour room agent-call-150 (Supabase ID: 150) avec payload: {'new_status': 'connected', 'supabase_call_id': '150'} via backend: http://localhost:8000/calls/room/agent-call-150/status
2025-07-16 10:26:34,902 - outbound-caller - INFO - Infos mises à jour avec succès pour room agent-call-150 (Supabase ID: 150): {'message': 'Call status updated successfully', 'call': {'id': 150, 'created_at': '2025-07-16T08:26:08.098988+00:00', 'updated_at': '2025-07-16T08:26:34.946885+00:00', 'agent_id': 11, 'user_id': 'b55837c4-270f-4f1f-8023-7ab09ee5f44d', 'to_phone_number': '+33661329235', 'status': 'connected', 'initiated_at': None, 'answered_at': None, 'ended_at': None, 'call_duration': None, 'from_phone_number': None, 'ended_reason': None, 'livekit_room_name': None, 'livekit_participant_identity': None, 'provider': None, 'livekit_outbound_trunk_id': None, 'call_control_id': None, 'agent_name': None, 'telnyx_call_session_id': None, 'batch_campaign_id': None, 'batch_call_item_id': None, 'call_type': 'outbound', 'phone_number_e164': '+33661329235', 'contact_name': None, 'room_name': 'agent-call-150', 'pathway_execution_id': None, 'current_pathway_node_id': None, 'pathway_variables': None, 'call_direction': 'outbound', 'caller_number': None, 'agent_process_pid': 21636, 'error_message': None, 'duration_seconds': None}}
2025-07-16 10:26:34,902 - outbound-caller - INFO - Infos mises à jour avec succès pour room agent-call-150 (Supabase ID: 150): {'message': 'Call status updated successfully', 'call': {'id': 150, 'created_at': '2025-07-16T08:26:08.098988+00:00', 'updated_at': '2025-07-16T08:26:34.946885+00:00', 'agent_id': 11, 'user_id': 'b55837c4-270f-4f1f-8023-7ab09ee5f44d', 'to_phone_number': '+33661329235', 'status': 'connected', 'initiated_at': None, 'answered_at': None, 'ended_at': None, 'call_duration': None, 'from_phone_number': None, 'ended_reason': None, 'livekit_room_name': None, 'livekit_participant_identity': None, 'provider': None, 'livekit_outbound_trunk_id': None, 'call_control_id': None, 'agent_name': None, 'telnyx_call_session_id': None, 'batch_campaign_id': None, 'batch_call_item_id': None, 'call_type': 'outbound', 'phone_number_e164': '+33661329235', 'contact_name': None, 'room_name': 'agent-call-150', 'pathway_execution_id': None, 'current_pathway_node_id': None, 'pathway_variables': None, 'call_direction': 'outbound', 'caller_number': None, 'agent_process_pid': 21636, 'error_message': None, 'duration_seconds': None}}
2025-07-16 10:26:34,903 - outbound-caller - INFO - Call connected (OUTBOUND), participant joined. Starting agent session for supabase_call_id: 150
2025-07-16 10:26:34,903 - outbound-caller - INFO - Call connected (OUTBOUND), participant joined. Starting agent session for supabase_call_id: 150
2025-07-16 10:26:34,903 - outbound-caller - INFO - run_session_safely: AVANT appel à session.start() pour supabase_call_id: 150 (UTILISATION DE OutboundCaller - OUTBOUND CALL)
2025-07-16 10:26:34,903 - outbound-caller - INFO - run_session_safely: AVANT appel à session.start() pour supabase_call_id: 150 (UTILISATION DE OutboundCaller - OUTBOUND CALL)
2025-07-16 10:26:34,925 - outbound-caller - INFO - No pathway configured for this agent or missing required IDs
2025-07-16 10:26:34,925 - outbound-caller - INFO - No pathway configured for this agent or missing required IDs
2025-07-16 10:26:34,926 - outbound-caller - INFO - run_session_safely: APRÈS appel à session.start() pour supabase_call_id: 150 (OUTBOUND CALL). La session devrait avoir démarré et exécuté la logique de l'agent.
2025-07-16 10:26:34,926 - outbound-caller - INFO - run_session_safely: APRÈS appel à session.start() pour supabase_call_id: 150 (OUTBOUND CALL). La session devrait avoir démarré et exécuté la logique de l'agent.
2025-07-16 10:26:34,926 - outbound-caller - INFO - Agent session task finished normally for outbound call supabase_call_id: 150.
2025-07-16 10:26:34,926 - outbound-caller - INFO - Agent session task finished normally for outbound call supabase_call_id: 150.
2025-07-16 10:26:34,927 - outbound-caller - INFO - Fin du job pour la room agent-call-150 (OUTBOUND call, Supabase ID: 150). Statut final de session: completed
2025-07-16 10:26:34,927 - outbound-caller - INFO - Fin du job pour la room agent-call-150 (OUTBOUND call, Supabase ID: 150). Statut final de session: completed
2025-07-16 10:26:34,927 - outbound-caller - WARNING - TELNYX_API_KEY ou call_control_id manquant pour récupérer la durée réelle d'appel.
2025-07-16 10:26:34,927 - outbound-caller - WARNING - TELNYX_API_KEY ou call_control_id manquant pour récupérer la durée réelle d'appel.
2025-07-16 10:26:34,927 - outbound-caller - INFO - Tentative de mise à jour des infos pour room agent-call-150 (Supabase ID: 150) avec payload: {'new_status': 'completed', 'supabase_call_id': '150', 'call_duration_seconds': 0} via backend: http://localhost:8000/calls/room/agent-call-150/status
2025-07-16 10:26:34,927 - outbound-caller - INFO - Tentative de mise à jour des infos pour room agent-call-150 (Supabase ID: 150) avec payload: {'new_status': 'completed', 'supabase_call_id': '150', 'call_duration_seconds': 0} via backend: http://localhost:8000/calls/room/agent-call-150/status
2025-07-16 10:26:36,709 - outbound-caller - INFO - Infos mises à jour avec succès pour room agent-call-150 (Supabase ID: 150): {'message': 'Call status updated successfully', 'call': {'id': 150, 'created_at': '2025-07-16T08:26:08.098988+00:00', 'updated_at': '2025-07-16T08:26:36.75222+00:00', 'agent_id': 11, 'user_id': 'b55837c4-270f-4f1f-8023-7ab09ee5f44d', 'to_phone_number': '+33661329235', 'status': 'completed', 'initiated_at': None, 'answered_at': None, 'ended_at': '2025-07-16T08:26:36.627588+00:00', 'call_duration': None, 'from_phone_number': None, 'ended_reason': None, 'livekit_room_name': None, 'livekit_participant_identity': None, 'provider': None, 'livekit_outbound_trunk_id': None, 'call_control_id': None, 'agent_name': None, 'telnyx_call_session_id': None, 'batch_campaign_id': None, 'batch_call_item_id': None, 'call_type': 'outbound', 'phone_number_e164': '+33661329235', 'contact_name': None, 'room_name': 'agent-call-150', 'pathway_execution_id': None, 'current_pathway_node_id': None, 'pathway_variables': None, 'call_direction': 'outbound', 'caller_number': None, 'agent_process_pid': 21636, 'error_message': None, 'duration_seconds': 0}}
2025-07-16 10:26:36,709 - outbound-caller - INFO - Infos mises à jour avec succès pour room agent-call-150 (Supabase ID: 150): {'message': 'Call status updated successfully', 'call': {'id': 150, 'created_at': '2025-07-16T08:26:08.098988+00:00', 'updated_at': '2025-07-16T08:26:36.75222+00:00', 'agent_id': 11, 'user_id': 'b55837c4-270f-4f1f-8023-7ab09ee5f44d', 'to_phone_number': '+33661329235', 'status': 'completed', 'initiated_at': None, 'answered_at': None, 'ended_at': '2025-07-16T08:26:36.627588+00:00', 'call_duration': None, 'from_phone_number': None, 'ended_reason': None, 'livekit_room_name': None, 'livekit_participant_identity': None, 'provider': None, 'livekit_outbound_trunk_id': None, 'call_control_id': None, 'agent_name': None, 'telnyx_call_session_id': None, 'batch_campaign_id': None, 'batch_call_item_id': None, 'call_type': 'outbound', 'phone_number_e164': '+33661329235', 'contact_name': None, 'room_name': 'agent-call-150', 'pathway_execution_id': None, 'current_pathway_node_id': None, 'pathway_variables': None, 'call_direction': 'outbound', 'caller_number': None, 'agent_process_pid': 21636, 'error_message': None, 'duration_seconds': 0}}
2025-07-16 10:26:36,711 - outbound-caller - INFO - Session task awaited and completed for supabase_call_id 150.
2025-07-16 10:26:36,711 - outbound-caller - INFO - Session task awaited and completed for supabase_call_id 150.
2025-07-16 10:26:36,712 - outbound-caller - INFO - Setting up to wait for participant 'agent_sip_participant_+33661329235' to disconnect as a final check...
2025-07-16 10:26:36,712 - outbound-caller - INFO - Setting up to wait for participant 'agent_sip_participant_+33661329235' to disconnect as a final check...
2025-07-16 10:26:36,712 - outbound-caller - INFO - Now waiting for participant 'agent_sip_participant_+33661329235' to disconnect (final check)...
2025-07-16 10:26:36,712 - outbound-caller - INFO - Now waiting for participant 'agent_sip_participant_+33661329235' to disconnect (final check)...
2025-07-16 10:26:41,720 - outbound-caller - WARNING - Timeout waiting for participant 'agent_sip_participant_+33661329235' to disconnect (final check). Session likely already handled by agent logic or session_task.
2025-07-16 10:26:41,720 - outbound-caller - WARNING - Timeout waiting for participant 'agent_sip_participant_+33661329235' to disconnect (final check). Session likely already handled by agent logic or session_task.
2025-07-16 10:26:41,721 - outbound-caller - INFO - Entrypoint for supabase_call_id 150 completed.
2025-07-16 10:26:41,721 - outbound-caller - INFO - Entrypoint for supabase_call_id 150 completed.
2025-07-16 10:26:45,757 - livekit.agents - INFO - worker is at full capacity, marking as unavailable
2025-07-16 10:26:50,763 - livekit.agents - INFO - worker is below capacity, marking as available
2025-07-16 10:26:53,259 - livekit.agents - INFO - worker is at full capacity, marking as unavailable
2025-07-16 10:26:55,763 - livekit.agents - INFO - worker is below capacity, marking as available
2025-07-16 10:26:56,870 - livekit - WARNING - livekit::rtc_engine:453:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2025-07-16 10:27:13,515 - livekit.agents - INFO - worker is at full capacity, marking as unavailable
2025-07-16 10:27:16,012 - livekit.agents - INFO - worker is below capacity, marking as available
2025-07-16 10:28:01,165 - livekit.agents - INFO - draining worker
2025-07-16 10:28:01,168 - livekit.agents - INFO - shutting down worker
