[DB_CLIENT DEBUG] SUPABASE_URL: https://ioddvuvaxqywbzfcjmpi.supabase.co
[DB_CLIENT DEBUG] SUPABASE_ANON_KEY: SET
[DB_CLIENT DEBUG] SUPABASE_SERVICE_ROLE_KEY: SET
[DB_CLIENT DEBUG] Creating Supabase service client with URL: https://ioddvuvaxqywbzfcjmpi.supabase.co
[DB_CLIENT DEBUG] Supabase service client created successfully!
[DB_CLIENT DEBUG] SUPABASE_URL: https://ioddvuvaxqywbzfcjmpi.supabase.co
[DB_CLIENT DEBUG] SUPABASE_ANON_KEY: SET
[DB_CLIENT DEBUG] SUPABASE_SERVICE_ROLE_KEY: SET
[DB_CLIENT DEBUG] Creating Supabase service client with URL: https://ioddvuvaxqywbzfcjmpi.supabase.co
[DB_CLIENT DEBUG] Supabase service client created successfully!
{"message": "starting worker", "level": "INFO", "name": "livekit.agents", "version": "1.1.6", "rtc-version": "1.0.11", "timestamp": "2025-07-23T08:59:09.581917+00:00"}
{"message": "initializing job runner", "level": "INFO", "name": "livekit.agents", "tid": 2280, "timestamp": "2025-07-23T08:59:09.633417+00:00"}
{"message": "initializing job runner", "level": "INFO", "name": "livekit.agents", "tid": 40064, "timestamp": "2025-07-23T08:59:09.634452+00:00"}
{"message": "initializing job runner", "level": "INFO", "name": "livekit.agents", "tid": 30940, "timestamp": "2025-07-23T08:59:09.636333+00:00"}
{"message": "initializing job runner", "level": "INFO", "name": "livekit.agents", "tid": 21752, "timestamp": "2025-07-23T08:59:09.637849+00:00"}
{"message": "initializing job runner", "level": "INFO", "name": "livekit.agents", "tid": 24228, "timestamp": "2025-07-23T08:59:09.638878+00:00"}
{"message": "initializing job runner", "level": "INFO", "name": "livekit.agents", "tid": 40352, "timestamp": "2025-07-23T08:59:09.640875+00:00"}
{"message": "initializing job runner", "level": "INFO", "name": "livekit.agents", "tid": 14744, "timestamp": "2025-07-23T08:59:09.642869+00:00"}
{"message": "initializing job runner", "level": "INFO", "name": "livekit.agents", "tid": 5636, "timestamp": "2025-07-23T08:59:09.643871+00:00"}
{"message": "initializing job runner", "level": "INFO", "name": "livekit.agents", "tid": 34576, "timestamp": "2025-07-23T08:59:09.644884+00:00"}
{"message": "initializing job runner", "level": "INFO", "name": "livekit.agents", "tid": 7728, "timestamp": "2025-07-23T08:59:09.645879+00:00"}
{"message": "initializing job runner", "level": "INFO", "name": "livekit.agents", "tid": 16664, "timestamp": "2025-07-23T08:59:09.647871+00:00"}
{"message": "initializing job runner", "level": "INFO", "name": "livekit.agents", "tid": 37012, "timestamp": "2025-07-23T08:59:09.648633+00:00"}
{"message": "job runner initialized", "level": "INFO", "name": "livekit.agents", "tid": 2280, "elapsed_time": 0.06, "timestamp": "2025-07-23T08:59:09.693078+00:00"}
{"message": "job runner initialized", "level": "INFO", "name": "livekit.agents", "tid": 40064, "elapsed_time": 0.06, "timestamp": "2025-07-23T08:59:09.694028+00:00"}
{"message": "job runner initialized", "level": "INFO", "name": "livekit.agents", "tid": 30940, "elapsed_time": 0.06, "timestamp": "2025-07-23T08:59:09.696073+00:00"}
{"message": "job runner initialized", "level": "INFO", "name": "livekit.agents", "tid": 21752, "elapsed_time": 0.06, "timestamp": "2025-07-23T08:59:09.697199+00:00"}
{"message": "job runner initialized", "level": "INFO", "name": "livekit.agents", "tid": 40352, "elapsed_time": 0.06, "timestamp": "2025-07-23T08:59:09.697199+00:00"}
{"message": "job runner initialized", "level": "INFO", "name": "livekit.agents", "tid": 24228, "elapsed_time": 0.06, "timestamp": "2025-07-23T08:59:09.698177+00:00"}
{"message": "job runner initialized", "level": "INFO", "name": "livekit.agents", "tid": 5636, "elapsed_time": 0.05, "timestamp": "2025-07-23T08:59:09.699129+00:00"}
{"message": "job runner initialized", "level": "INFO", "name": "livekit.agents", "tid": 14744, "elapsed_time": 0.06, "timestamp": "2025-07-23T08:59:09.699129+00:00"}
{"message": "job runner initialized", "level": "INFO", "name": "livekit.agents", "tid": 34576, "elapsed_time": 0.05, "timestamp": "2025-07-23T08:59:09.700088+00:00"}
{"message": "job runner initialized", "level": "INFO", "name": "livekit.agents", "tid": 7728, "elapsed_time": 0.05, "timestamp": "2025-07-23T08:59:09.701165+00:00"}
{"message": "job runner initialized", "level": "INFO", "name": "livekit.agents", "tid": 16664, "elapsed_time": 0.05, "timestamp": "2025-07-23T08:59:09.702465+00:00"}
{"message": "job runner initialized", "level": "INFO", "name": "livekit.agents", "tid": 37012, "elapsed_time": 0.05, "timestamp": "2025-07-23T08:59:09.702465+00:00"}
{"message": "see tracing information at http://localhost:50542/debug", "level": "INFO", "name": "livekit.agents", "timestamp": "2025-07-23T08:59:09.705486+00:00"}
{"message": "registered worker", "level": "INFO", "name": "livekit.agents", "id": "AW_zno5JkSSUkZ3", "url": "wss://pamtestdrive-euxn3osq.livekit.cloud", "region": "Germany", "protocol": 16, "timestamp": "2025-07-23T08:59:10.133507+00:00"}
{"message": "draining worker", "level": "INFO", "name": "livekit.agents", "id": "AW_zno5JkSSUkZ3", "timeout": 1800, "timestamp": "2025-07-23T09:08:45.452485+00:00"}
{"message": "shutting down worker", "level": "INFO", "name": "livekit.agents", "id": "AW_zno5JkSSUkZ3", "timestamp": "2025-07-23T09:08:45.454479+00:00"}
{"message": "DEBUG: Node 18 - config: {'id': 'send_information_condition_2', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Person declined to provide their email or seems uninterested in receiving information', 'next_node': 'end_declined', 'confidence_threshold': 0.8}, 'source_node': 'send_information'}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.580115+00:00"}
2025-07-23 10:59:10,582 - workflow-agent - INFO - DEBUG: Node 19 FULL CONTENT: {'id': 'end_call-1752586097416', 'name': 'End Callback', 'type': 'end_call', 'config': {'id': 'end_callback', 'custom_data': {}, 'save_recording': False, 'email_recipient': '', 'goodbye_message': "Perfect! I'll call you back at {callback_time}. Have a great day!", 'save_transcript': True, 'call_disposition': 'completed', 'send_summary_email': False, 'extracted_variables': [{'name': 'call_outcome', 'type': 'string', 'description': 'Final call outcome', 'extraction_prompt': 'Final call outcome'}, {'name': 'callback_scheduled_for', 'type': 'string', 'description': 'Scheduled callback time', 'extraction_prompt': 'Scheduled callback time'}]}, 'position': {'x': -747.0542799629145, 'y': 657.924119385108}}
{"message": "DEBUG: Node 19 FULL CONTENT: {'id': 'end_call-1752586097416', 'name': 'End Callback', 'type': 'end_call', 'config': {'id': 'end_callback', 'custom_data': {}, 'save_recording': False, 'email_recipient': '', 'goodbye_message': \"Perfect! I'll call you back at {callback_time}. Have a great day!\", 'save_transcript': True, 'call_disposition': 'completed', 'send_summary_email': False, 'extracted_variables': [{'name': 'call_outcome', 'type': 'string', 'description': 'Final call outcome', 'extraction_prompt': 'Final call outcome'}, {'name': 'callback_scheduled_for', 'type': 'string', 'description': 'Scheduled callback time', 'extraction_prompt': 'Scheduled callback time'}]}, 'position': {'x': -747.0542799629145, 'y': 657.924119385108}}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.582598+00:00"}
2025-07-23 10:59:10,584 - workflow-agent - INFO - DEBUG: Node 19 - id: 'end_call-1752586097416', type: 'end_call', name: 'End Callback'
{"message": "DEBUG: Node 19 - id: 'end_call-1752586097416', type: 'end_call', name: 'End Callback'", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.584119+00:00"}
2025-07-23 10:59:10,588 - workflow-agent - INFO - DEBUG: Node 19 - config: {'id': 'end_callback', 'custom_data': {}, 'save_recording': False, 'email_recipient': '', 'goodbye_message': "Perfect! I'll call you back at {callback_time}. Have a great day!", 'save_transcript': True, 'call_disposition': 'completed', 'send_summary_email': False, 'extracted_variables': [{'name': 'call_outcome', 'type': 'string', 'description': 'Final call outcome', 'extraction_prompt': 'Final call outcome'}, {'name': 'callback_scheduled_for', 'type': 'string', 'description': 'Scheduled callback time', 'extraction_prompt': 'Scheduled callback time'}]}
{"message": "DEBUG: Node 19 - config: {'id': 'end_callback', 'custom_data': {}, 'save_recording': False, 'email_recipient': '', 'goodbye_message': \"Perfect! I'll call you back at {callback_time}. Have a great day!\", 'save_transcript': True, 'call_disposition': 'completed', 'send_summary_email': False, 'extracted_variables': [{'name': 'call_outcome', 'type': 'string', 'description': 'Final call outcome', 'extraction_prompt': 'Final call outcome'}, {'name': 'callback_scheduled_for', 'type': 'string', 'description': 'Scheduled callback time', 'extraction_prompt': 'Scheduled callback time'}]}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.588142+00:00"}
2025-07-23 10:59:10,591 - workflow-agent - INFO - DEBUG: Node 20 FULL CONTENT: {'id': 'end_call-1752586102371', 'name': 'End Declined', 'type': 'end_call', 'config': {'id': 'end_declined', 'custom_data': {}, 'save_recording': False, 'email_recipient': '', 'goodbye_message': 'Thank you for your time. Have a great day!', 'save_transcript': True, 'call_disposition': 'completed', 'send_summary_email': False, 'extracted_variables': [{'name': 'call_outcome', 'type': 'string', 'description': 'Final call outcome', 'extraction_prompt': 'Final call outcome'}, {'name': 'decline_reason', 'type': 'string', 'description': 'Reason for declining', 'extraction_prompt': 'Reason for declining'}]}, 'position': {'x': 667.7410507582531, 'y': 1363.7408872996832}}
{"message": "DEBUG: Node 20 FULL CONTENT: {'id': 'end_call-1752586102371', 'name': 'End Declined', 'type': 'end_call', 'config': {'id': 'end_declined', 'custom_data': {}, 'save_recording': False, 'email_recipient': '', 'goodbye_message': 'Thank you for your time. Have a great day!', 'save_transcript': True, 'call_disposition': 'completed', 'send_summary_email': False, 'extracted_variables': [{'name': 'call_outcome', 'type': 'string', 'description': 'Final call outcome', 'extraction_prompt': 'Final call outcome'}, {'name': 'decline_reason', 'type': 'string', 'description': 'Reason for declining', 'extraction_prompt': 'Reason for declining'}]}, 'position': {'x': 667.7410507582531, 'y': 1363.7408872996832}}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.591155+00:00"}
2025-07-23 10:59:10,594 - workflow-agent - INFO - DEBUG: Node 20 - id: 'end_call-1752586102371', type: 'end_call', name: 'End Declined'
{"message": "DEBUG: Node 20 - id: 'end_call-1752586102371', type: 'end_call', name: 'End Declined'", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.594260+00:00"}
2025-07-23 10:59:10,596 - workflow-agent - INFO - DEBUG: Node 20 - config: {'id': 'end_declined', 'custom_data': {}, 'save_recording': False, 'email_recipient': '', 'goodbye_message': 'Thank you for your time. Have a great day!', 'save_transcript': True, 'call_disposition': 'completed', 'send_summary_email': False, 'extracted_variables': [{'name': 'call_outcome', 'type': 'string', 'description': 'Final call outcome', 'extraction_prompt': 'Final call outcome'}, {'name': 'decline_reason', 'type': 'string', 'description': 'Reason for declining', 'extraction_prompt': 'Reason for declining'}]}
{"message": "DEBUG: Node 20 - config: {'id': 'end_declined', 'custom_data': {}, 'save_recording': False, 'email_recipient': '', 'goodbye_message': 'Thank you for your time. Have a great day!', 'save_transcript': True, 'call_disposition': 'completed', 'send_summary_email': False, 'extracted_variables': [{'name': 'call_outcome', 'type': 'string', 'description': 'Final call outcome', 'extraction_prompt': 'Final call outcome'}, {'name': 'decline_reason', 'type': 'string', 'description': 'Reason for declining', 'extraction_prompt': 'Reason for declining'}]}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.596263+00:00"}
2025-07-23 10:59:10,598 - workflow-agent - INFO - DEBUG: Node 21 FULL CONTENT: {'id': 'app_action-1752586209057', 'name': 'Create Calendar Event', 'type': 'app_action', 'config': {'id': 'create_calendar_event', 'data': {'app_name': 'google_calendar', 'action_type': 'create_event', 'action_config': {'calendar_id': 'primary', 'duration_minutes': 60}, 'field_mappings': {'summary': 'Consultation with {contact_name}', 'attendees': ['{contact_email}'], 'start_time': '{selected_appointment_time}', 'description': 'Sales consultation scheduled via PAM'}}, 'app_name': '', 'action_type': '', 'action_config': {}, 'field_mappings': {}, 'user_connection_id': '', 'extracted_variables': [{'name': 'appointment_booked', 'type': 'boolean', 'description': 'Appointment successfully booked', 'extraction_prompt': 'Appointment successfully booked'}]}, 'position': {'x': -931.7621809606596, 'y': 1347.8657791544829}}
{"message": "DEBUG: Node 21 FULL CONTENT: {'id': 'app_action-1752586209057', 'name': 'Create Calendar Event', 'type': 'app_action', 'config': {'id': 'create_calendar_event', 'data': {'app_name': 'google_calendar', 'action_type': 'create_event', 'action_config': {'calendar_id': 'primary', 'duration_minutes': 60}, 'field_mappings': {'summary': 'Consultation with {contact_name}', 'attendees': ['{contact_email}'], 'start_time': '{selected_appointment_time}', 'description': 'Sales consultation scheduled via PAM'}}, 'app_name': '', 'action_type': '', 'action_config': {}, 'field_mappings': {}, 'user_connection_id': '', 'extracted_variables': [{'name': 'appointment_booked', 'type': 'boolean', 'description': 'Appointment successfully booked', 'extraction_prompt': 'Appointment successfully booked'}]}, 'position': {'x': -931.7621809606596, 'y': 1347.8657791544829}}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.598795+00:00"}
2025-07-23 10:59:10,599 - workflow-agent - INFO - DEBUG: Node 21 - id: 'app_action-1752586209057', type: 'app_action', name: 'Create Calendar Event'
{"message": "DEBUG: Node 21 - id: 'app_action-1752586209057', type: 'app_action', name: 'Create Calendar Event'", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.599792+00:00"}
2025-07-23 10:59:10,602 - workflow-agent - INFO - DEBUG: Node 21 - config: {'id': 'create_calendar_event', 'data': {'app_name': 'google_calendar', 'action_type': 'create_event', 'action_config': {'calendar_id': 'primary', 'duration_minutes': 60}, 'field_mappings': {'summary': 'Consultation with {contact_name}', 'attendees': ['{contact_email}'], 'start_time': '{selected_appointment_time}', 'description': 'Sales consultation scheduled via PAM'}}, 'app_name': '', 'action_type': '', 'action_config': {}, 'field_mappings': {}, 'user_connection_id': '', 'extracted_variables': [{'name': 'appointment_booked', 'type': 'boolean', 'description': 'Appointment successfully booked', 'extraction_prompt': 'Appointment successfully booked'}]}
{"message": "DEBUG: Node 21 - config: {'id': 'create_calendar_event', 'data': {'app_name': 'google_calendar', 'action_type': 'create_event', 'action_config': {'calendar_id': 'primary', 'duration_minutes': 60}, 'field_mappings': {'summary': 'Consultation with {contact_name}', 'attendees': ['{contact_email}'], 'start_time': '{selected_appointment_time}', 'description': 'Sales consultation scheduled via PAM'}}, 'app_name': '', 'action_type': '', 'action_config': {}, 'field_mappings': {}, 'user_connection_id': '', 'extracted_variables': [{'name': 'appointment_booked', 'type': 'boolean', 'description': 'Appointment successfully booked', 'extraction_prompt': 'Appointment successfully booked'}]}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.602798+00:00"}
2025-07-23 10:59:10,604 - workflow-agent - INFO - DEBUG: Node 22 FULL CONTENT: {'id': 'conversation-1752586729436', 'name': 'Confirm Appointment', 'type': 'conversation', 'config': {'id': 'confirm_appointment', 'prompt': "The calendar event has been successfully created. Confirm the appointment details with enthusiasm. Mention the date, time, and format of the meeting. Let them know they'll receive a calendar invite shortly. Ask if they have any specific topics they'd like to discuss or questions they want addressed during the consultation. Set clear expectations for what the meeting will cover and how long it will take.", 'language': 'en', 'temperature': 0.7, 'global_access': False, 'system_prompt': '', 'silence_timeout': 10, 'extracted_variables': [{'name': 'appointment_confirmed', 'type': 'boolean', 'description': 'Appointment details confirmed with customer', 'extraction_prompt': 'Appointment details confirmed with customer'}], 'interruption_enabled': True, 'transition_condition': '', 'transcription_enabled': True, 'transition_condition_enabled': False}, 'position': {'x': -981.7639769305733, 'y': 1813.2009923352334}}
{"message": "DEBUG: Node 22 FULL CONTENT: {'id': 'conversation-1752586729436', 'name': 'Confirm Appointment', 'type': 'conversation', 'config': {'id': 'confirm_appointment', 'prompt': \"The calendar event has been successfully created. Confirm the appointment details with enthusiasm. Mention the date, time, and format of the meeting. Let them know they'll receive a calendar invite shortly. Ask if they have any specific topics they'd like to discuss or questions they want addressed during the consultation. Set clear expectations for what the meeting will cover and how long it will take.\", 'language': 'en', 'temperature': 0.7, 'global_access': False, 'system_prompt': '', 'silence_timeout': 10, 'extracted_variables': [{'name': 'appointment_confirmed', 'type': 'boolean', 'description': 'Appointment details confirmed with customer', 'extraction_prompt': 'Appointment details confirmed with customer'}], 'interruption_enabled': True, 'transition_condition': '', 'transcription_enabled': True, 'transition_condition_enabled': False}, 'position': {'x': -981.7639769305733, 'y': 1813.2009923352334}}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.604867+00:00"}
2025-07-23 10:59:10,607 - workflow-agent - INFO - DEBUG: Node 22 - id: 'conversation-1752586729436', type: 'conversation', name: 'Confirm Appointment'
{"message": "DEBUG: Node 22 - id: 'conversation-1752586729436', type: 'conversation', name: 'Confirm Appointment'", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.607014+00:00"}
2025-07-23 10:59:10,609 - workflow-agent - INFO - DEBUG: Node 22 - config: {'id': 'confirm_appointment', 'prompt': "The calendar event has been successfully created. Confirm the appointment details with enthusiasm. Mention the date, time, and format of the meeting. Let them know they'll receive a calendar invite shortly. Ask if they have any specific topics they'd like to discuss or questions they want addressed during the consultation. Set clear expectations for what the meeting will cover and how long it will take.", 'language': 'en', 'temperature': 0.7, 'global_access': False, 'system_prompt': '', 'silence_timeout': 10, 'extracted_variables': [{'name': 'appointment_confirmed', 'type': 'boolean', 'description': 'Appointment details confirmed with customer', 'extraction_prompt': 'Appointment details confirmed with customer'}], 'interruption_enabled': True, 'transition_condition': '', 'transcription_enabled': True, 'transition_condition_enabled': False}
{"message": "DEBUG: Node 22 - config: {'id': 'confirm_appointment', 'prompt': \"The calendar event has been successfully created. Confirm the appointment details with enthusiasm. Mention the date, time, and format of the meeting. Let them know they'll receive a calendar invite shortly. Ask if they have any specific topics they'd like to discuss or questions they want addressed during the consultation. Set clear expectations for what the meeting will cover and how long it will take.\", 'language': 'en', 'temperature': 0.7, 'global_access': False, 'system_prompt': '', 'silence_timeout': 10, 'extracted_variables': [{'name': 'appointment_confirmed', 'type': 'boolean', 'description': 'Appointment details confirmed with customer', 'extraction_prompt': 'Appointment details confirmed with customer'}], 'interruption_enabled': True, 'transition_condition': '', 'transcription_enabled': True, 'transition_condition_enabled': False}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.609249+00:00"}
2025-07-23 10:59:10,612 - workflow-agent - INFO - DEBUG: Node 23 FULL CONTENT: {'id': 'condition-1752586789213', 'name': 'Create Calendar Event Condition 2', 'type': 'condition', 'config': {'id': 'create_calendar_event_condition_2', 'prompt': 'Calendar event creation failed or encountered an error', 'source_node': 'create_calendar_event'}, 'position': {'x': -764.0953358329234, 'y': 1530.225098242719}}
{"message": "DEBUG: Node 23 FULL CONTENT: {'id': 'condition-1752586789213', 'name': 'Create Calendar Event Condition 2', 'type': 'condition', 'config': {'id': 'create_calendar_event_condition_2', 'prompt': 'Calendar event creation failed or encountered an error', 'source_node': 'create_calendar_event'}, 'position': {'x': -764.0953358329234, 'y': 1530.225098242719}}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.612783+00:00"}
2025-07-23 10:59:10,614 - workflow-agent - INFO - DEBUG: Node 23 - id: 'condition-1752586789213', type: 'condition', name: 'Create Calendar Event Condition 2'
{"message": "DEBUG: Node 23 - id: 'condition-1752586789213', type: 'condition', name: 'Create Calendar Event Condition 2'", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.614808+00:00"}
2025-07-23 10:59:10,615 - workflow-agent - INFO - DEBUG: Node 23 - config: {'id': 'create_calendar_event_condition_2', 'prompt': 'Calendar event creation failed or encountered an error', 'source_node': 'create_calendar_event'}
{"message": "DEBUG: Node 23 - config: {'id': 'create_calendar_event_condition_2', 'prompt': 'Calendar event creation failed or encountered an error', 'source_node': 'create_calendar_event'}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.615808+00:00"}
2025-07-23 10:59:10,616 - workflow-agent - INFO - DEBUG: Node 24 FULL CONTENT: {'id': 'condition-1752586879584', 'name': 'Confirm Appointment Condition 1', 'type': 'condition', 'config': {'id': 'confirm_appointment_condition_1', 'prompt': 'Appointment has been confirmed and conversation wrapped up successfully', 'source_node': 'confirm_appointment'}, 'position': {'x': -1011.2849335976309, 'y': 1938.9218754961776}}
{"message": "DEBUG: Node 24 FULL CONTENT: {'id': 'condition-1752586879584', 'name': 'Confirm Appointment Condition 1', 'type': 'condition', 'config': {'id': 'confirm_appointment_condition_1', 'prompt': 'Appointment has been confirmed and conversation wrapped up successfully', 'source_node': 'confirm_appointment'}, 'position': {'x': -1011.2849335976309, 'y': 1938.9218754961776}}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.616808+00:00"}
2025-07-23 10:59:10,618 - workflow-agent - INFO - DEBUG: Node 24 - id: 'condition-1752586879584', type: 'condition', name: 'Confirm Appointment Condition 1'
{"message": "DEBUG: Node 24 - id: 'condition-1752586879584', type: 'condition', name: 'Confirm Appointment Condition 1'", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.618947+00:00"}
2025-07-23 10:59:10,619 - workflow-agent - INFO - DEBUG: Node 24 - config: {'id': 'confirm_appointment_condition_1', 'prompt': 'Appointment has been confirmed and conversation wrapped up successfully', 'source_node': 'confirm_appointment'}
{"message": "DEBUG: Node 24 - config: {'id': 'confirm_appointment_condition_1', 'prompt': 'Appointment has been confirmed and conversation wrapped up successfully', 'source_node': 'confirm_appointment'}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.619973+00:00"}
2025-07-23 10:59:10,621 - workflow-agent - INFO - DEBUG: Node 25 FULL CONTENT: {'id': 'end_call-1752586890630', 'name': 'End Success', 'type': 'end_call', 'config': {'id': 'end_success', 'custom_data': {}, 'save_recording': False, 'email_recipient': '', 'goodbye_message': 'Thank you! Looking forward to speaking with you on {appointment_date}. Have a great day!', 'save_transcript': True, 'call_disposition': 'completed', 'send_summary_email': False, 'extracted_variables': [{'name': 'call_outcome', 'type': 'string', 'description': 'Final call outcome', 'extraction_prompt': 'Final call outcome'}, {'name': 'success', 'type': 'boolean', 'description': 'Call was successful', 'extraction_prompt': 'Call was successful'}, {'name': 'appointment_date', 'type': 'string', 'description': 'Scheduled appointment date', 'extraction_prompt': 'Scheduled appointment date'}, {'name': 'appointment_time', 'type': 'string', 'description': 'Scheduled appointment time', 'extraction_prompt': 'Scheduled appointment time'}]}, 'position': {'x': -1000.4160641634687, 'y': 2109.1766822906798}}
{"message": "DEBUG: Node 25 FULL CONTENT: {'id': 'end_call-1752586890630', 'name': 'End Success', 'type': 'end_call', 'config': {'id': 'end_success', 'custom_data': {}, 'save_recording': False, 'email_recipient': '', 'goodbye_message': 'Thank you! Looking forward to speaking with you on {appointment_date}. Have a great day!', 'save_transcript': True, 'call_disposition': 'completed', 'send_summary_email': False, 'extracted_variables': [{'name': 'call_outcome', 'type': 'string', 'description': 'Final call outcome', 'extraction_prompt': 'Final call outcome'}, {'name': 'success', 'type': 'boolean', 'description': 'Call was successful', 'extraction_prompt': 'Call was successful'}, {'name': 'appointment_date', 'type': 'string', 'description': 'Scheduled appointment date', 'extraction_prompt': 'Scheduled appointment date'}, {'name': 'appointment_time', 'type': 'string', 'description': 'Scheduled appointment time', 'extraction_prompt': 'Scheduled appointment time'}]}, 'position': {'x': -1000.4160641634687, 'y': 2109.1766822906798}}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.621972+00:00"}
2025-07-23 10:59:10,623 - workflow-agent - INFO - DEBUG: Node 25 - id: 'end_call-1752586890630', type: 'end_call', name: 'End Success'
{"message": "DEBUG: Node 25 - id: 'end_call-1752586890630', type: 'end_call', name: 'End Success'", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.623980+00:00"}
2025-07-23 10:59:10,625 - workflow-agent - INFO - DEBUG: Node 25 - config: {'id': 'end_success', 'custom_data': {}, 'save_recording': False, 'email_recipient': '', 'goodbye_message': 'Thank you! Looking forward to speaking with you on {appointment_date}. Have a great day!', 'save_transcript': True, 'call_disposition': 'completed', 'send_summary_email': False, 'extracted_variables': [{'name': 'call_outcome', 'type': 'string', 'description': 'Final call outcome', 'extraction_prompt': 'Final call outcome'}, {'name': 'success', 'type': 'boolean', 'description': 'Call was successful', 'extraction_prompt': 'Call was successful'}, {'name': 'appointment_date', 'type': 'string', 'description': 'Scheduled appointment date', 'extraction_prompt': 'Scheduled appointment date'}, {'name': 'appointment_time', 'type': 'string', 'description': 'Scheduled appointment time', 'extraction_prompt': 'Scheduled appointment time'}]} 
{"message": "DEBUG: Node 25 - config: {'id': 'end_success', 'custom_data': {}, 'save_recording': False, 'email_recipient': '', 'goodbye_message': 'Thank you! Looking forward to speaking with you on {appointment_date}. Have a great day!', 'save_transcript': True, 'call_disposition': 'completed', 'send_summary_email': False, 'extracted_variables': [{'name': 'call_outcome', 'type': 'string', 'description': 'Final call outcome', 'extraction_prompt': 'Final call outcome'}, {'name': 'success', 'type': 'boolean', 'description': 'Call was successful', 'extraction_prompt': 'Call was successful'}, {'name': 'appointment_date', 'type': 'string', 'description': 'Scheduled appointment date', 'extraction_prompt': 'Scheduled appointment date'}, {'name': 'appointment_time', 'type': 'string', 'description': 'Scheduled appointment time', 'extraction_prompt': 'Scheduled appointment time'}]}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.625974+00:00"}
2025-07-23 10:59:10,627 - workflow-agent - INFO - DEBUG: Node 26 FULL CONTENT: {'id': 'tools-1752586942596', 'name': 'Capture Email', 'type': 'tools', 'config': {'id': 'capture_email', 'app_name': 'google_calendar', 'parameters': {'email': '{contact_email}', 'notes': '{conversation_summary}', 'source': 'phone_call', 'status': 'info_requested', 'contact_name': '{contact_name}', 'phone_number': '{phone_number}', 'interest_level': '{interest_level}', 'qualification_score': '{qualification_score}'}, 'webhook_url': 'https://hook.us1.make.com/abc123def456', 'selected_app_id': 'ebce972a-6206-4708-8557-90bfd816ad14', 'selected_app_name': 'Google Calendar', 'variable_mappings': {}, 'selected_action_id': '', 'extracted_variables': [{'name': 'email_captured', 'type': 'boolean', 'description': 'Customer email address captured', 'extraction_prompt': 'Customer email address captured'}], 'selected_action_name': '', 'selected_action_description': ''}, 'position': {'x': 212.10097682093254, 'y': 1877.1337109778142}}
{"message": "DEBUG: Node 26 FULL CONTENT: {'id': 'tools-1752586942596', 'name': 'Capture Email', 'type': 'tools', 'config': {'id': 'capture_email', 'app_name': 'google_calendar', 'parameters': {'email': '{contact_email}', 'notes': '{conversation_summary}', 'source': 'phone_call', 'status': 'info_requested', 'contact_name': '{contact_name}', 'phone_number': '{phone_number}', 'interest_level': '{interest_level}', 'qualification_score': '{qualification_score}'}, 'webhook_url': 'https://hook.us1.make.com/abc123def456', 'selected_app_id': 'ebce972a-6206-4708-8557-90bfd816ad14', 'selected_app_name': 'Google Calendar', 'variable_mappings': {}, 'selected_action_id': '', 'extracted_variables': [{'name': 'email_captured', 'type': 'boolean', 'description': 'Customer email address captured', 'extraction_prompt': 'Customer email address captured'}], 'selected_action_name': '', 'selected_action_description': ''}, 'position': {'x': 212.10097682093254, 'y': 1877.1337109778142}}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.627969+00:00"}
2025-07-23 10:59:10,628 - workflow-agent - INFO - DEBUG: Node 26 - id: 'tools-1752586942596', type: 'tools', name: 'Capture Email'
{"message": "DEBUG: Node 26 - id: 'tools-1752586942596', type: 'tools', name: 'Capture Email'", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.628969+00:00"}
2025-07-23 10:59:10,629 - workflow-agent - INFO - DEBUG: Node 26 - config: {'id': 'capture_email', 'app_name': 'google_calendar', 'parameters': {'email': '{contact_email}', 'notes': '{conversation_summary}', 'source': 'phone_call', 'status': 'info_requested', 'contact_name': '{contact_name}', 'phone_number': '{phone_number}', 'interest_level': '{interest_level}', 'qualification_score': '{qualification_score}'}, 'webhook_url': 'https://hook.us1.make.com/abc123def456', 'selected_app_id': 'ebce972a-6206-4708-8557-90bfd816ad14', 'selected_app_name': 'Google Calendar', 'variable_mappings': {}, 'selected_action_id': '', 'extracted_variables': [{'name': 'email_captured', 'type': 'boolean', 'description': 'Customer email address captured', 'extraction_prompt': 'Customer email address captured'}], 'selected_action_name': '', 'selected_action_description': ''}
{"message": "DEBUG: Node 26 - config: {'id': 'capture_email', 'app_name': 'google_calendar', 'parameters': {'email': '{contact_email}', 'notes': '{conversation_summary}', 'source': 'phone_call', 'status': 'info_requested', 'contact_name': '{contact_name}', 'phone_number': '{phone_number}', 'interest_level': '{interest_level}', 'qualification_score': '{qualification_score}'}, 'webhook_url': 'https://hook.us1.make.com/abc123def456', 'selected_app_id': 'ebce972a-6206-4708-8557-90bfd816ad14', 'selected_app_name': 'Google Calendar', 'variable_mappings': {}, 'selected_action_id': '', 'extracted_variables': [{'name': 'email_captured', 'type': 'boolean', 'description': 'Customer email address captured', 'extraction_prompt': 'Customer email address captured'}], 'selected_action_name': '', 'selected_action_description': ''}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.629972+00:00"}  
2025-07-23 10:59:10,630 - workflow-agent - INFO - DEBUG: Node 27 FULL CONTENT: {'id': 'condition-1752586959602', 'name': 'Condition Node', 'type': 'condition', 'config': {'prompt': 'email captured'}, 'position': {'x': 207.1067512553629, 'y': 2061.4359900186564}}
{"message": "DEBUG: Node 27 FULL CONTENT: {'id': 'condition-1752586959602', 'name': 'Condition Node', 'type': 'condition', 'config': {'prompt': 'email captured'}, 'position': {'x': 207.1067512553629, 'y': 2061.4359900186564}}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.630978+00:00"}
2025-07-23 10:59:10,632 - workflow-agent - INFO - DEBUG: Node 27 - id: 'condition-1752586959602', type: 'condition', name: 'Condition Node'
{"message": "DEBUG: Node 27 - id: 'condition-1752586959602', type: 'condition', name: 'Condition Node'", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.633000+00:00"}
2025-07-23 10:59:10,632 - workflow-agent - INFO - DEBUG: Node 27 - config: {'prompt': 'email captured'}
{"message": "DEBUG: Node 27 - config: {'prompt': 'email captured'}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.633000+00:00"}
2025-07-23 10:59:10,633 - workflow-agent - INFO - DEBUG: Node 28 FULL CONTENT: {'id': 'end_call-1752586990804', 'name': 'End Info Sent', 'type': 'end_call', 'config': {'id': 'end_info_sent', 'custom_data': {}, 'save_recording': False, 'email_recipient': '', 'goodbye_message': "Great! I'll send that information right over. Feel free to call us with any questions. Have a wonderful day!", 'save_transcript': True, 'call_disposition': 'completed', 'send_summary_email': False, 'extracted_variables': [{'name': 'call_outcome', 'type': 'string', 'description': 'Final call outcome', 'extraction_prompt': 'Final call outcome'}, {'name': 'follow_up_required', 'type': 'boolean', 'description': 'Follow-up is required', 'extraction_prompt': 'Follow-up is required'}]}, 'position': {'x': 201.81395080636105, 'y': 2189.0828212015595}}
{"message": "DEBUG: Node 28 FULL CONTENT: {'id': 'end_call-1752586990804', 'name': 'End Info Sent', 'type': 'end_call', 'config': {'id': 'end_info_sent', 'custom_data': {}, 'save_recording': False, 'email_recipient': '', 'goodbye_message': \"Great! I'll send that information right over. Feel free to call us with any questions. Have a wonderful day!\", 'save_transcript': True, 'call_disposition': 'completed', 'send_summary_email': False, 'extracted_variables': [{'name': 'call_outcome', 'type': 'string', 'description': 'Final call outcome', 'extraction_prompt': 'Final call outcome'}, {'name': 'follow_up_required', 'type': 'boolean', 'description': 'Follow-up is required', 'extraction_prompt': 'Follow-up is required'}]}, 'position': {'x': 201.81395080636105, 'y': 2189.0828212015595}}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.633993+00:00"}
2025-07-23 10:59:10,636 - workflow-agent - INFO - DEBUG: Node 28 - id: 'end_call-1752586990804', type: 'end_call', name: 'End Info Sent'
{"message": "DEBUG: Node 28 - id: 'end_call-1752586990804', type: 'end_call', name: 'End Info Sent'", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.636002+00:00"}
2025-07-23 10:59:10,637 - workflow-agent - INFO - DEBUG: Node 28 - config: {'id': 'end_info_sent', 'custom_data': {}, 'save_recording': False, 'email_recipient': '', 'goodbye_message': "Great! I'll send that information right over. Feel free to call us with any questions. Have a wonderful day!", 'save_transcript': True, 'call_disposition': 'completed', 'send_summary_email': False, 'extracted_variables': [{'name': 'call_outcome', 'type': 'string', 'description': 'Final call outcome', 'extraction_prompt': 'Final call outcome'}, {'name': 'follow_up_required', 'type': 'boolean', 'description': 'Follow-up is required', 'extraction_prompt': 'Follow-up is required'}]}
{"message": "DEBUG: Node 28 - config: {'id': 'end_info_sent', 'custom_data': {}, 'save_recording': False, 'email_recipient': '', 'goodbye_message': \"Great! I'll send that information right over. Feel free to call us with any questions. Have a wonderful day!\", 'save_transcript': True, 'call_disposition': 'completed', 'send_summary_email': False, 'extracted_variables': [{'name': 'call_outcome', 'type': 'string', 'description': 'Final call outcome', 'extraction_prompt': 'Final call outcome'}, {'name': 'follow_up_required', 'type': 'boolean', 'description': 'Follow-up is required', 'extraction_prompt': 'Follow-up is required'}]}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.637002+00:00"}
2025-07-23 10:59:10,638 - workflow-agent - INFO - DEBUG: Node 29 FULL CONTENT: {'id': 'end_call-1752587058511', 'name': 'End Declined', 'type': 'end_call', 'config': {'id': 'end_declined', 'custom_data': {}, 'save_recording': False, 'email_recipient': '', 'goodbye_message': 'Thank you for your time. Have a great day!', 'save_transcript': True, 'call_disposition': 'completed', 'send_summary_email': False, 'extracted_variables': [{'name': 'call_outcome', 'type': 'string', 'description': 'Final call outcome', 'extraction_prompt': 'Final call outcome'}, {'name': 'decline_reason', 'type': 'string', 'description': 'Reason for declining', 'extraction_prompt': 'Reason for declining'}]}, 'position': {'x': 860.3817328453051, 'y': 1807.0939093564982}}
{"message": "DEBUG: Node 29 FULL CONTENT: {'id': 'end_call-1752587058511', 'name': 'End Declined', 'type': 'end_call', 'config': {'id': 'end_declined', 'custom_data': {}, 'save_recording': False, 'email_recipient': '', 'goodbye_message': 'Thank you for your time. Have a great day!', 'save_transcript': True, 'call_disposition': 'completed', 'send_summary_email': False, 'extracted_variables': [{'name': 'call_outcome', 'type': 'string', 'description': 'Final call outcome', 'extraction_prompt': 'Final call outcome'}, {'name': 'decline_reason', 'type': 'string', 'description': 'Reason for declining', 'extraction_prompt': 'Reason for declining'}]}, 'position': {'x': 860.3817328453051, 'y': 1807.0939093564982}}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.638001+00:00"}
2025-07-23 10:59:10,639 - workflow-agent - INFO - DEBUG: Node 29 - id: 'end_call-1752587058511', type: 'end_call', name: 'End Declined'
{"message": "DEBUG: Node 29 - id: 'end_call-1752587058511', type: 'end_call', name: 'End Declined'", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.639835+00:00"}
2025-07-23 10:59:10,640 - workflow-agent - INFO - DEBUG: Node 29 - config: {'id': 'end_declined', 'custom_data': {}, 'save_recording': False, 'email_recipient': '', 'goodbye_message': 'Thank you for your time. Have a great day!', 'save_transcript': True, 'call_disposition': 'completed', 'send_summary_email': False, 'extracted_variables': [{'name': 'call_outcome', 'type': 'string', 'description': 'Final call outcome', 'extraction_prompt': 'Final call outcome'}, {'name': 'decline_reason', 'type': 'string', 'description': 'Reason for declining', 'extraction_prompt': 'Reason for declining'}]}
{"message": "DEBUG: Node 29 - config: {'id': 'end_declined', 'custom_data': {}, 'save_recording': False, 'email_recipient': '', 'goodbye_message': 'Thank you for your time. Have a great day!', 'save_transcript': True, 'call_disposition': 'completed', 'send_summary_email': False, 'extracted_variables': [{'name': 'call_outcome', 'type': 'string', 'description': 'Final call outcome', 'extraction_prompt': 'Final call outcome'}, {'name': 'decline_reason', 'type': 'string', 'description': 'Reason for declining', 'extraction_prompt': 'Reason for declining'}]}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.640877+00:00"}
2025-07-23 10:59:10,643 - workflow-agent - INFO - DEBUG: Node 30 FULL CONTENT: {'id': 'tools-1752587100122', 'name': 'Schedule Callback Tool', 'type': 'tools', 'config': {'id': 'schedule_callback_tool', 'parameters': {'priority': 'medium', 'agent_notes': '{conversation_summary}', 'contact_name': '{contact_name}', 'phone_number': '{phone_number}', 'callback_time': '{preferred_callback_time}', 'callback_reason': 'customer_requested'}, 'webhook_url': 'https://hook.us1.make.com/callback789xyz', 'selected_app_id': '', 'selected_app_name': '', 'variable_mappings': {}, 'selected_action_id': '', 'extracted_variables': [{'name': 'callback_scheduled', 'type': 'boolean', 'description': 'Callback was successfully scheduled', 'extraction_prompt': 'Callback was successfully scheduled'}], 'selected_action_name': '', 'selected_action_description': ''}, 'position': {'x': -1299.6936738792808, 'y': 453.175693126387}}
{"message": "DEBUG: Node 30 FULL CONTENT: {'id': 'tools-1752587100122', 'name': 'Schedule Callback Tool', 'type': 'tools', 'config': {'id': 'schedule_callback_tool', 'parameters': {'priority': 'medium', 'agent_notes': '{conversation_summary}', 'contact_name': '{contact_name}', 'phone_number': '{phone_number}', 'callback_time': '{preferred_callback_time}', 'callback_reason': 'customer_requested'}, 'webhook_url': 'https://hook.us1.make.com/callback789xyz', 'selected_app_id': '', 'selected_app_name': '', 'variable_mappings': {}, 'selected_action_id': '', 'extracted_variables': [{'name': 'callback_scheduled', 'type': 'boolean', 'description': 'Callback was successfully scheduled', 'extraction_prompt': 'Callback was successfully scheduled'}], 'selected_action_name': '', 'selected_action_description': ''}, 'position': {'x': -1299.6936738792808, 'y': 453.175693126387}}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.643880+00:00"}
2025-07-23 10:59:10,644 - workflow-agent - INFO - DEBUG: Node 30 - id: 'tools-1752587100122', type: 'tools', name: 'Schedule Callback Tool'
{"message": "DEBUG: Node 30 - id: 'tools-1752587100122', type: 'tools', name: 'Schedule Callback Tool'", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.644861+00:00"}
2025-07-23 10:59:10,645 - workflow-agent - INFO - DEBUG: Node 30 - config: {'id': 'schedule_callback_tool', 'parameters': {'priority': 'medium', 'agent_notes': '{conversation_summary}', 'contact_name': '{contact_name}', 'phone_number': '{phone_number}', 'callback_time': '{preferred_callback_time}', 'callback_reason': 'customer_requested'}, 'webhook_url': 'https://hook.us1.make.com/callback789xyz', 'selected_app_id': '', 'selected_app_name': '', 'variable_mappings': {}, 'selected_action_id': '', 'extracted_variables': [{'name': 'callback_scheduled', 'type': 'boolean', 'description': 'Callback was successfully scheduled', 'extraction_prompt': 'Callback was successfully scheduled'}], 'selected_action_name': '', 'selected_action_description': ''}
{"message": "DEBUG: Node 30 - config: {'id': 'schedule_callback_tool', 'parameters': {'priority': 'medium', 'agent_notes': '{conversation_summary}', 'contact_name': '{contact_name}', 'phone_number': '{phone_number}', 'callback_time': '{preferred_callback_time}', 'callback_reason': 'customer_requested'}, 'webhook_url': 'https://hook.us1.make.com/callback789xyz', 'selected_app_id': '', 'selected_app_name': '', 'variable_mappings': {}, 'selected_action_id': '', 'extracted_variables': [{'name': 'callback_scheduled', 'type': 'boolean', 'description': 'Callback was successfully scheduled', 'extraction_prompt': 'Callback was successfully scheduled'}], 'selected_action_name': '', 'selected_action_description': ''}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.645875+00:00"}
2025-07-23 10:59:10,647 - workflow-agent - INFO - DEBUG: Node 31 FULL CONTENT: {'id': 'condition-1752587369230', 'name': 'Create Calendar Event Condition 1', 'type': 'condition', 'config': {'id': 'create_calendar_event_condition_1', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Calendar event was successfully created', 'next_node': 'confirm_appointment', 'confidence_threshold': 0.9}, 'source_node': 'create_calendar_event'}, 'position': {'x': -1149.0097523440525, 'y': 1584.6468586902927}}
{"message": "DEBUG: Node 31 FULL CONTENT: {'id': 'condition-1752587369230', 'name': 'Create Calendar Event Condition 1', 'type': 'condition', 'config': {'id': 'create_calendar_event_condition_1', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Calendar event was successfully created', 'next_node': 'confirm_appointment', 'confidence_threshold': 0.9}, 'source_node': 'create_calendar_event'}, 'position': {'x': -1149.0097523440525, 'y': 1584.6468586902927}}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.647399+00:00"}
2025-07-23 10:59:10,649 - workflow-agent - INFO - DEBUG: Node 31 - id: 'condition-1752587369230', type: 'condition', name: 'Create Calendar Event Condition 1'
{"message": "DEBUG: Node 31 - id: 'condition-1752587369230', type: 'condition', name: 'Create Calendar Event Condition 1'", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.649418+00:00"}
2025-07-23 10:59:10,650 - workflow-agent - INFO - DEBUG: Node 31 - config: {'id': 'create_calendar_event_condition_1', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Calendar event was successfully created', 'next_node': 'confirm_appointment', 'confidence_threshold': 0.9}, 'source_node': 'create_calendar_event'}
{"message": "DEBUG: Node 31 - config: {'id': 'create_calendar_event_condition_1', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Calendar event was successfully created', 'next_node': 'confirm_appointment', 'confidence_threshold': 0.9}, 'source_node': 'create_calendar_event'}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.650422+00:00"}
2025-07-23 10:59:10,652 - workflow-agent - INFO - ✅ DEBUG: Found entry node: Greeting (id: conversation-1752584446694)
{"message": "✅ DEBUG: Found entry node: Greeting (id: conversation-1752584446694)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.652425+00:00"}
2025-07-23 10:59:10,654 - workflow-agent - INFO - DEBUG: FULL entry node content: {'id': 'conversation-1752584446694', 'name': 'Greeting', 'type': 'conversation', 'config': {'id': 'greeting', 'prompt': "You are Lucy from Dunder Mifflin.You are making an outbound sales call to someone who previously inquired about your services. Your goal is to determine if this is a good time to talk. Be friendly and professional. Start by introducing yourself and your company, mention that you're following up on their inquiry, then ask if they have a few minutes to talk. Listen carefully to their response to gauge their availability and interest level. Extract any information about their current situation or needs they mention.", 'greeting': 'Hi this is Lucy from Dunder Mifflin', 'language': 'en', 'temperature': 0.7, 'global_access': False, 'system_prompt': 'Hi this is Pam from Dunder Mifflin', 'silence_timeout': 10, 'extracted_variables': [{'name': 'conversation_started', 'type': 'boolean', 'description': 'Conversation has started', 'extraction_prompt': 'Conversation has started'}, {'name': 'call_start_time', 'type': 'string', 'description': 'Timestamp when call started', 'extraction_prompt': 'Timestamp when call started'}], 'interruption_enabled': True, 'transition_condition': '', 'transcription_enabled': True, 'transition_condition_enabled': False}, 'position': {'x': 159.19974474711404, 'y': -406.435592953321}}
{"message": "DEBUG: FULL entry node content: {'id': 'conversation-1752584446694', 'name': 'Greeting', 'type': 'conversation', 'config': {'id': 'greeting', 'prompt': \"You are Lucy from Dunder Mifflin.You are making an outbound sales call to someone who previously inquired about your services. Your goal is to determine if this is a good time to talk. Be friendly and professional. Start by introducing yourself and your company, mention that you're following up on their inquiry, then ask if they have a few minutes to talk. Listen carefully to their response to gauge their availability and interest level. Extract any information about their current situation or needs they mention.\", 'greeting': 'Hi this is Lucy from Dunder Mifflin', 'language': 'en', 'temperature': 0.7, 'global_access': False, 'system_prompt': 'Hi this is Pam from Dunder Mifflin', 'silence_timeout': 10, 'extracted_variables': [{'name': 'conversation_started', 'type': 'boolean', 'description': 'Conversation has started', 'extraction_prompt': 'Conversation has started'}, {'name': 'call_start_time', 'type': 'string', 'description': 'Timestamp when call started', 'extraction_prompt': 'Timestamp when call started'}], 'interruption_enabled': True, 'transition_condition': '', 'transcription_enabled': True, 'transition_condition_enabled': False}, 'position': {'x': 159.19974474711404, 'y': -406.435592953321}}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.654430+00:00"}
2025-07-23 10:59:10,655 - workflow-agent - INFO - DEBUG: Entry node config keys: ['id', 'prompt', 'greeting', 'language', 'temperature', 'global_access', 'system_prompt', 'silence_timeout', 'extracted_variables', 'interruption_enabled', 'transition_condition', 'transcription_enabled', 'transition_condition_enabled']
{"message": "DEBUG: Entry node config keys: ['id', 'prompt', 'greeting', 'language', 'temperature', 'global_access', 'system_prompt', 'silence_timeout', 'extracted_variables', 'interruption_enabled', 'transition_condition', 'transcription_enabled', 'transition_condition_enabled']", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.655529+00:00"}
2025-07-23 10:59:10,657 - workflow-agent - INFO - DEBUG: FULL Entry node config content: {'id': 'greeting', 'prompt': "You are Lucy from Dunder Mifflin.You are making an outbound sales call to someone who previously inquired about your services. Your goal is to determine if this is a good time to talk. Be friendly and professional. Start by introducing yourself and your company, mention that you're following up on their inquiry, then ask if they have a few minutes to talk. Listen carefully to their response to gauge their availability and interest level. Extract any information about their current situation or needs they mention.", 'greeting': 'Hi this is Lucy from Dunder Mifflin', 'language': 'en', 'temperature': 0.7, 'global_access': False, 'system_prompt': 'Hi this is Pam from Dunder Mifflin', 'silence_timeout': 10, 'extracted_variables': [{'name': 'conversation_started', 'type': 'boolean', 'description': 'Conversation has started', 'extraction_prompt': 'Conversation has started'}, {'name': 'call_start_time', 'type': 'string', 'description': 'Timestamp when call started', 'extraction_prompt': 'Timestamp when call started'}], 'interruption_enabled': True, 'transition_condition': '', 'transcription_enabled': True, 'transition_condition_enabled': False}
{"message": "DEBUG: FULL Entry node config content: {'id': 'greeting', 'prompt': \"You are Lucy from Dunder Mifflin.You are making an outbound sales call to someone who previously inquired about your services. Your goal is to determine if this is a good time to talk. Be friendly and professional. Start by introducing yourself and your company, mention that you're following up on their inquiry, then ask if they have a few minutes to talk. Listen carefully to their response to gauge their availability and interest level. Extract any information about their current situation or needs they mention.\", 'greeting': 'Hi this is Lucy from Dunder Mifflin', 'language': 'en', 'temperature': 0.7, 'global_access': False, 'system_prompt': 'Hi this is Pam from Dunder Mifflin', 'silence_timeout': 10, 'extracted_variables': [{'name': 'conversation_started', 'type': 'boolean', 'description': 'Conversation has started', 'extraction_prompt': 'Conversation has started'}, {'name': 'call_start_time', 'type': 'string', 'description': 'Timestamp when call started', 'extraction_prompt': 'Timestamp when call started'}], 'interruption_enabled': True, 'transition_condition': '', 'transcription_enabled': True, 'transition_condition_enabled': False}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.657564+00:00"}
2025-07-23 10:59:10,659 - workflow-agent - INFO - DEBUG: Checking for 'greeting' field: Hi this is Lucy from Dunder Mifflin
{"message": "DEBUG: Checking for 'greeting' field: Hi this is Lucy from Dunder Mifflin", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.659554+00:00"}
2025-07-23 10:59:10,659 - workflow-agent - INFO - DEBUG: Checking for 'initial_message' field: None
{"message": "DEBUG: Checking for 'initial_message' field: None", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.659554+00:00"}
2025-07-23 10:59:10,661 - workflow-agent - INFO - DEBUG: Checking for 'welcome_message' field: None
{"message": "DEBUG: Checking for 'welcome_message' field: None", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.661561+00:00"}
2025-07-23 10:59:10,662 - workflow-agent - INFO - DEBUG: Checking for 'firstMessage' field: None
{"message": "DEBUG: Checking for 'firstMessage' field: None", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.662560+00:00"}
2025-07-23 10:59:10,663 - workflow-agent - INFO - ✅ DEBUG: Found 'greeting' field: 'Hi this is Lucy from Dunder Mifflin'
{"message": "✅ DEBUG: Found 'greeting' field: 'Hi this is Lucy from Dunder Mifflin'", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.663989+00:00"}
2025-07-23 10:59:10,665 - workflow-agent - INFO - 🎉 FOUND WORKFLOW GREETING: 'Hi this is Lucy from Dunder Mifflin' 🎉
{"message": "🎉 FOUND WORKFLOW GREETING: 'Hi this is Lucy from Dunder Mifflin' 🎉", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.665019+00:00"}
2025-07-23 10:59:10,667 - workflow-agent - INFO - 🔄 Fresh extraction result: 'Hi this is Lucy from Dunder Mifflin'
{"message": "🔄 Fresh extraction result: 'Hi this is Lucy from Dunder Mifflin'", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.667014+00:00"}
2025-07-23 10:59:10,668 - workflow-agent - INFO - ✅ Using fresh extracted greeting: 'Hi this is Lucy from Dunder Mifflin'
{"message": "✅ Using fresh extracted greeting: 'Hi this is Lucy from Dunder Mifflin'", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.668019+00:00"}
2025-07-23 10:59:10,670 - workflow-agent - INFO - 🎯 About to deliver greeting: 'Hi this is Lucy from Dunder Mifflin'
{"message": "🎯 About to deliver greeting: 'Hi this is Lucy from Dunder Mifflin'", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:10.670727+00:00"}
2025-07-23 10:59:10,681 - outbound-caller - INFO - Auto-starting pathway execution: pathway_id=d5fc510b-7635-4715-9066-e522daa2336d, agent_id=11, call_id=295
2025-07-23 10:59:10,681 - outbound-caller - INFO - Auto-starting pathway execution: pathway_id=d5fc510b-7635-4715-9066-e522daa2336d, agent_id=11, call_id=295
{"message": "Auto-starting pathway execution: pathway_id=d5fc510b-7635-4715-9066-e522daa2336d, agent_id=11, call_id=295", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-07-23T08:59:10.681557+00:00"}
2025-07-23 10:59:10,683 - agent_pathway_integration - INFO - Checking for default pathway for agent 11 and call 295
{"message": "Checking for default pathway for agent 11 and call 295", "level": "INFO", "name": "agent_pathway_integration", "timestamp": "2025-07-23T08:59:10.683574+00:00"}
2025-07-23 10:59:10,916 - agent_pathway_integration - INFO - Created pathway execution record: a9fac485-f18f-4058-b54c-5e1fa0adca64
{"message": "Created pathway execution record: a9fac485-f18f-4058-b54c-5e1fa0adca64", "level": "INFO", "name": "agent_pathway_integration", "timestamp": "2025-07-23T08:59:10.916859+00:00"}
2025-07-23 10:59:10,986 - agent_pathway_integration - INFO - Linked call 295 to pathway execution a9fac485-f18f-4058-b54c-5e1fa0adca64
{"message": "Linked call 295 to pathway execution a9fac485-f18f-4058-b54c-5e1fa0adca64", "level": "INFO", "name": "agent_pathway_integration", "timestamp": "2025-07-23T08:59:10.986633+00:00"}
2025-07-23 10:59:10,987 - agent_pathway_integration - INFO - ✅ Started pathway execution a9fac485-f18f-4058-b54c-5e1fa0adca64 for call 295
{"message": "✅ Started pathway execution a9fac485-f18f-4058-b54c-5e1fa0adca64 for call 295", "level": "INFO", "name": "agent_pathway_integration", "timestamp": "2025-07-23T08:59:10.987623+00:00"}
2025-07-23 10:59:10,989 - outbound-caller - INFO - Pathway execution started successfully: a9fac485-f18f-4058-b54c-5e1fa0adca64
2025-07-23 10:59:10,989 - outbound-caller - INFO - Pathway execution started successfully: a9fac485-f18f-4058-b54c-5e1fa0adca64
{"message": "Pathway execution started successfully: a9fac485-f18f-4058-b54c-5e1fa0adca64", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-07-23T08:59:10.989633+00:00"}
2025-07-23 10:59:11,061 - outbound-caller - INFO - run_session_safely: APRÈS appel à session.start() pour supabase_call_id: 295 (OUTBOUND CALL). La session devrait avoir démarré et exécuté la logique de l'agent.
2025-07-23 10:59:11,061 - outbound-caller - INFO - run_session_safely: APRÈS appel à session.start() pour supabase_call_id: 295 (OUTBOUND CALL). La session devrait avoir démarré et exécuté la logique de l'agent.
{"message": "run_session_safely: APRÈS appel à session.start() pour supabase_call_id: 295 (OUTBOUND CALL). La session devrait avoir démarré et exécuté la logique de l'agent.", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-07-23T08:59:11.061577+00:00"}
2025-07-23 10:59:11,063 - outbound-caller - INFO - Agent session task finished normally for outbound call supabase_call_id: 295.
2025-07-23 10:59:11,063 - outbound-caller - INFO - Agent session task finished normally for outbound call supabase_call_id: 295.
{"message": "Agent session task finished normally for outbound call supabase_call_id: 295.", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-07-23T08:59:11.063583+00:00"}
2025-07-23 10:59:11,064 - outbound-caller - INFO - Fin du job pour la room agent-call-295 (OUTBOUND call, Supabase ID: 295). Statut final de session: completed
2025-07-23 10:59:11,064 - outbound-caller - INFO - Fin du job pour la room agent-call-295 (OUTBOUND call, Supabase ID: 295). Statut final de session: completed
{"message": "Fin du job pour la room agent-call-295 (OUTBOUND call, Supabase ID: 295). Statut final de session: completed", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-07-23T08:59:11.064626+00:00"}
2025-07-23 10:59:11,065 - outbound-caller - WARNING - TELNYX_API_KEY ou call_control_id manquant pour récupérer la durée réelle d'appel.
2025-07-23 10:59:11,065 - outbound-caller - WARNING - TELNYX_API_KEY ou call_control_id manquant pour récupérer la durée réelle d'appel.
{"message": "TELNYX_API_KEY ou call_control_id manquant pour récupérer la durée réelle d'appel.", "level": "WARNING", "name": "outbound-caller", "timestamp": "2025-07-23T08:59:11.065622+00:00"}
2025-07-23 10:59:11,066 - outbound-caller - INFO - Tentative de mise à jour des infos pour room agent-call-295 (Supabase ID: 295) avec payload: {'new_status': 'completed', 'supabase_call_id': '295', 'call_duration_seconds': 2} via backend: http://localhost:8000/calls/room/agent-call-295/status
2025-07-23 10:59:11,066 - outbound-caller - INFO - Tentative de mise à jour des infos pour room agent-call-295 (Supabase ID: 295) avec payload: {'new_status': 'completed', 'supabase_call_id': '295', 'call_duration_seconds': 2} via backend: http://localhost:8000/calls/room/agent-call-295/status
{"message": "Tentative de mise à jour des infos pour room agent-call-295 (Supabase ID: 295) avec payload: {'new_status': 'completed', 'supabase_call_id': '295', 'call_duration_seconds': 2} via backend: http://localhost:8000/calls/room/agent-call-295/status", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-07-23T08:59:11.066577+00:00"}
2025-07-23 10:59:12,551 - outbound-caller - INFO - Infos mises à jour avec succès pour room agent-call-295 (Supabase ID: 295): {'message': 'Call status updated successfully', 'call': {'id': 295, 'created_at': '2025-07-23T08:58:55.492809+00:00', 'updated_at': '2025-07-23T08:59:12.558041+00:00', 'agent_id': 11, 'user_id': 'b55837c4-270f-4f1f-8023-7ab09ee5f44d', 'to_phone_number': '+33661329235', 'status': 'completed', 'initiated_at': None, 'answered_at': None, 'ended_at': '2025-07-23T08:59:12.476+00:00', 'call_duration': None, 'from_phone_number': None, 'ended_reason': None, 'livekit_room_name': None, 'livekit_participant_identity': None, 'provider': None, 'livekit_outbound_trunk_id': None, 'call_control_id': None, 'agent_name': None, 'telnyx_call_session_id': None, 'batch_campaign_id': None, 'batch_call_item_id': None, 'call_type': 'outbound', 'phone_number_e164': '+33661329235', 'contact_name': None, 'room_name': 'agent-call-295', 'pathway_execution_id': 'a9fac485-f18f-4058-b54c-5e1fa0adca64', 'current_pathway_node_id': 'conversation-1752584446694', 'pathway_variables': None, 'call_direction': 'outbound', 'caller_number': None, 'agent_process_pid': 42328, 'error_message': None, 'duration_seconds': 2}}        
2025-07-23 10:59:12,551 - outbound-caller - INFO - Infos mises à jour avec succès pour room agent-call-295 (Supabase ID: 295): {'message': 'Call status updated successfully', 'call': {'id': 295, 'created_at': '2025-07-23T08:58:55.492809+00:00', 'updated_at': '2025-07-23T08:59:12.558041+00:00', 'agent_id': 11, 'user_id': 'b55837c4-270f-4f1f-8023-7ab09ee5f44d', 'to_phone_number': '+33661329235', 'status': 'completed', 'initiated_at': None, 'answered_at': None, 'ended_at': '2025-07-23T08:59:12.476+00:00', 'call_duration': None, 'from_phone_number': None, 'ended_reason': None, 'livekit_room_name': None, 'livekit_participant_identity': None, 'provider': None, 'livekit_outbound_trunk_id': None, 'call_control_id': None, 'agent_name': None, 'telnyx_call_session_id': None, 'batch_campaign_id': None, 'batch_call_item_id': None, 'call_type': 'outbound', 'phone_number_e164': '+33661329235', 'contact_name': None, 'room_name': 'agent-call-295', 'pathway_execution_id': 'a9fac485-f18f-4058-b54c-5e1fa0adca64', 'current_pathway_node_id': 'conversation-1752584446694', 'pathway_variables': None, 'call_direction': 'outbound', 'caller_number': None, 'agent_process_pid': 42328, 'error_message': None, 'duration_seconds': 2}}        
{"message": "Infos mises à jour avec succès pour room agent-call-295 (Supabase ID: 295): {'message': 'Call status updated successfully', 'call': {'id': 295, 'created_at': '2025-07-23T08:58:55.492809+00:00', 'updated_at': '2025-07-23T08:59:12.558041+00:00', 'agent_id': 11, 'user_id': 'b55837c4-270f-4f1f-8023-7ab09ee5f44d', 'to_phone_number': '+33661329235', 'status': 'completed', 'initiated_at': None, 'answered_at': None, 'ended_at': '2025-07-23T08:59:12.476+00:00', 'call_duration': None, 'from_phone_number': None, 'ended_reason': None, 'livekit_room_name': None, 'livekit_participant_identity': None, 'provider': None, 'livekit_outbound_trunk_id': None, 'call_control_id': None, 'agent_name': None, 'telnyx_call_session_id': None, 'batch_campaign_id': None, 'batch_call_item_id': None, 'call_type': 'outbound', 'phone_number_e164': '+33661329235', 'contact_name': None, 'room_name': 'agent-call-295', 'pathway_execution_id': 'a9fac485-f18f-4058-b54c-5e1fa0adca64', 'current_pathway_node_id': 'conversation-1752584446694', 'pathway_variables': None, 'call_direction': 'outbound', 'caller_number': None, 'agent_process_pid': 42328, 'error_message': None, 'duration_seconds': 2}}", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-07-23T08:59:12.551677+00:00"}
2025-07-23 10:59:12,555 - outbound-caller - INFO - Session task awaited and completed for supabase_call_id 295.
2025-07-23 10:59:12,555 - outbound-caller - INFO - Session task awaited and completed for supabase_call_id 295.
{"message": "Session task awaited and completed for supabase_call_id 295.", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-07-23T08:59:12.555681+00:00"}
2025-07-23 10:59:12,557 - outbound-caller - INFO - Setting up to wait for participant 'agent_sip_participant_+33661329235' to disconnect as a final check...
2025-07-23 10:59:12,557 - outbound-caller - INFO - Setting up to wait for participant 'agent_sip_participant_+33661329235' to disconnect as a final check...
{"message": "Setting up to wait for participant 'agent_sip_participant_+33661329235' to disconnect as a final check...", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-07-23T08:59:12.557701+00:00"}
2025-07-23 10:59:12,559 - outbound-caller - INFO - Now waiting for participant 'agent_sip_participant_+33661329235' to disconnect (final check)...
2025-07-23 10:59:12,559 - outbound-caller - INFO - Now waiting for participant 'agent_sip_participant_+33661329235' to disconnect (final check)...
{"message": "Now waiting for participant 'agent_sip_participant_+33661329235' to disconnect (final check)...", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-07-23T08:59:12.559705+00:00"}
2025-07-23 10:59:17,555 - outbound-caller - WARNING - Timeout waiting for participant 'agent_sip_participant_+33661329235' to disconnect (final check). Session likely already handled by agent logic or session_task.
2025-07-23 10:59:17,555 - outbound-caller - WARNING - Timeout waiting for participant 'agent_sip_participant_+33661329235' to disconnect (final check). Session likely already handled by agent logic or session_task.
{"message": "Timeout waiting for participant 'agent_sip_participant_+33661329235' to disconnect (final check). Session likely already handled by agent logic or session_task.", "level": "WARNING", "name": "outbound-caller", "timestamp": "2025-07-23T08:59:17.555890+00:00"}
2025-07-23 10:59:17,557 - outbound-caller - INFO - Entrypoint for supabase_call_id 295 completed.
2025-07-23 10:59:17,557 - outbound-caller - INFO - Entrypoint for supabase_call_id 295 completed.
{"message": "Entrypoint for supabase_call_id 295 completed.", "level": "INFO", "name": "outbound-caller", "timestamp": "2025-07-23T08:59:17.557916+00:00"}
2025-07-23 10:59:17,787 - workflow-agent - INFO - 🎉 Initial greeting delivered successfully: 'Hi this is Lucy from Dunder Mifflin'
{"message": "🎉 Initial greeting delivered successfully: 'Hi this is Lucy from Dunder Mifflin'", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:17.787118+00:00"}
2025-07-23 10:59:21,097 - workflow-agent - INFO - WorkflowAgent user turn completed - updating workflow context
{"message": "WorkflowAgent user turn completed - updating workflow context", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.097228+00:00"}
2025-07-23 10:59:21,098 - workflow-agent - INFO - 🚨 ============ PATHWAY TOOL INJECTION START ============ 🚨
{"message": "🚨 ============ PATHWAY TOOL INJECTION START ============ 🚨", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.098227+00:00"}
2025-07-23 10:59:21,098 - workflow-agent - INFO - 🔍 Current workflow state: conversation-1752584446694
{"message": "🔍 Current workflow state: conversation-1752584446694", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.098227+00:00"}
2025-07-23 10:59:21,099 - workflow-agent - INFO - Found current step node: conversation-1752584446694 (type: conversation)
{"message": "Found current step node: conversation-1752584446694 (type: conversation)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.099228+00:00"}
2025-07-23 10:59:21,099 - workflow-agent - INFO - 🎯 CURRENT NODE FOUND: conversation-1752584446694 (type: conversation)
{"message": "🎯 CURRENT NODE FOUND: conversation-1752584446694 (type: conversation)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.099228+00:00"}
2025-07-23 10:59:21,099 - workflow-agent - INFO - 🔄 ============ CHECKING TRANSITIONS FROM NODE: conversation-1752584446694 ============ 🔄
{"message": "🔄 ============ CHECKING TRANSITIONS FROM NODE: conversation-1752584446694 ============ 🔄", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.099228+00:00"}
2025-07-23 10:59:21,099 - workflow-agent - INFO - 🔍 OUTGOING EDGES from conversation-1752584446694: 3
{"message": "🔍 OUTGOING EDGES from conversation-1752584446694: 3", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.099228+00:00"}
2025-07-23 10:59:21,100 - workflow-agent - INFO -   📋 Edge 1: conversation-1752584446694 → condition-1752585419519 (type: condition)
{"message": "  📋 Edge 1: conversation-1752584446694 → condition-1752585419519 (type: condition)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.100232+00:00"}
2025-07-23 10:59:21,100 - workflow-agent - INFO -     🎭 CONDITION TYPE: ai
{"message": "    🎭 CONDITION TYPE: ai", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.100232+00:00"}
2025-07-23 10:59:21,100 - workflow-agent - INFO -     📝 CONDITION CONFIG: {'type': 'ai', 'prompt': 'Person is available to talk now and shows interest in the conversation', 'next_node': 'qualify_lead', 'confidence_threshold': 0.7}
{"message": "    📝 CONDITION CONFIG: {'type': 'ai', 'prompt': 'Person is available to talk now and shows interest in the conversation', 'next_node': 'qualify_lead', 'confidence_threshold': 0.7}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.100232+00:00"}
2025-07-23 10:59:21,100 - workflow-agent - INFO - 🎯 EVALUATING CONDITION: condition-1752585419519 (type: ai)
{"message": "🎯 EVALUATING CONDITION: condition-1752585419519 (type: ai)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.100232+00:00"}
2025-07-23 10:59:21,100 - workflow-agent - INFO - 🔍 CONDITION DATA: {'type': 'ai', 'prompt': 'Person is available to talk now and shows interest in the conversation', 'next_node': 'qualify_lead', 'confidence_threshold': 0.7}
{"message": "🔍 CONDITION DATA: {'type': 'ai', 'prompt': 'Person is available to talk now and shows interest in the conversation', 'next_node': 'qualify_lead', 'confidence_threshold': 0.7}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.100232+00:00"}
2025-07-23 10:59:21,101 - workflow-agent - INFO - 🧠 AI CONDITION PROMPT: Person is available to talk now and shows interest in the conversation
{"message": "🧠 AI CONDITION PROMPT: Person is available to talk now and shows interest in the conversation", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.101233+00:00"}
2025-07-23 10:59:21,101 - workflow-agent - INFO - 🎯 CONFIDENCE THRESHOLD: 0.7
{"message": "🎯 CONFIDENCE THRESHOLD: 0.7", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.101233+00:00"}
2025-07-23 10:59:21,101 - workflow-agent - INFO - 🧠 EVALUATING AI CONDITION with context: 157 chars
{"message": "🧠 EVALUATING AI CONDITION with context: 157 chars", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.101233+00:00"}
2025-07-23 10:59:21,101 - workflow-agent - ERROR - LLM evaluation failed: 'ChatContext' object has no attribute 'append'
{"message": "LLM evaluation failed: 'ChatContext' object has no attribute 'append'", "level": "ERROR", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.101233+00:00"}
2025-07-23 10:59:21,101 - workflow-agent - WARNING - 🚨 LLM evaluation failed - using keyword-based fallback
{"message": "🚨 LLM evaluation failed - using keyword-based fallback", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.101233+00:00"}
2025-07-23 10:59:21,101 - workflow-agent - INFO - 🔄 FALLBACK RESULT: 4/12 keywords matched, confidence: 0.33, should_trigger: False
{"message": "🔄 FALLBACK RESULT: 4/12 keywords matched, confidence: 0.33, should_trigger: False", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.101233+00:00"}
2025-07-23 10:59:21,102 - workflow-agent - INFO -     ✅ CONDITION STATUS: {'should_trigger': False, 'confidence': 0.3333333333333333, 'reason': "Fallback keyword analysis: 4/12 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')", 'condition_type': 'ai_fallback', 'prompt': 'Person is available to talk now and shows interest in the conversation'}
{"message": "    ✅ CONDITION STATUS: {'should_trigger': False, 'confidence': 0.3333333333333333, 'reason': \"Fallback keyword analysis: 4/12 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')\", 'condition_type': 'ai_fallback', 'prompt': 'Person is available to talk now and shows interest in the conversation'}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.102233+00:00"}
2025-07-23 10:59:21,102 - workflow-agent - INFO -     ❌ CONDITION NOT MET: Fallback keyword analysis: 4/12 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')
{"message": "    ❌ CONDITION NOT MET: Fallback keyword analysis: 4/12 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.102233+00:00"}
2025-07-23 10:59:21,102 - workflow-agent - INFO -   📋 Edge 2: conversation-1752584446694 → condition-1752585422872 (type: condition)
{"message": "  📋 Edge 2: conversation-1752584446694 → condition-1752585422872 (type: condition)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.102233+00:00"}
2025-07-23 10:59:21,102 - workflow-agent - INFO -     🎭 CONDITION TYPE: ai
{"message": "    🎭 CONDITION TYPE: ai", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.102233+00:00"}
2025-07-23 10:59:21,102 - workflow-agent - INFO -     📝 CONDITION CONFIG: {'type': 'ai', 'prompt': 'Person seems uninterested, hostile, or wants to end the call', 'next_node': 'polite_decline', 'confidence_threshold': 0.8}
{"message": "    📝 CONDITION CONFIG: {'type': 'ai', 'prompt': 'Person seems uninterested, hostile, or wants to end the call', 'next_node': 'polite_decline', 'confidence_threshold': 0.8}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.102233+00:00"}
2025-07-23 10:59:21,103 - workflow-agent - INFO - 🎯 EVALUATING CONDITION: condition-1752585422872 (type: ai)
{"message": "🎯 EVALUATING CONDITION: condition-1752585422872 (type: ai)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.103234+00:00"}
2025-07-23 10:59:21,103 - workflow-agent - INFO - 🔍 CONDITION DATA: {'type': 'ai', 'prompt': 'Person seems uninterested, hostile, or wants to end the call', 'next_node': 'polite_decline', 'confidence_threshold': 0.8}
{"message": "🔍 CONDITION DATA: {'type': 'ai', 'prompt': 'Person seems uninterested, hostile, or wants to end the call', 'next_node': 'polite_decline', 'confidence_threshold': 0.8}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.103234+00:00"}
2025-07-23 10:59:21,103 - workflow-agent - INFO - 🧠 AI CONDITION PROMPT: Person seems uninterested, hostile, or wants to end the call
{"message": "🧠 AI CONDITION PROMPT: Person seems uninterested, hostile, or wants to end the call", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.103234+00:00"}
2025-07-23 10:59:21,103 - workflow-agent - INFO - 🎯 CONFIDENCE THRESHOLD: 0.8
{"message": "🎯 CONFIDENCE THRESHOLD: 0.8", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.103234+00:00"}
2025-07-23 10:59:21,103 - workflow-agent - INFO - 🧠 EVALUATING AI CONDITION with context: 157 chars
{"message": "🧠 EVALUATING AI CONDITION with context: 157 chars", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.103234+00:00"}
2025-07-23 10:59:21,104 - workflow-agent - ERROR - LLM evaluation failed: 'ChatContext' object has no attribute 'append'
{"message": "LLM evaluation failed: 'ChatContext' object has no attribute 'append'", "level": "ERROR", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.104234+00:00"}
2025-07-23 10:59:21,104 - workflow-agent - WARNING - 🚨 LLM evaluation failed - using keyword-based fallback
{"message": "🚨 LLM evaluation failed - using keyword-based fallback", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.104234+00:00"}
2025-07-23 10:59:21,104 - workflow-agent - INFO - 🔄 FALLBACK RESULT: 1/10 keywords matched, confidence: 0.10, should_trigger: False
{"message": "🔄 FALLBACK RESULT: 1/10 keywords matched, confidence: 0.10, should_trigger: False", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.104234+00:00"}
2025-07-23 10:59:21,104 - workflow-agent - INFO -     ✅ CONDITION STATUS: {'should_trigger': False, 'confidence': 0.1, 'reason': "Fallback keyword analysis: 1/10 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')", 'condition_type': 'ai_fallback', 'prompt': 'Person seems uninterested, hostile, or wants to end the call'}
{"message": "    ✅ CONDITION STATUS: {'should_trigger': False, 'confidence': 0.1, 'reason': \"Fallback keyword analysis: 1/10 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')\", 'condition_type': 'ai_fallback', 'prompt': 'Person seems uninterested, hostile, or wants to end the call'}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.104234+00:00"}
2025-07-23 10:59:21,104 - workflow-agent - INFO -     ❌ CONDITION NOT MET: Fallback keyword analysis: 1/10 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')
{"message": "    ❌ CONDITION NOT MET: Fallback keyword analysis: 1/10 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.104234+00:00"}
2025-07-23 10:59:21,105 - workflow-agent - INFO -   📋 Edge 3: conversation-1752584446694 → condition-1752585421207 (type: condition)
{"message": "  📋 Edge 3: conversation-1752584446694 → condition-1752585421207 (type: condition)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.105235+00:00"}
2025-07-23 10:59:21,105 - workflow-agent - INFO -     🎭 CONDITION TYPE: ai
{"message": "    🎭 CONDITION TYPE: ai", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.105235+00:00"}
2025-07-23 10:59:21,106 - workflow-agent - INFO -     📝 CONDITION CONFIG: {'type': 'ai', 'prompt': 'Person is busy or wants to be called back later', 'next_node': 'schedule_callback', 'confidence_threshold': 0.7}
{"message": "    📝 CONDITION CONFIG: {'type': 'ai', 'prompt': 'Person is busy or wants to be called back later', 'next_node': 'schedule_callback', 'confidence_threshold': 0.7}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.106236+00:00"}
2025-07-23 10:59:21,106 - workflow-agent - INFO - 🎯 EVALUATING CONDITION: condition-1752585421207 (type: ai)
{"message": "🎯 EVALUATING CONDITION: condition-1752585421207 (type: ai)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.106236+00:00"}
2025-07-23 10:59:21,106 - workflow-agent - INFO - 🔍 CONDITION DATA: {'type': 'ai', 'prompt': 'Person is busy or wants to be called back later', 'next_node': 'schedule_callback', 'confidence_threshold': 0.7}
{"message": "🔍 CONDITION DATA: {'type': 'ai', 'prompt': 'Person is busy or wants to be called back later', 'next_node': 'schedule_callback', 'confidence_threshold': 0.7}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.106236+00:00"}
2025-07-23 10:59:21,107 - workflow-agent - INFO - 🧠 AI CONDITION PROMPT: Person is busy or wants to be called back later
{"message": "🧠 AI CONDITION PROMPT: Person is busy or wants to be called back later", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.107236+00:00"}
2025-07-23 10:59:21,107 - workflow-agent - INFO - 🎯 CONFIDENCE THRESHOLD: 0.7
{"message": "🎯 CONFIDENCE THRESHOLD: 0.7", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.107236+00:00"}
2025-07-23 10:59:21,107 - workflow-agent - INFO - 🧠 EVALUATING AI CONDITION with context: 157 chars
{"message": "🧠 EVALUATING AI CONDITION with context: 157 chars", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.107236+00:00"}
2025-07-23 10:59:21,108 - workflow-agent - ERROR - LLM evaluation failed: 'ChatContext' object has no attribute 'append'
{"message": "LLM evaluation failed: 'ChatContext' object has no attribute 'append'", "level": "ERROR", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.108236+00:00"}
2025-07-23 10:59:21,108 - workflow-agent - WARNING - 🚨 LLM evaluation failed - using keyword-based fallback
{"message": "🚨 LLM evaluation failed - using keyword-based fallback", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.108236+00:00"}
2025-07-23 10:59:21,108 - workflow-agent - INFO - 🔄 FALLBACK RESULT: 1/10 keywords matched, confidence: 0.10, should_trigger: False
{"message": "🔄 FALLBACK RESULT: 1/10 keywords matched, confidence: 0.10, should_trigger: False", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.108236+00:00"}
2025-07-23 10:59:21,109 - workflow-agent - INFO -     ✅ CONDITION STATUS: {'should_trigger': False, 'confidence': 0.1, 'reason': "Fallback keyword analysis: 1/10 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')", 'condition_type': 'ai_fallback', 'prompt': 'Person is busy or wants to be called back later'}
{"message": "    ✅ CONDITION STATUS: {'should_trigger': False, 'confidence': 0.1, 'reason': \"Fallback keyword analysis: 1/10 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')\", 'condition_type': 'ai_fallback', 'prompt': 'Person is busy or wants to be called back later'}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.109239+00:00"}
2025-07-23 10:59:21,110 - workflow-agent - INFO -     ❌ CONDITION NOT MET: Fallback keyword analysis: 1/10 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')
{"message": "    ❌ CONDITION NOT MET: Fallback keyword analysis: 1/10 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.110237+00:00"}
2025-07-23 10:59:21,111 - workflow-agent - INFO - 🔍 CHECKING WORKFLOWAGENT TRANSITION MECHANISM
{"message": "🔍 CHECKING WORKFLOWAGENT TRANSITION MECHANISM", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.111243+00:00"}
2025-07-23 10:59:21,111 - workflow-agent - WARNING - ❌ NO _determine_next_node METHOD - This might be the issue!
{"message": "❌ NO _determine_next_node METHOD - This might be the issue!", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.111243+00:00"}
2025-07-23 10:59:21,111 - workflow-agent - WARNING - ❌ NO _move_to_next_step METHOD
{"message": "❌ NO _move_to_next_step METHOD", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.111243+00:00"}
2025-07-23 10:59:21,111 - workflow-agent - WARNING - 🚨 WORKFLOWAGENT TRANSITION ANALYSIS:
{"message": "🚨 WORKFLOWAGENT TRANSITION ANALYSIS:", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.111243+00:00"}
2025-07-23 10:59:21,112 - workflow-agent - WARNING - 🚨 - Current approach: LLM tool-based workflow
{"message": "🚨 - Current approach: LLM tool-based workflow", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.112239+00:00"}
2025-07-23 10:59:21,112 - workflow-agent - WARNING - 🚨 - Transition method: Function tools (@function_tool)
{"message": "🚨 - Transition method: Function tools (@function_tool)", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.112239+00:00"}
2025-07-23 10:59:21,112 - workflow-agent - WARNING - 🚨 - Condition evaluation: ❓ NEEDS INVESTIGATION
{"message": "🚨 - Condition evaluation: ❓ NEEDS INVESTIGATION", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.112239+00:00"}
2025-07-23 10:59:21,112 - workflow-agent - WARNING - 🚨 - This explains why agent stays on same node!
{"message": "🚨 - This explains why agent stays on same node!", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.112239+00:00"}
2025-07-23 10:59:21,113 - workflow-agent - WARNING - Could not extract JWT auth token for backend API calls
{"message": "Could not extract JWT auth token for backend API calls", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.113239+00:00"}
2025-07-23 10:59:21,113 - workflow-agent - WARNING - User ID available but no JWT token - using legacy app tools only
{"message": "User ID available but no JWT token - using legacy app tools only", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.113239+00:00"}
2025-07-23 10:59:21,114 - workflow-agent - INFO - Added legacy Google Calendar tools as fallback
{"message": "Added legacy Google Calendar tools as fallback", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.114238+00:00"}
2025-07-23 10:59:21,114 - workflow-agent - INFO - Found current step node: conversation-1752584446694 (type: conversation)
{"message": "Found current step node: conversation-1752584446694 (type: conversation)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.114238+00:00"}
2025-07-23 10:59:21,114 - workflow-agent - INFO - Creating tools for pathway node: conversation-1752584446694 (type: conversation)
{"message": "Creating tools for pathway node: conversation-1752584446694 (type: conversation)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.114238+00:00"}
2025-07-23 10:59:21,114 - workflow-agent - INFO - Added 0 pathway node tools for node: conversation-1752584446694
{"message": "Added 0 pathway node tools for node: conversation-1752584446694", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.114238+00:00"}
2025-07-23 10:59:21,114 - workflow-agent - INFO - Enhanced tools for step conversation-1752584446694: 7 total tools
{"message": "Enhanced tools for step conversation-1752584446694: 7 total tools", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.114238+00:00"}
2025-07-23 10:59:21,115 - workflow-agent - INFO - Updated agent instructions for workflow step: conversation-1752584446694
{"message": "Updated agent instructions for workflow step: conversation-1752584446694", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.115238+00:00"}
2025-07-23 10:59:21,115 - workflow-agent - INFO - WorkflowAgent llm_node executing with 7 tools for step: conversation-1752584446694
{"message": "WorkflowAgent llm_node executing with 7 tools for step: conversation-1752584446694", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:21.115238+00:00"}
2025-07-23 10:59:32,033 - workflow-agent - INFO - WorkflowAgent user turn completed - updating workflow context
{"message": "WorkflowAgent user turn completed - updating workflow context", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.033606+00:00"}
2025-07-23 10:59:32,035 - workflow-agent - INFO - 🚨 ============ PATHWAY TOOL INJECTION START ============ 🚨
{"message": "🚨 ============ PATHWAY TOOL INJECTION START ============ 🚨", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.035522+00:00"}
2025-07-23 10:59:32,037 - workflow-agent - INFO - 🔍 Current workflow state: conversation-1752584446694
{"message": "🔍 Current workflow state: conversation-1752584446694", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.037517+00:00"}
2025-07-23 10:59:32,037 - workflow-agent - INFO - Found current step node: conversation-1752584446694 (type: conversation)
{"message": "Found current step node: conversation-1752584446694 (type: conversation)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.037517+00:00"}
2025-07-23 10:59:32,038 - workflow-agent - INFO - 🎯 CURRENT NODE FOUND: conversation-1752584446694 (type: conversation)
{"message": "🎯 CURRENT NODE FOUND: conversation-1752584446694 (type: conversation)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.038516+00:00"}
2025-07-23 10:59:32,039 - workflow-agent - INFO - 🔄 ============ CHECKING TRANSITIONS FROM NODE: conversation-1752584446694 ============ 🔄
{"message": "🔄 ============ CHECKING TRANSITIONS FROM NODE: conversation-1752584446694 ============ 🔄", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.039514+00:00"}
2025-07-23 10:59:32,039 - workflow-agent - INFO - 🔍 OUTGOING EDGES from conversation-1752584446694: 3
{"message": "🔍 OUTGOING EDGES from conversation-1752584446694: 3", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.039514+00:00"}
2025-07-23 10:59:32,040 - workflow-agent - INFO -   📋 Edge 1: conversation-1752584446694 → condition-1752585419519 (type: condition)
{"message": "  📋 Edge 1: conversation-1752584446694 → condition-1752585419519 (type: condition)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.040515+00:00"}
2025-07-23 10:59:32,041 - workflow-agent - INFO -     🎭 CONDITION TYPE: ai
{"message": "    🎭 CONDITION TYPE: ai", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.041569+00:00"}
2025-07-23 10:59:32,041 - workflow-agent - INFO -     📝 CONDITION CONFIG: {'type': 'ai', 'prompt': 'Person is available to talk now and shows interest in the conversation', 'next_node': 'qualify_lead', 'confidence_threshold': 0.7}
{"message": "    📝 CONDITION CONFIG: {'type': 'ai', 'prompt': 'Person is available to talk now and shows interest in the conversation', 'next_node': 'qualify_lead', 'confidence_threshold': 0.7}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.041569+00:00"}
2025-07-23 10:59:32,042 - workflow-agent - INFO - 🎯 EVALUATING CONDITION: condition-1752585419519 (type: ai)
{"message": "🎯 EVALUATING CONDITION: condition-1752585419519 (type: ai)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.042544+00:00"}
2025-07-23 10:59:32,042 - workflow-agent - INFO - 🔍 CONDITION DATA: {'type': 'ai', 'prompt': 'Person is available to talk now and shows interest in the conversation', 'next_node': 'qualify_lead', 'confidence_threshold': 0.7}
{"message": "🔍 CONDITION DATA: {'type': 'ai', 'prompt': 'Person is available to talk now and shows interest in the conversation', 'next_node': 'qualify_lead', 'confidence_threshold': 0.7}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.042544+00:00"}
2025-07-23 10:59:32,042 - workflow-agent - INFO - 🧠 AI CONDITION PROMPT: Person is available to talk now and shows interest in the conversation
{"message": "🧠 AI CONDITION PROMPT: Person is available to talk now and shows interest in the conversation", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.042544+00:00"}
2025-07-23 10:59:32,043 - workflow-agent - INFO - 🎯 CONFIDENCE THRESHOLD: 0.7
{"message": "🎯 CONFIDENCE THRESHOLD: 0.7", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.043514+00:00"}
2025-07-23 10:59:32,043 - workflow-agent - INFO - 🧠 EVALUATING AI CONDITION with context: 157 chars
{"message": "🧠 EVALUATING AI CONDITION with context: 157 chars", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.043514+00:00"}
2025-07-23 10:59:32,043 - workflow-agent - ERROR - LLM evaluation failed: 'ChatContext' object has no attribute 'append'
{"message": "LLM evaluation failed: 'ChatContext' object has no attribute 'append'", "level": "ERROR", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.043514+00:00"}
2025-07-23 10:59:32,043 - workflow-agent - WARNING - 🚨 LLM evaluation failed - using keyword-based fallback
{"message": "🚨 LLM evaluation failed - using keyword-based fallback", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.043514+00:00"}
2025-07-23 10:59:32,044 - workflow-agent - INFO - 🔄 FALLBACK RESULT: 4/12 keywords matched, confidence: 0.33, should_trigger: False
{"message": "🔄 FALLBACK RESULT: 4/12 keywords matched, confidence: 0.33, should_trigger: False", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.044516+00:00"}
2025-07-23 10:59:32,044 - workflow-agent - INFO -     ✅ CONDITION STATUS: {'should_trigger': False, 'confidence': 0.3333333333333333, 'reason': "Fallback keyword analysis: 4/12 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')", 'condition_type': 'ai_fallback', 'prompt': 'Person is available to talk now and shows interest in the conversation'}
{"message": "    ✅ CONDITION STATUS: {'should_trigger': False, 'confidence': 0.3333333333333333, 'reason': \"Fallback keyword analysis: 4/12 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')\", 'condition_type': 'ai_fallback', 'prompt': 'Person is available to talk now and shows interest in the conversation'}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.044516+00:00"}
2025-07-23 10:59:32,044 - workflow-agent - INFO -     ❌ CONDITION NOT MET: Fallback keyword analysis: 4/12 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')
{"message": "    ❌ CONDITION NOT MET: Fallback keyword analysis: 4/12 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.044516+00:00"}
2025-07-23 10:59:32,044 - workflow-agent - INFO -   📋 Edge 2: conversation-1752584446694 → condition-1752585422872 (type: condition)
{"message": "  📋 Edge 2: conversation-1752584446694 → condition-1752585422872 (type: condition)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.044516+00:00"}
2025-07-23 10:59:32,045 - workflow-agent - INFO -     🎭 CONDITION TYPE: ai
{"message": "    🎭 CONDITION TYPE: ai", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.045515+00:00"}
2025-07-23 10:59:32,045 - workflow-agent - INFO -     📝 CONDITION CONFIG: {'type': 'ai', 'prompt': 'Person seems uninterested, hostile, or wants to end the call', 'next_node': 'polite_decline', 'confidence_threshold': 0.8}
{"message": "    📝 CONDITION CONFIG: {'type': 'ai', 'prompt': 'Person seems uninterested, hostile, or wants to end the call', 'next_node': 'polite_decline', 'confidence_threshold': 0.8}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.045515+00:00"}
2025-07-23 10:59:32,045 - workflow-agent - INFO - 🎯 EVALUATING CONDITION: condition-1752585422872 (type: ai)
{"message": "🎯 EVALUATING CONDITION: condition-1752585422872 (type: ai)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.045515+00:00"}
2025-07-23 10:59:32,046 - workflow-agent - INFO - 🔍 CONDITION DATA: {'type': 'ai', 'prompt': 'Person seems uninterested, hostile, or wants to end the call', 'next_node': 'polite_decline', 'confidence_threshold': 0.8}
{"message": "🔍 CONDITION DATA: {'type': 'ai', 'prompt': 'Person seems uninterested, hostile, or wants to end the call', 'next_node': 'polite_decline', 'confidence_threshold': 0.8}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.046527+00:00"}
2025-07-23 10:59:32,046 - workflow-agent - INFO - 🧠 AI CONDITION PROMPT: Person seems uninterested, hostile, or wants to end the call
{"message": "🧠 AI CONDITION PROMPT: Person seems uninterested, hostile, or wants to end the call", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.046527+00:00"}
2025-07-23 10:59:32,046 - workflow-agent - INFO - 🎯 CONFIDENCE THRESHOLD: 0.8
{"message": "🎯 CONFIDENCE THRESHOLD: 0.8", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.046527+00:00"}
2025-07-23 10:59:32,046 - workflow-agent - INFO - 🧠 EVALUATING AI CONDITION with context: 157 chars
{"message": "🧠 EVALUATING AI CONDITION with context: 157 chars", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.046527+00:00"}
2025-07-23 10:59:32,046 - workflow-agent - ERROR - LLM evaluation failed: 'ChatContext' object has no attribute 'append'
{"message": "LLM evaluation failed: 'ChatContext' object has no attribute 'append'", "level": "ERROR", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.046527+00:00"}
2025-07-23 10:59:32,047 - workflow-agent - WARNING - 🚨 LLM evaluation failed - using keyword-based fallback
{"message": "🚨 LLM evaluation failed - using keyword-based fallback", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.047522+00:00"}
2025-07-23 10:59:32,047 - workflow-agent - INFO - 🔄 FALLBACK RESULT: 1/10 keywords matched, confidence: 0.10, should_trigger: False
{"message": "🔄 FALLBACK RESULT: 1/10 keywords matched, confidence: 0.10, should_trigger: False", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.047522+00:00"}
2025-07-23 10:59:32,047 - workflow-agent - INFO -     ✅ CONDITION STATUS: {'should_trigger': False, 'confidence': 0.1, 'reason': "Fallback keyword analysis: 1/10 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')", 'condition_type': 'ai_fallback', 'prompt': 'Person seems uninterested, hostile, or wants to end the call'}
{"message": "    ✅ CONDITION STATUS: {'should_trigger': False, 'confidence': 0.1, 'reason': \"Fallback keyword analysis: 1/10 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')\", 'condition_type': 'ai_fallback', 'prompt': 'Person seems uninterested, hostile, or wants to end the call'}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.047522+00:00"}
2025-07-23 10:59:32,047 - workflow-agent - INFO -     ❌ CONDITION NOT MET: Fallback keyword analysis: 1/10 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')
{"message": "    ❌ CONDITION NOT MET: Fallback keyword analysis: 1/10 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.047522+00:00"}
2025-07-23 10:59:32,048 - workflow-agent - INFO -   📋 Edge 3: conversation-1752584446694 → condition-1752585421207 (type: condition)
{"message": "  📋 Edge 3: conversation-1752584446694 → condition-1752585421207 (type: condition)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.048523+00:00"}
2025-07-23 10:59:32,049 - workflow-agent - INFO -     🎭 CONDITION TYPE: ai
{"message": "    🎭 CONDITION TYPE: ai", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.049525+00:00"}
2025-07-23 10:59:32,049 - workflow-agent - INFO -     📝 CONDITION CONFIG: {'type': 'ai', 'prompt': 'Person is busy or wants to be called back later', 'next_node': 'schedule_callback', 'confidence_threshold': 0.7}
{"message": "    📝 CONDITION CONFIG: {'type': 'ai', 'prompt': 'Person is busy or wants to be called back later', 'next_node': 'schedule_callback', 'confidence_threshold': 0.7}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.049525+00:00"}
2025-07-23 10:59:32,050 - workflow-agent - INFO - 🎯 EVALUATING CONDITION: condition-1752585421207 (type: ai)
{"message": "🎯 EVALUATING CONDITION: condition-1752585421207 (type: ai)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.050534+00:00"}
2025-07-23 10:59:32,051 - workflow-agent - INFO - 🔍 CONDITION DATA: {'type': 'ai', 'prompt': 'Person is busy or wants to be called back later', 'next_node': 'schedule_callback', 'confidence_threshold': 0.7}
{"message": "🔍 CONDITION DATA: {'type': 'ai', 'prompt': 'Person is busy or wants to be called back later', 'next_node': 'schedule_callback', 'confidence_threshold': 0.7}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.051525+00:00"}
2025-07-23 10:59:32,051 - workflow-agent - INFO - 🧠 AI CONDITION PROMPT: Person is busy or wants to be called back later
{"message": "🧠 AI CONDITION PROMPT: Person is busy or wants to be called back later", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.051525+00:00"}
2025-07-23 10:59:32,051 - workflow-agent - INFO - 🎯 CONFIDENCE THRESHOLD: 0.7
{"message": "🎯 CONFIDENCE THRESHOLD: 0.7", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.051525+00:00"}
2025-07-23 10:59:32,051 - workflow-agent - INFO - 🧠 EVALUATING AI CONDITION with context: 157 chars
{"message": "🧠 EVALUATING AI CONDITION with context: 157 chars", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.051525+00:00"}
2025-07-23 10:59:32,052 - workflow-agent - ERROR - LLM evaluation failed: 'ChatContext' object has no attribute 'append'
{"message": "LLM evaluation failed: 'ChatContext' object has no attribute 'append'", "level": "ERROR", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.052524+00:00"}
2025-07-23 10:59:32,052 - workflow-agent - WARNING - 🚨 LLM evaluation failed - using keyword-based fallback
{"message": "🚨 LLM evaluation failed - using keyword-based fallback", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.052524+00:00"}
2025-07-23 10:59:32,052 - workflow-agent - INFO - 🔄 FALLBACK RESULT: 1/10 keywords matched, confidence: 0.10, should_trigger: False
{"message": "🔄 FALLBACK RESULT: 1/10 keywords matched, confidence: 0.10, should_trigger: False", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.052524+00:00"}
2025-07-23 10:59:32,052 - workflow-agent - INFO -     ✅ CONDITION STATUS: {'should_trigger': False, 'confidence': 0.1, 'reason': "Fallback keyword analysis: 1/10 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')", 'condition_type': 'ai_fallback', 'prompt': 'Person is busy or wants to be called back later'}
{"message": "    ✅ CONDITION STATUS: {'should_trigger': False, 'confidence': 0.1, 'reason': \"Fallback keyword analysis: 1/10 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')\", 'condition_type': 'ai_fallback', 'prompt': 'Person is busy or wants to be called back later'}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.052524+00:00"}
2025-07-23 10:59:32,052 - workflow-agent - INFO -     ❌ CONDITION NOT MET: Fallback keyword analysis: 1/10 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')
{"message": "    ❌ CONDITION NOT MET: Fallback keyword analysis: 1/10 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.052524+00:00"}
2025-07-23 10:59:32,053 - workflow-agent - INFO - 🔍 CHECKING WORKFLOWAGENT TRANSITION MECHANISM
{"message": "🔍 CHECKING WORKFLOWAGENT TRANSITION MECHANISM", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.053525+00:00"}
2025-07-23 10:59:32,053 - workflow-agent - WARNING - ❌ NO _determine_next_node METHOD - This might be the issue!
{"message": "❌ NO _determine_next_node METHOD - This might be the issue!", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.053525+00:00"}
2025-07-23 10:59:32,053 - workflow-agent - WARNING - ❌ NO _move_to_next_step METHOD
{"message": "❌ NO _move_to_next_step METHOD", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.053525+00:00"}
2025-07-23 10:59:32,053 - workflow-agent - WARNING - 🚨 WORKFLOWAGENT TRANSITION ANALYSIS:
{"message": "🚨 WORKFLOWAGENT TRANSITION ANALYSIS:", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.053525+00:00"}
2025-07-23 10:59:32,053 - workflow-agent - WARNING - 🚨 - Current approach: LLM tool-based workflow
{"message": "🚨 - Current approach: LLM tool-based workflow", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.053525+00:00"}
2025-07-23 10:59:32,054 - workflow-agent - WARNING - 🚨 - Transition method: Function tools (@function_tool)
{"message": "🚨 - Transition method: Function tools (@function_tool)", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.054524+00:00"}
2025-07-23 10:59:32,054 - workflow-agent - WARNING - 🚨 - Condition evaluation: ❓ NEEDS INVESTIGATION
{"message": "🚨 - Condition evaluation: ❓ NEEDS INVESTIGATION", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.054524+00:00"}
2025-07-23 10:59:32,054 - workflow-agent - WARNING - 🚨 - This explains why agent stays on same node!
{"message": "🚨 - This explains why agent stays on same node!", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.054524+00:00"}
2025-07-23 10:59:32,055 - workflow-agent - WARNING - Could not extract JWT auth token for backend API calls
{"message": "Could not extract JWT auth token for backend API calls", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.055528+00:00"}
2025-07-23 10:59:32,055 - workflow-agent - WARNING - User ID available but no JWT token - using legacy app tools only
{"message": "User ID available but no JWT token - using legacy app tools only", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.055528+00:00"}
2025-07-23 10:59:32,056 - workflow-agent - INFO - Added legacy Google Calendar tools as fallback
{"message": "Added legacy Google Calendar tools as fallback", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.056534+00:00"}
2025-07-23 10:59:32,056 - workflow-agent - INFO - Found current step node: conversation-1752584446694 (type: conversation)
{"message": "Found current step node: conversation-1752584446694 (type: conversation)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.056534+00:00"}
2025-07-23 10:59:32,057 - workflow-agent - INFO - Creating tools for pathway node: conversation-1752584446694 (type: conversation)
{"message": "Creating tools for pathway node: conversation-1752584446694 (type: conversation)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.057530+00:00"}
2025-07-23 10:59:32,057 - workflow-agent - INFO - Added 0 pathway node tools for node: conversation-1752584446694
{"message": "Added 0 pathway node tools for node: conversation-1752584446694", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.057530+00:00"}
2025-07-23 10:59:32,057 - workflow-agent - INFO - Enhanced tools for step conversation-1752584446694: 7 total tools
{"message": "Enhanced tools for step conversation-1752584446694: 7 total tools", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.057530+00:00"}
2025-07-23 10:59:32,058 - workflow-agent - INFO - Updated agent instructions for workflow step: conversation-1752584446694
{"message": "Updated agent instructions for workflow step: conversation-1752584446694", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.058529+00:00"}
2025-07-23 10:59:32,058 - workflow-agent - INFO - WorkflowAgent llm_node executing with 7 tools for step: conversation-1752584446694
{"message": "WorkflowAgent llm_node executing with 7 tools for step: conversation-1752584446694", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:32.058529+00:00"}
2025-07-23 10:59:40,543 - workflow-agent - INFO - WorkflowAgent user turn completed - updating workflow context
{"message": "WorkflowAgent user turn completed - updating workflow context", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.543871+00:00"}
2025-07-23 10:59:40,544 - workflow-agent - INFO - 🚨 ============ PATHWAY TOOL INJECTION START ============ 🚨
{"message": "🚨 ============ PATHWAY TOOL INJECTION START ============ 🚨", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.544871+00:00"}
2025-07-23 10:59:40,544 - workflow-agent - INFO - 🔍 Current workflow state: conversation-1752584446694
{"message": "🔍 Current workflow state: conversation-1752584446694", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.544871+00:00"}
2025-07-23 10:59:40,544 - workflow-agent - INFO - Found current step node: conversation-1752584446694 (type: conversation)
{"message": "Found current step node: conversation-1752584446694 (type: conversation)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.544871+00:00"}
2025-07-23 10:59:40,544 - workflow-agent - INFO - 🎯 CURRENT NODE FOUND: conversation-1752584446694 (type: conversation)
{"message": "🎯 CURRENT NODE FOUND: conversation-1752584446694 (type: conversation)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.544871+00:00"}
2025-07-23 10:59:40,545 - workflow-agent - INFO - 🔄 ============ CHECKING TRANSITIONS FROM NODE: conversation-1752584446694 ============ 🔄
{"message": "🔄 ============ CHECKING TRANSITIONS FROM NODE: conversation-1752584446694 ============ 🔄", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.545872+00:00"}
2025-07-23 10:59:40,545 - workflow-agent - INFO - 🔍 OUTGOING EDGES from conversation-1752584446694: 3
{"message": "🔍 OUTGOING EDGES from conversation-1752584446694: 3", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.545872+00:00"}
2025-07-23 10:59:40,546 - workflow-agent - INFO -   📋 Edge 1: conversation-1752584446694 → condition-1752585419519 (type: condition)
{"message": "  📋 Edge 1: conversation-1752584446694 → condition-1752585419519 (type: condition)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.546873+00:00"}
2025-07-23 10:59:40,546 - workflow-agent - INFO -     🎭 CONDITION TYPE: ai
{"message": "    🎭 CONDITION TYPE: ai", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.546873+00:00"}
2025-07-23 10:59:40,546 - workflow-agent - INFO -     📝 CONDITION CONFIG: {'type': 'ai', 'prompt': 'Person is available to talk now and shows interest in the conversation', 'next_node': 'qualify_lead', 'confidence_threshold': 0.7}
{"message": "    📝 CONDITION CONFIG: {'type': 'ai', 'prompt': 'Person is available to talk now and shows interest in the conversation', 'next_node': 'qualify_lead', 'confidence_threshold': 0.7}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.546873+00:00"}
2025-07-23 10:59:40,546 - workflow-agent - INFO - 🎯 EVALUATING CONDITION: condition-1752585419519 (type: ai)
{"message": "🎯 EVALUATING CONDITION: condition-1752585419519 (type: ai)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.546873+00:00"}
2025-07-23 10:59:40,546 - workflow-agent - INFO - 🔍 CONDITION DATA: {'type': 'ai', 'prompt': 'Person is available to talk now and shows interest in the conversation', 'next_node': 'qualify_lead', 'confidence_threshold': 0.7}
{"message": "🔍 CONDITION DATA: {'type': 'ai', 'prompt': 'Person is available to talk now and shows interest in the conversation', 'next_node': 'qualify_lead', 'confidence_threshold': 0.7}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.546873+00:00"}
2025-07-23 10:59:40,546 - workflow-agent - INFO - 🧠 AI CONDITION PROMPT: Person is available to talk now and shows interest in the conversation
{"message": "🧠 AI CONDITION PROMPT: Person is available to talk now and shows interest in the conversation", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.546873+00:00"}
2025-07-23 10:59:40,547 - workflow-agent - INFO - 🎯 CONFIDENCE THRESHOLD: 0.7
{"message": "🎯 CONFIDENCE THRESHOLD: 0.7", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.547873+00:00"}
2025-07-23 10:59:40,547 - workflow-agent - INFO - 🧠 EVALUATING AI CONDITION with context: 157 chars
{"message": "🧠 EVALUATING AI CONDITION with context: 157 chars", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.547873+00:00"}
2025-07-23 10:59:40,547 - workflow-agent - ERROR - LLM evaluation failed: 'ChatContext' object has no attribute 'append'
{"message": "LLM evaluation failed: 'ChatContext' object has no attribute 'append'", "level": "ERROR", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.547873+00:00"}
2025-07-23 10:59:40,547 - workflow-agent - WARNING - 🚨 LLM evaluation failed - using keyword-based fallback
{"message": "🚨 LLM evaluation failed - using keyword-based fallback", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.547873+00:00"}
2025-07-23 10:59:40,547 - workflow-agent - INFO - 🔄 FALLBACK RESULT: 4/12 keywords matched, confidence: 0.33, should_trigger: False
{"message": "🔄 FALLBACK RESULT: 4/12 keywords matched, confidence: 0.33, should_trigger: False", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.547873+00:00"}
2025-07-23 10:59:40,547 - workflow-agent - INFO -     ✅ CONDITION STATUS: {'should_trigger': False, 'confidence': 0.3333333333333333, 'reason': "Fallback keyword analysis: 4/12 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')", 'condition_type': 'ai_fallback', 'prompt': 'Person is available to talk now and shows interest in the conversation'}
{"message": "    ✅ CONDITION STATUS: {'should_trigger': False, 'confidence': 0.3333333333333333, 'reason': \"Fallback keyword analysis: 4/12 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')\", 'condition_type': 'ai_fallback', 'prompt': 'Person is available to talk now and shows interest in the conversation'}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.547873+00:00"}
2025-07-23 10:59:40,548 - workflow-agent - INFO -     ❌ CONDITION NOT MET: Fallback keyword analysis: 4/12 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')
{"message": "    ❌ CONDITION NOT MET: Fallback keyword analysis: 4/12 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.548873+00:00"}
2025-07-23 10:59:40,549 - workflow-agent - INFO -   📋 Edge 2: conversation-1752584446694 → condition-1752585422872 (type: condition)
{"message": "  📋 Edge 2: conversation-1752584446694 → condition-1752585422872 (type: condition)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.549874+00:00"}
2025-07-23 10:59:40,549 - workflow-agent - INFO -     🎭 CONDITION TYPE: ai
{"message": "    🎭 CONDITION TYPE: ai", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.549874+00:00"}
2025-07-23 10:59:40,550 - workflow-agent - INFO -     📝 CONDITION CONFIG: {'type': 'ai', 'prompt': 'Person seems uninterested, hostile, or wants to end the call', 'next_node': 'polite_decline', 'confidence_threshold': 0.8}
{"message": "    📝 CONDITION CONFIG: {'type': 'ai', 'prompt': 'Person seems uninterested, hostile, or wants to end the call', 'next_node': 'polite_decline', 'confidence_threshold': 0.8}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.550874+00:00"}
2025-07-23 10:59:40,550 - workflow-agent - INFO - 🎯 EVALUATING CONDITION: condition-1752585422872 (type: ai)
{"message": "🎯 EVALUATING CONDITION: condition-1752585422872 (type: ai)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.550874+00:00"}
2025-07-23 10:59:40,550 - workflow-agent - INFO - 🔍 CONDITION DATA: {'type': 'ai', 'prompt': 'Person seems uninterested, hostile, or wants to end the call', 'next_node': 'polite_decline', 'confidence_threshold': 0.8}
{"message": "🔍 CONDITION DATA: {'type': 'ai', 'prompt': 'Person seems uninterested, hostile, or wants to end the call', 'next_node': 'polite_decline', 'confidence_threshold': 0.8}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.550874+00:00"}
2025-07-23 10:59:40,550 - workflow-agent - INFO - 🧠 AI CONDITION PROMPT: Person seems uninterested, hostile, or wants to end the call
{"message": "🧠 AI CONDITION PROMPT: Person seems uninterested, hostile, or wants to end the call", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.550874+00:00"}
2025-07-23 10:59:40,550 - workflow-agent - INFO - 🎯 CONFIDENCE THRESHOLD: 0.8
{"message": "🎯 CONFIDENCE THRESHOLD: 0.8", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.550874+00:00"}
2025-07-23 10:59:40,550 - workflow-agent - INFO - 🧠 EVALUATING AI CONDITION with context: 157 chars
{"message": "🧠 EVALUATING AI CONDITION with context: 157 chars", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.550874+00:00"}
2025-07-23 10:59:40,551 - workflow-agent - ERROR - LLM evaluation failed: 'ChatContext' object has no attribute 'append'
{"message": "LLM evaluation failed: 'ChatContext' object has no attribute 'append'", "level": "ERROR", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.551874+00:00"}
2025-07-23 10:59:40,551 - workflow-agent - WARNING - 🚨 LLM evaluation failed - using keyword-based fallback
{"message": "🚨 LLM evaluation failed - using keyword-based fallback", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.551874+00:00"}
2025-07-23 10:59:40,551 - workflow-agent - INFO - 🔄 FALLBACK RESULT: 1/10 keywords matched, confidence: 0.10, should_trigger: False
{"message": "🔄 FALLBACK RESULT: 1/10 keywords matched, confidence: 0.10, should_trigger: False", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.551874+00:00"}
2025-07-23 10:59:40,551 - workflow-agent - INFO -     ✅ CONDITION STATUS: {'should_trigger': False, 'confidence': 0.1, 'reason': "Fallback keyword analysis: 1/10 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')", 'condition_type': 'ai_fallback', 'prompt': 'Person seems uninterested, hostile, or wants to end the call'}
{"message": "    ✅ CONDITION STATUS: {'should_trigger': False, 'confidence': 0.1, 'reason': \"Fallback keyword analysis: 1/10 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')\", 'condition_type': 'ai_fallback', 'prompt': 'Person seems uninterested, hostile, or wants to end the call'}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.551874+00:00"}
2025-07-23 10:59:40,551 - workflow-agent - INFO -     ❌ CONDITION NOT MET: Fallback keyword analysis: 1/10 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')
{"message": "    ❌ CONDITION NOT MET: Fallback keyword analysis: 1/10 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.551874+00:00"}
2025-07-23 10:59:40,552 - workflow-agent - INFO -   📋 Edge 3: conversation-1752584446694 → condition-1752585421207 (type: condition)
{"message": "  📋 Edge 3: conversation-1752584446694 → condition-1752585421207 (type: condition)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.552874+00:00"}
2025-07-23 10:59:40,552 - workflow-agent - INFO -     🎭 CONDITION TYPE: ai
{"message": "    🎭 CONDITION TYPE: ai", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.552874+00:00"}
2025-07-23 10:59:40,552 - workflow-agent - INFO -     📝 CONDITION CONFIG: {'type': 'ai', 'prompt': 'Person is busy or wants to be called back later', 'next_node': 'schedule_callback', 'confidence_threshold': 0.7}
{"message": "    📝 CONDITION CONFIG: {'type': 'ai', 'prompt': 'Person is busy or wants to be called back later', 'next_node': 'schedule_callback', 'confidence_threshold': 0.7}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.552874+00:00"}
2025-07-23 10:59:40,552 - workflow-agent - INFO - 🎯 EVALUATING CONDITION: condition-1752585421207 (type: ai)
{"message": "🎯 EVALUATING CONDITION: condition-1752585421207 (type: ai)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.552874+00:00"}
2025-07-23 10:59:40,552 - workflow-agent - INFO - 🔍 CONDITION DATA: {'type': 'ai', 'prompt': 'Person is busy or wants to be called back later', 'next_node': 'schedule_callback', 'confidence_threshold': 0.7}
{"message": "🔍 CONDITION DATA: {'type': 'ai', 'prompt': 'Person is busy or wants to be called back later', 'next_node': 'schedule_callback', 'confidence_threshold': 0.7}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.552874+00:00"}
2025-07-23 10:59:40,553 - workflow-agent - INFO - 🧠 AI CONDITION PROMPT: Person is busy or wants to be called back later
{"message": "🧠 AI CONDITION PROMPT: Person is busy or wants to be called back later", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.553876+00:00"}
2025-07-23 10:59:40,553 - workflow-agent - INFO - 🎯 CONFIDENCE THRESHOLD: 0.7
{"message": "🎯 CONFIDENCE THRESHOLD: 0.7", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.553876+00:00"}
2025-07-23 10:59:40,553 - workflow-agent - INFO - 🧠 EVALUATING AI CONDITION with context: 157 chars
{"message": "🧠 EVALUATING AI CONDITION with context: 157 chars", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.553876+00:00"}
2025-07-23 10:59:40,554 - workflow-agent - ERROR - LLM evaluation failed: 'ChatContext' object has no attribute 'append'
{"message": "LLM evaluation failed: 'ChatContext' object has no attribute 'append'", "level": "ERROR", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.554876+00:00"}
2025-07-23 10:59:40,554 - workflow-agent - WARNING - 🚨 LLM evaluation failed - using keyword-based fallback
{"message": "🚨 LLM evaluation failed - using keyword-based fallback", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.554876+00:00"}
2025-07-23 10:59:40,554 - workflow-agent - INFO - 🔄 FALLBACK RESULT: 1/10 keywords matched, confidence: 0.10, should_trigger: False
{"message": "🔄 FALLBACK RESULT: 1/10 keywords matched, confidence: 0.10, should_trigger: False", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.554876+00:00"}
2025-07-23 10:59:40,554 - workflow-agent - INFO -     ✅ CONDITION STATUS: {'should_trigger': False, 'confidence': 0.1, 'reason': "Fallback keyword analysis: 1/10 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')", 'condition_type': 'ai_fallback', 'prompt': 'Person is busy or wants to be called back later'}
{"message": "    ✅ CONDITION STATUS: {'should_trigger': False, 'confidence': 0.1, 'reason': \"Fallback keyword analysis: 1/10 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')\", 'condition_type': 'ai_fallback', 'prompt': 'Person is busy or wants to be called back later'}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.554876+00:00"}
2025-07-23 10:59:40,555 - workflow-agent - INFO -     ❌ CONDITION NOT MET: Fallback keyword analysis: 1/10 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')
{"message": "    ❌ CONDITION NOT MET: Fallback keyword analysis: 1/10 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.555876+00:00"}
2025-07-23 10:59:40,555 - workflow-agent - INFO - 🔍 CHECKING WORKFLOWAGENT TRANSITION MECHANISM
{"message": "🔍 CHECKING WORKFLOWAGENT TRANSITION MECHANISM", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.555876+00:00"}
2025-07-23 10:59:40,555 - workflow-agent - WARNING - ❌ NO _determine_next_node METHOD - This might be the issue!
{"message": "❌ NO _determine_next_node METHOD - This might be the issue!", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.555876+00:00"}
2025-07-23 10:59:40,555 - workflow-agent - WARNING - ❌ NO _move_to_next_step METHOD
{"message": "❌ NO _move_to_next_step METHOD", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.555876+00:00"}
2025-07-23 10:59:40,556 - workflow-agent - WARNING - 🚨 WORKFLOWAGENT TRANSITION ANALYSIS:
{"message": "🚨 WORKFLOWAGENT TRANSITION ANALYSIS:", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.556876+00:00"}
2025-07-23 10:59:40,556 - workflow-agent - WARNING - 🚨 - Current approach: LLM tool-based workflow
{"message": "🚨 - Current approach: LLM tool-based workflow", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.556876+00:00"}
2025-07-23 10:59:40,556 - workflow-agent - WARNING - 🚨 - Transition method: Function tools (@function_tool)
{"message": "🚨 - Transition method: Function tools (@function_tool)", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.556876+00:00"}
2025-07-23 10:59:40,556 - workflow-agent - WARNING - 🚨 - Condition evaluation: ❓ NEEDS INVESTIGATION
{"message": "🚨 - Condition evaluation: ❓ NEEDS INVESTIGATION", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.556876+00:00"}
2025-07-23 10:59:40,556 - workflow-agent - WARNING - 🚨 - This explains why agent stays on same node!
{"message": "🚨 - This explains why agent stays on same node!", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.556876+00:00"}
2025-07-23 10:59:40,557 - workflow-agent - WARNING - Could not extract JWT auth token for backend API calls
{"message": "Could not extract JWT auth token for backend API calls", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.557881+00:00"}
2025-07-23 10:59:40,557 - workflow-agent - WARNING - User ID available but no JWT token - using legacy app tools only
{"message": "User ID available but no JWT token - using legacy app tools only", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.557881+00:00"}
2025-07-23 10:59:40,557 - workflow-agent - INFO - Added legacy Google Calendar tools as fallback
{"message": "Added legacy Google Calendar tools as fallback", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.557881+00:00"}
2025-07-23 10:59:40,558 - workflow-agent - INFO - Found current step node: conversation-1752584446694 (type: conversation)
{"message": "Found current step node: conversation-1752584446694 (type: conversation)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.558885+00:00"}
2025-07-23 10:59:40,558 - workflow-agent - INFO - Creating tools for pathway node: conversation-1752584446694 (type: conversation)
{"message": "Creating tools for pathway node: conversation-1752584446694 (type: conversation)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.558885+00:00"}
2025-07-23 10:59:40,558 - workflow-agent - INFO - Added 0 pathway node tools for node: conversation-1752584446694
{"message": "Added 0 pathway node tools for node: conversation-1752584446694", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.558885+00:00"}
2025-07-23 10:59:40,559 - workflow-agent - INFO - Enhanced tools for step conversation-1752584446694: 7 total tools
{"message": "Enhanced tools for step conversation-1752584446694: 7 total tools", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.559882+00:00"}
2025-07-23 10:59:40,559 - workflow-agent - INFO - Updated agent instructions for workflow step: conversation-1752584446694
{"message": "Updated agent instructions for workflow step: conversation-1752584446694", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.559882+00:00"}
2025-07-23 10:59:40,559 - workflow-agent - INFO - WorkflowAgent llm_node executing with 7 tools for step: conversation-1752584446694
{"message": "WorkflowAgent llm_node executing with 7 tools for step: conversation-1752584446694", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:40.559882+00:00"}
2025-07-23 10:59:53,118 - workflow-agent - INFO - WorkflowAgent user turn completed - updating workflow context
{"message": "WorkflowAgent user turn completed - updating workflow context", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.118102+00:00"}
2025-07-23 10:59:53,119 - workflow-agent - INFO - 🚨 ============ PATHWAY TOOL INJECTION START ============ 🚨
{"message": "🚨 ============ PATHWAY TOOL INJECTION START ============ 🚨", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.119101+00:00"}
2025-07-23 10:59:53,119 - workflow-agent - INFO - 🔍 Current workflow state: conversation-1752584446694
{"message": "🔍 Current workflow state: conversation-1752584446694", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.119101+00:00"}
2025-07-23 10:59:53,120 - workflow-agent - INFO - Found current step node: conversation-1752584446694 (type: conversation)
{"message": "Found current step node: conversation-1752584446694 (type: conversation)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.120100+00:00"}
2025-07-23 10:59:53,120 - workflow-agent - INFO - 🎯 CURRENT NODE FOUND: conversation-1752584446694 (type: conversation)
{"message": "🎯 CURRENT NODE FOUND: conversation-1752584446694 (type: conversation)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.120100+00:00"}
2025-07-23 10:59:53,120 - workflow-agent - INFO - 🔄 ============ CHECKING TRANSITIONS FROM NODE: conversation-1752584446694 ============ 🔄
{"message": "🔄 ============ CHECKING TRANSITIONS FROM NODE: conversation-1752584446694 ============ 🔄", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.120100+00:00"}
2025-07-23 10:59:53,120 - workflow-agent - INFO - 🔍 OUTGOING EDGES from conversation-1752584446694: 3
{"message": "🔍 OUTGOING EDGES from conversation-1752584446694: 3", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.120100+00:00"}
2025-07-23 10:59:53,120 - workflow-agent - INFO -   📋 Edge 1: conversation-1752584446694 → condition-1752585419519 (type: condition)
{"message": "  📋 Edge 1: conversation-1752584446694 → condition-1752585419519 (type: condition)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.120100+00:00"}
2025-07-23 10:59:53,120 - workflow-agent - INFO -     🎭 CONDITION TYPE: ai
{"message": "    🎭 CONDITION TYPE: ai", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.120100+00:00"}
2025-07-23 10:59:53,121 - workflow-agent - INFO -     📝 CONDITION CONFIG: {'type': 'ai', 'prompt': 'Person is available to talk now and shows interest in the conversation', 'next_node': 'qualify_lead', 'confidence_threshold': 0.7}
{"message": "    📝 CONDITION CONFIG: {'type': 'ai', 'prompt': 'Person is available to talk now and shows interest in the conversation', 'next_node': 'qualify_lead', 'confidence_threshold': 0.7}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.121100+00:00"}
2025-07-23 10:59:53,121 - workflow-agent - INFO - 🎯 EVALUATING CONDITION: condition-1752585419519 (type: ai)
{"message": "🎯 EVALUATING CONDITION: condition-1752585419519 (type: ai)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.121100+00:00"}
2025-07-23 10:59:53,121 - workflow-agent - INFO - 🔍 CONDITION DATA: {'type': 'ai', 'prompt': 'Person is available to talk now and shows interest in the conversation', 'next_node': 'qualify_lead', 'confidence_threshold': 0.7}
{"message": "🔍 CONDITION DATA: {'type': 'ai', 'prompt': 'Person is available to talk now and shows interest in the conversation', 'next_node': 'qualify_lead', 'confidence_threshold': 0.7}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.121100+00:00"}
2025-07-23 10:59:53,121 - workflow-agent - INFO - 🧠 AI CONDITION PROMPT: Person is available to talk now and shows interest in the conversation
{"message": "🧠 AI CONDITION PROMPT: Person is available to talk now and shows interest in the conversation", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.121100+00:00"}
2025-07-23 10:59:53,121 - workflow-agent - INFO - 🎯 CONFIDENCE THRESHOLD: 0.7
{"message": "🎯 CONFIDENCE THRESHOLD: 0.7", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.121100+00:00"}
2025-07-23 10:59:53,121 - workflow-agent - INFO - 🧠 EVALUATING AI CONDITION with context: 157 chars
{"message": "🧠 EVALUATING AI CONDITION with context: 157 chars", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.121100+00:00"}
2025-07-23 10:59:53,122 - workflow-agent - ERROR - LLM evaluation failed: 'ChatContext' object has no attribute 'append'
{"message": "LLM evaluation failed: 'ChatContext' object has no attribute 'append'", "level": "ERROR", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.122100+00:00"}
2025-07-23 10:59:53,122 - workflow-agent - WARNING - 🚨 LLM evaluation failed - using keyword-based fallback
{"message": "🚨 LLM evaluation failed - using keyword-based fallback", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.122100+00:00"}
2025-07-23 10:59:53,122 - workflow-agent - INFO - 🔄 FALLBACK RESULT: 4/12 keywords matched, confidence: 0.33, should_trigger: False
{"message": "🔄 FALLBACK RESULT: 4/12 keywords matched, confidence: 0.33, should_trigger: False", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.122100+00:00"}
2025-07-23 10:59:53,122 - workflow-agent - INFO -     ✅ CONDITION STATUS: {'should_trigger': False, 'confidence': 0.3333333333333333, 'reason': "Fallback keyword analysis: 4/12 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')", 'condition_type': 'ai_fallback', 'prompt': 'Person is available to talk now and shows interest in the conversation'}
{"message": "    ✅ CONDITION STATUS: {'should_trigger': False, 'confidence': 0.3333333333333333, 'reason': \"Fallback keyword analysis: 4/12 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')\", 'condition_type': 'ai_fallback', 'prompt': 'Person is available to talk now and shows interest in the conversation'}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.122100+00:00"}
2025-07-23 10:59:53,122 - workflow-agent - INFO -     ❌ CONDITION NOT MET: Fallback keyword analysis: 4/12 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')
{"message": "    ❌ CONDITION NOT MET: Fallback keyword analysis: 4/12 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.122100+00:00"}
2025-07-23 10:59:53,123 - workflow-agent - INFO -   📋 Edge 2: conversation-1752584446694 → condition-1752585422872 (type: condition)
{"message": "  📋 Edge 2: conversation-1752584446694 → condition-1752585422872 (type: condition)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.123101+00:00"}
2025-07-23 10:59:53,123 - workflow-agent - INFO -     🎭 CONDITION TYPE: ai
{"message": "    🎭 CONDITION TYPE: ai", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.123101+00:00"}
2025-07-23 10:59:53,123 - workflow-agent - INFO -     📝 CONDITION CONFIG: {'type': 'ai', 'prompt': 'Person seems uninterested, hostile, or wants to end the call', 'next_node': 'polite_decline', 'confidence_threshold': 0.8}
{"message": "    📝 CONDITION CONFIG: {'type': 'ai', 'prompt': 'Person seems uninterested, hostile, or wants to end the call', 'next_node': 'polite_decline', 'confidence_threshold': 0.8}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.123101+00:00"}
2025-07-23 10:59:53,123 - workflow-agent - INFO - 🎯 EVALUATING CONDITION: condition-1752585422872 (type: ai)
{"message": "🎯 EVALUATING CONDITION: condition-1752585422872 (type: ai)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.123101+00:00"}
2025-07-23 10:59:53,123 - workflow-agent - INFO - 🔍 CONDITION DATA: {'type': 'ai', 'prompt': 'Person seems uninterested, hostile, or wants to end the call', 'next_node': 'polite_decline', 'confidence_threshold': 0.8}
{"message": "🔍 CONDITION DATA: {'type': 'ai', 'prompt': 'Person seems uninterested, hostile, or wants to end the call', 'next_node': 'polite_decline', 'confidence_threshold': 0.8}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.123101+00:00"}
2025-07-23 10:59:53,124 - workflow-agent - INFO - 🧠 AI CONDITION PROMPT: Person seems uninterested, hostile, or wants to end the call
{"message": "🧠 AI CONDITION PROMPT: Person seems uninterested, hostile, or wants to end the call", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.124101+00:00"}
2025-07-23 10:59:53,124 - workflow-agent - INFO - 🎯 CONFIDENCE THRESHOLD: 0.8
{"message": "🎯 CONFIDENCE THRESHOLD: 0.8", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.124101+00:00"}
2025-07-23 10:59:53,124 - workflow-agent - INFO - 🧠 EVALUATING AI CONDITION with context: 157 chars
{"message": "🧠 EVALUATING AI CONDITION with context: 157 chars", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.124101+00:00"}
2025-07-23 10:59:53,125 - workflow-agent - ERROR - LLM evaluation failed: 'ChatContext' object has no attribute 'append'
{"message": "LLM evaluation failed: 'ChatContext' object has no attribute 'append'", "level": "ERROR", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.125102+00:00"}
2025-07-23 10:59:53,125 - workflow-agent - WARNING - 🚨 LLM evaluation failed - using keyword-based fallback
{"message": "🚨 LLM evaluation failed - using keyword-based fallback", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.125102+00:00"}
2025-07-23 10:59:53,126 - workflow-agent - INFO - 🔄 FALLBACK RESULT: 1/10 keywords matched, confidence: 0.10, should_trigger: False
{"message": "🔄 FALLBACK RESULT: 1/10 keywords matched, confidence: 0.10, should_trigger: False", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.126608+00:00"}
2025-07-23 10:59:53,126 - workflow-agent - INFO -     ✅ CONDITION STATUS: {'should_trigger': False, 'confidence': 0.1, 'reason': "Fallback keyword analysis: 1/10 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')", 'condition_type': 'ai_fallback', 'prompt': 'Person seems uninterested, hostile, or wants to end the call'}
{"message": "    ✅ CONDITION STATUS: {'should_trigger': False, 'confidence': 0.1, 'reason': \"Fallback keyword analysis: 1/10 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')\", 'condition_type': 'ai_fallback', 'prompt': 'Person seems uninterested, hostile, or wants to end the call'}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.126608+00:00"}
2025-07-23 10:59:53,127 - workflow-agent - INFO -     ❌ CONDITION NOT MET: Fallback keyword analysis: 1/10 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')
{"message": "    ❌ CONDITION NOT MET: Fallback keyword analysis: 1/10 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.127614+00:00"}
2025-07-23 10:59:53,127 - workflow-agent - INFO -   📋 Edge 3: conversation-1752584446694 → condition-1752585421207 (type: condition)
{"message": "  📋 Edge 3: conversation-1752584446694 → condition-1752585421207 (type: condition)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.127614+00:00"}
2025-07-23 10:59:53,127 - workflow-agent - INFO -     🎭 CONDITION TYPE: ai
{"message": "    🎭 CONDITION TYPE: ai", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.127614+00:00"}
2025-07-23 10:59:53,128 - workflow-agent - INFO -     📝 CONDITION CONFIG: {'type': 'ai', 'prompt': 'Person is busy or wants to be called back later', 'next_node': 'schedule_callback', 'confidence_threshold': 0.7}
{"message": "    📝 CONDITION CONFIG: {'type': 'ai', 'prompt': 'Person is busy or wants to be called back later', 'next_node': 'schedule_callback', 'confidence_threshold': 0.7}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.128620+00:00"}
2025-07-23 10:59:53,129 - workflow-agent - INFO - 🎯 EVALUATING CONDITION: condition-1752585421207 (type: ai)
{"message": "🎯 EVALUATING CONDITION: condition-1752585421207 (type: ai)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.129622+00:00"}
2025-07-23 10:59:53,129 - workflow-agent - INFO - 🔍 CONDITION DATA: {'type': 'ai', 'prompt': 'Person is busy or wants to be called back later', 'next_node': 'schedule_callback', 'confidence_threshold': 0.7}
{"message": "🔍 CONDITION DATA: {'type': 'ai', 'prompt': 'Person is busy or wants to be called back later', 'next_node': 'schedule_callback', 'confidence_threshold': 0.7}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.129622+00:00"}
2025-07-23 10:59:53,129 - workflow-agent - INFO - 🧠 AI CONDITION PROMPT: Person is busy or wants to be called back later
{"message": "🧠 AI CONDITION PROMPT: Person is busy or wants to be called back later", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.129622+00:00"}
2025-07-23 10:59:53,130 - workflow-agent - INFO - 🎯 CONFIDENCE THRESHOLD: 0.7
{"message": "🎯 CONFIDENCE THRESHOLD: 0.7", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.130619+00:00"}
2025-07-23 10:59:53,130 - workflow-agent - INFO - 🧠 EVALUATING AI CONDITION with context: 157 chars
{"message": "🧠 EVALUATING AI CONDITION with context: 157 chars", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.130619+00:00"}
2025-07-23 10:59:53,133 - workflow-agent - ERROR - LLM evaluation failed: 'ChatContext' object has no attribute 'append'
{"message": "LLM evaluation failed: 'ChatContext' object has no attribute 'append'", "level": "ERROR", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.133619+00:00"}
2025-07-23 10:59:53,134 - workflow-agent - WARNING - 🚨 LLM evaluation failed - using keyword-based fallback
{"message": "🚨 LLM evaluation failed - using keyword-based fallback", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.134621+00:00"}
2025-07-23 10:59:53,135 - workflow-agent - INFO - 🔄 FALLBACK RESULT: 1/10 keywords matched, confidence: 0.10, should_trigger: False
{"message": "🔄 FALLBACK RESULT: 1/10 keywords matched, confidence: 0.10, should_trigger: False", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.135618+00:00"}
2025-07-23 10:59:53,135 - workflow-agent - INFO -     ✅ CONDITION STATUS: {'should_trigger': False, 'confidence': 0.1, 'reason': "Fallback keyword analysis: 1/10 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')", 'condition_type': 'ai_fallback', 'prompt': 'Person is busy or wants to be called back later'}
{"message": "    ✅ CONDITION STATUS: {'should_trigger': False, 'confidence': 0.1, 'reason': \"Fallback keyword analysis: 1/10 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')\", 'condition_type': 'ai_fallback', 'prompt': 'Person is busy or wants to be called back later'}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.135618+00:00"}
2025-07-23 10:59:53,136 - workflow-agent - INFO -     ❌ CONDITION NOT MET: Fallback keyword analysis: 1/10 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')
{"message": "    ❌ CONDITION NOT MET: Fallback keyword analysis: 1/10 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.136842+00:00"}
2025-07-23 10:59:53,137 - workflow-agent - INFO - 🔍 CHECKING WORKFLOWAGENT TRANSITION MECHANISM
{"message": "🔍 CHECKING WORKFLOWAGENT TRANSITION MECHANISM", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.137843+00:00"}
2025-07-23 10:59:53,139 - workflow-agent - WARNING - ❌ NO _determine_next_node METHOD - This might be the issue!
{"message": "❌ NO _determine_next_node METHOD - This might be the issue!", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.139848+00:00"}
2025-07-23 10:59:53,140 - workflow-agent - WARNING - ❌ NO _move_to_next_step METHOD
{"message": "❌ NO _move_to_next_step METHOD", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.140845+00:00"}
2025-07-23 10:59:53,140 - workflow-agent - WARNING - 🚨 WORKFLOWAGENT TRANSITION ANALYSIS:
{"message": "🚨 WORKFLOWAGENT TRANSITION ANALYSIS:", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.140845+00:00"}
2025-07-23 10:59:53,140 - workflow-agent - WARNING - 🚨 - Current approach: LLM tool-based workflow
{"message": "🚨 - Current approach: LLM tool-based workflow", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.140845+00:00"}
2025-07-23 10:59:53,140 - workflow-agent - WARNING - 🚨 - Transition method: Function tools (@function_tool)
{"message": "🚨 - Transition method: Function tools (@function_tool)", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.140845+00:00"}
2025-07-23 10:59:53,141 - workflow-agent - WARNING - 🚨 - Condition evaluation: ❓ NEEDS INVESTIGATION
{"message": "🚨 - Condition evaluation: ❓ NEEDS INVESTIGATION", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.141844+00:00"}
2025-07-23 10:59:53,141 - workflow-agent - WARNING - 🚨 - This explains why agent stays on same node!
{"message": "🚨 - This explains why agent stays on same node!", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.141844+00:00"}
2025-07-23 10:59:53,142 - workflow-agent - WARNING - Could not extract JWT auth token for backend API calls
{"message": "Could not extract JWT auth token for backend API calls", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.142844+00:00"}
2025-07-23 10:59:53,142 - workflow-agent - WARNING - User ID available but no JWT token - using legacy app tools only
{"message": "User ID available but no JWT token - using legacy app tools only", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.142844+00:00"}
2025-07-23 10:59:53,142 - workflow-agent - INFO - Added legacy Google Calendar tools as fallback
{"message": "Added legacy Google Calendar tools as fallback", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.142844+00:00"}
2025-07-23 10:59:53,142 - workflow-agent - INFO - Found current step node: conversation-1752584446694 (type: conversation)
{"message": "Found current step node: conversation-1752584446694 (type: conversation)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.142844+00:00"}
2025-07-23 10:59:53,144 - workflow-agent - INFO - Creating tools for pathway node: conversation-1752584446694 (type: conversation)
{"message": "Creating tools for pathway node: conversation-1752584446694 (type: conversation)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.144041+00:00"}
2025-07-23 10:59:53,147 - workflow-agent - INFO - Added 0 pathway node tools for node: conversation-1752584446694
{"message": "Added 0 pathway node tools for node: conversation-1752584446694", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.147045+00:00"}
2025-07-23 10:59:53,148 - workflow-agent - INFO - Enhanced tools for step conversation-1752584446694: 7 total tools
{"message": "Enhanced tools for step conversation-1752584446694: 7 total tools", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.148041+00:00"}
2025-07-23 10:59:53,149 - workflow-agent - INFO - Updated agent instructions for workflow step: conversation-1752584446694
{"message": "Updated agent instructions for workflow step: conversation-1752584446694", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.149039+00:00"}
2025-07-23 10:59:53,149 - workflow-agent - INFO - WorkflowAgent llm_node executing with 7 tools for step: conversation-1752584446694
{"message": "WorkflowAgent llm_node executing with 7 tools for step: conversation-1752584446694", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T08:59:53.149039+00:00"}
2025-07-23 11:00:07,908 - workflow-agent - INFO - WorkflowAgent user turn completed - updating workflow context
{"message": "WorkflowAgent user turn completed - updating workflow context", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.908269+00:00"}
2025-07-23 11:00:07,911 - workflow-agent - INFO - 🚨 ============ PATHWAY TOOL INJECTION START ============ 🚨
{"message": "🚨 ============ PATHWAY TOOL INJECTION START ============ 🚨", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.911378+00:00"}
2025-07-23 11:00:07,912 - workflow-agent - INFO - 🔍 Current workflow state: conversation-1752584446694
{"message": "🔍 Current workflow state: conversation-1752584446694", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.912500+00:00"}
2025-07-23 11:00:07,913 - workflow-agent - INFO - Found current step node: conversation-1752584446694 (type: conversation)
{"message": "Found current step node: conversation-1752584446694 (type: conversation)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.913500+00:00"}
2025-07-23 11:00:07,913 - workflow-agent - INFO - 🎯 CURRENT NODE FOUND: conversation-1752584446694 (type: conversation)
{"message": "🎯 CURRENT NODE FOUND: conversation-1752584446694 (type: conversation)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.913500+00:00"}
2025-07-23 11:00:07,914 - workflow-agent - INFO - 🔄 ============ CHECKING TRANSITIONS FROM NODE: conversation-1752584446694 ============ 🔄
{"message": "🔄 ============ CHECKING TRANSITIONS FROM NODE: conversation-1752584446694 ============ 🔄", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.914501+00:00"}
2025-07-23 11:00:07,914 - workflow-agent - INFO - 🔍 OUTGOING EDGES from conversation-1752584446694: 3
{"message": "🔍 OUTGOING EDGES from conversation-1752584446694: 3", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.914501+00:00"}
2025-07-23 11:00:07,915 - workflow-agent - INFO -   📋 Edge 1: conversation-1752584446694 → condition-1752585419519 (type: condition)
{"message": "  📋 Edge 1: conversation-1752584446694 → condition-1752585419519 (type: condition)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.915502+00:00"}
2025-07-23 11:00:07,915 - workflow-agent - INFO -     🎭 CONDITION TYPE: ai
{"message": "    🎭 CONDITION TYPE: ai", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.915502+00:00"}
2025-07-23 11:00:07,916 - workflow-agent - INFO -     📝 CONDITION CONFIG: {'type': 'ai', 'prompt': 'Person is available to talk now and shows interest in the conversation', 'next_node': 'qualify_lead', 'confidence_threshold': 0.7}
{"message": "    📝 CONDITION CONFIG: {'type': 'ai', 'prompt': 'Person is available to talk now and shows interest in the conversation', 'next_node': 'qualify_lead', 'confidence_threshold': 0.7}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.916501+00:00"}
2025-07-23 11:00:07,916 - workflow-agent - INFO - 🎯 EVALUATING CONDITION: condition-1752585419519 (type: ai)
{"message": "🎯 EVALUATING CONDITION: condition-1752585419519 (type: ai)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.916501+00:00"}
2025-07-23 11:00:07,917 - workflow-agent - INFO - 🔍 CONDITION DATA: {'type': 'ai', 'prompt': 'Person is available to talk now and shows interest in the conversation', 'next_node': 'qualify_lead', 'confidence_threshold': 0.7}
{"message": "🔍 CONDITION DATA: {'type': 'ai', 'prompt': 'Person is available to talk now and shows interest in the conversation', 'next_node': 'qualify_lead', 'confidence_threshold': 0.7}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.917500+00:00"}
2025-07-23 11:00:07,917 - workflow-agent - INFO - 🧠 AI CONDITION PROMPT: Person is available to talk now and shows interest in the conversation
{"message": "🧠 AI CONDITION PROMPT: Person is available to talk now and shows interest in the conversation", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.917500+00:00"}
2025-07-23 11:00:07,917 - workflow-agent - INFO - 🎯 CONFIDENCE THRESHOLD: 0.7
{"message": "🎯 CONFIDENCE THRESHOLD: 0.7", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.917500+00:00"}
2025-07-23 11:00:07,917 - workflow-agent - INFO - 🧠 EVALUATING AI CONDITION with context: 157 chars
{"message": "🧠 EVALUATING AI CONDITION with context: 157 chars", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.917500+00:00"}
2025-07-23 11:00:07,918 - workflow-agent - ERROR - LLM evaluation failed: 'ChatContext' object has no attribute 'append'
{"message": "LLM evaluation failed: 'ChatContext' object has no attribute 'append'", "level": "ERROR", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.918504+00:00"}
2025-07-23 11:00:07,918 - workflow-agent - WARNING - 🚨 LLM evaluation failed - using keyword-based fallback
{"message": "🚨 LLM evaluation failed - using keyword-based fallback", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.918504+00:00"}
2025-07-23 11:00:07,918 - workflow-agent - INFO - 🔄 FALLBACK RESULT: 4/12 keywords matched, confidence: 0.33, should_trigger: False
{"message": "🔄 FALLBACK RESULT: 4/12 keywords matched, confidence: 0.33, should_trigger: False", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.918504+00:00"}
2025-07-23 11:00:07,918 - workflow-agent - INFO -     ✅ CONDITION STATUS: {'should_trigger': False, 'confidence': 0.3333333333333333, 'reason': "Fallback keyword analysis: 4/12 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')", 'condition_type': 'ai_fallback', 'prompt': 'Person is available to talk now and shows interest in the conversation'}
{"message": "    ✅ CONDITION STATUS: {'should_trigger': False, 'confidence': 0.3333333333333333, 'reason': \"Fallback keyword analysis: 4/12 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')\", 'condition_type': 'ai_fallback', 'prompt': 'Person is available to talk now and shows interest in the conversation'}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.918504+00:00"}
2025-07-23 11:00:07,918 - workflow-agent - INFO -     ❌ CONDITION NOT MET: Fallback keyword analysis: 4/12 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')
{"message": "    ❌ CONDITION NOT MET: Fallback keyword analysis: 4/12 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.918504+00:00"}
2025-07-23 11:00:07,919 - workflow-agent - INFO -   📋 Edge 2: conversation-1752584446694 → condition-1752585422872 (type: condition)
{"message": "  📋 Edge 2: conversation-1752584446694 → condition-1752585422872 (type: condition)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.919504+00:00"}
2025-07-23 11:00:07,919 - workflow-agent - INFO -     🎭 CONDITION TYPE: ai
{"message": "    🎭 CONDITION TYPE: ai", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.919504+00:00"}
2025-07-23 11:00:07,919 - workflow-agent - INFO -     📝 CONDITION CONFIG: {'type': 'ai', 'prompt': 'Person seems uninterested, hostile, or wants to end the call', 'next_node': 'polite_decline', 'confidence_threshold': 0.8}
{"message": "    📝 CONDITION CONFIG: {'type': 'ai', 'prompt': 'Person seems uninterested, hostile, or wants to end the call', 'next_node': 'polite_decline', 'confidence_threshold': 0.8}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.919504+00:00"}
2025-07-23 11:00:07,919 - workflow-agent - INFO - 🎯 EVALUATING CONDITION: condition-1752585422872 (type: ai)
{"message": "🎯 EVALUATING CONDITION: condition-1752585422872 (type: ai)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.919504+00:00"}
2025-07-23 11:00:07,920 - workflow-agent - INFO - 🔍 CONDITION DATA: {'type': 'ai', 'prompt': 'Person seems uninterested, hostile, or wants to end the call', 'next_node': 'polite_decline', 'confidence_threshold': 0.8}
{"message": "🔍 CONDITION DATA: {'type': 'ai', 'prompt': 'Person seems uninterested, hostile, or wants to end the call', 'next_node': 'polite_decline', 'confidence_threshold': 0.8}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.920506+00:00"}
2025-07-23 11:00:07,920 - workflow-agent - INFO - 🧠 AI CONDITION PROMPT: Person seems uninterested, hostile, or wants to end the call
{"message": "🧠 AI CONDITION PROMPT: Person seems uninterested, hostile, or wants to end the call", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.920506+00:00"}
2025-07-23 11:00:07,920 - workflow-agent - INFO - 🎯 CONFIDENCE THRESHOLD: 0.8
{"message": "🎯 CONFIDENCE THRESHOLD: 0.8", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.920506+00:00"}
2025-07-23 11:00:07,920 - workflow-agent - INFO - 🧠 EVALUATING AI CONDITION with context: 157 chars
{"message": "🧠 EVALUATING AI CONDITION with context: 157 chars", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.920506+00:00"}
2025-07-23 11:00:07,921 - workflow-agent - ERROR - LLM evaluation failed: 'ChatContext' object has no attribute 'append'
{"message": "LLM evaluation failed: 'ChatContext' object has no attribute 'append'", "level": "ERROR", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.921506+00:00"}
2025-07-23 11:00:07,921 - workflow-agent - WARNING - 🚨 LLM evaluation failed - using keyword-based fallback
{"message": "🚨 LLM evaluation failed - using keyword-based fallback", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.921506+00:00"}
2025-07-23 11:00:07,921 - workflow-agent - INFO - 🔄 FALLBACK RESULT: 1/10 keywords matched, confidence: 0.10, should_trigger: False
{"message": "🔄 FALLBACK RESULT: 1/10 keywords matched, confidence: 0.10, should_trigger: False", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.921506+00:00"}
2025-07-23 11:00:07,921 - workflow-agent - INFO -     ✅ CONDITION STATUS: {'should_trigger': False, 'confidence': 0.1, 'reason': "Fallback keyword analysis: 1/10 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')", 'condition_type': 'ai_fallback', 'prompt': 'Person seems uninterested, hostile, or wants to end the call'}
{"message": "    ✅ CONDITION STATUS: {'should_trigger': False, 'confidence': 0.1, 'reason': \"Fallback keyword analysis: 1/10 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')\", 'condition_type': 'ai_fallback', 'prompt': 'Person seems uninterested, hostile, or wants to end the call'}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.921506+00:00"}
2025-07-23 11:00:07,922 - workflow-agent - INFO -     ❌ CONDITION NOT MET: Fallback keyword analysis: 1/10 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')
{"message": "    ❌ CONDITION NOT MET: Fallback keyword analysis: 1/10 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.922506+00:00"}
2025-07-23 11:00:07,922 - workflow-agent - INFO -   📋 Edge 3: conversation-1752584446694 → condition-1752585421207 (type: condition)
{"message": "  📋 Edge 3: conversation-1752584446694 → condition-1752585421207 (type: condition)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.922506+00:00"}
2025-07-23 11:00:07,922 - workflow-agent - INFO -     🎭 CONDITION TYPE: ai
{"message": "    🎭 CONDITION TYPE: ai", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.922506+00:00"}
2025-07-23 11:00:07,923 - workflow-agent - INFO -     📝 CONDITION CONFIG: {'type': 'ai', 'prompt': 'Person is busy or wants to be called back later', 'next_node': 'schedule_callback', 'confidence_threshold': 0.7}
{"message": "    📝 CONDITION CONFIG: {'type': 'ai', 'prompt': 'Person is busy or wants to be called back later', 'next_node': 'schedule_callback', 'confidence_threshold': 0.7}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.923508+00:00"}
2025-07-23 11:00:07,923 - workflow-agent - INFO - 🎯 EVALUATING CONDITION: condition-1752585421207 (type: ai)
{"message": "🎯 EVALUATING CONDITION: condition-1752585421207 (type: ai)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.923508+00:00"}
2025-07-23 11:00:07,923 - workflow-agent - INFO - 🔍 CONDITION DATA: {'type': 'ai', 'prompt': 'Person is busy or wants to be called back later', 'next_node': 'schedule_callback', 'confidence_threshold': 0.7}
{"message": "🔍 CONDITION DATA: {'type': 'ai', 'prompt': 'Person is busy or wants to be called back later', 'next_node': 'schedule_callback', 'confidence_threshold': 0.7}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.923508+00:00"}
2025-07-23 11:00:07,923 - workflow-agent - INFO - 🧠 AI CONDITION PROMPT: Person is busy or wants to be called back later
{"message": "🧠 AI CONDITION PROMPT: Person is busy or wants to be called back later", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.923508+00:00"}
2025-07-23 11:00:07,924 - workflow-agent - INFO - 🎯 CONFIDENCE THRESHOLD: 0.7
{"message": "🎯 CONFIDENCE THRESHOLD: 0.7", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.924508+00:00"}
2025-07-23 11:00:07,924 - workflow-agent - INFO - 🧠 EVALUATING AI CONDITION with context: 157 chars
{"message": "🧠 EVALUATING AI CONDITION with context: 157 chars", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.924508+00:00"}
2025-07-23 11:00:07,925 - workflow-agent - ERROR - LLM evaluation failed: 'ChatContext' object has no attribute 'append'
{"message": "LLM evaluation failed: 'ChatContext' object has no attribute 'append'", "level": "ERROR", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.925508+00:00"}
2025-07-23 11:00:07,925 - workflow-agent - WARNING - 🚨 LLM evaluation failed - using keyword-based fallback
{"message": "🚨 LLM evaluation failed - using keyword-based fallback", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.925508+00:00"}
2025-07-23 11:00:07,925 - workflow-agent - INFO - 🔄 FALLBACK RESULT: 1/10 keywords matched, confidence: 0.10, should_trigger: False
{"message": "🔄 FALLBACK RESULT: 1/10 keywords matched, confidence: 0.10, should_trigger: False", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.925508+00:00"}
2025-07-23 11:00:07,925 - workflow-agent - INFO -     ✅ CONDITION STATUS: {'should_trigger': False, 'confidence': 0.1, 'reason': "Fallback keyword analysis: 1/10 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')", 'condition_type': 'ai_fallback', 'prompt': 'Person is busy or wants to be called back later'}
{"message": "    ✅ CONDITION STATUS: {'should_trigger': False, 'confidence': 0.1, 'reason': \"Fallback keyword analysis: 1/10 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')\", 'condition_type': 'ai_fallback', 'prompt': 'Person is busy or wants to be called back later'}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.925508+00:00"}
2025-07-23 11:00:07,926 - workflow-agent - INFO -     ❌ CONDITION NOT MET: Fallback keyword analysis: 1/10 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')
{"message": "    ❌ CONDITION NOT MET: Fallback keyword analysis: 1/10 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.926507+00:00"}
2025-07-23 11:00:07,926 - workflow-agent - INFO - 🔍 CHECKING WORKFLOWAGENT TRANSITION MECHANISM
{"message": "🔍 CHECKING WORKFLOWAGENT TRANSITION MECHANISM", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.926507+00:00"}
2025-07-23 11:00:07,926 - workflow-agent - WARNING - ❌ NO _determine_next_node METHOD - This might be the issue!
{"message": "❌ NO _determine_next_node METHOD - This might be the issue!", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.926507+00:00"}
2025-07-23 11:00:07,926 - workflow-agent - WARNING - ❌ NO _move_to_next_step METHOD
{"message": "❌ NO _move_to_next_step METHOD", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.926507+00:00"}
2025-07-23 11:00:07,926 - workflow-agent - WARNING - 🚨 WORKFLOWAGENT TRANSITION ANALYSIS:
{"message": "🚨 WORKFLOWAGENT TRANSITION ANALYSIS:", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.926507+00:00"}
2025-07-23 11:00:07,927 - workflow-agent - WARNING - 🚨 - Current approach: LLM tool-based workflow
{"message": "🚨 - Current approach: LLM tool-based workflow", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.927509+00:00"}
2025-07-23 11:00:07,927 - workflow-agent - WARNING - 🚨 - Transition method: Function tools (@function_tool)
{"message": "🚨 - Transition method: Function tools (@function_tool)", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.927509+00:00"}
2025-07-23 11:00:07,927 - workflow-agent - WARNING - 🚨 - Condition evaluation: ❓ NEEDS INVESTIGATION
{"message": "🚨 - Condition evaluation: ❓ NEEDS INVESTIGATION", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.927509+00:00"}
2025-07-23 11:00:07,928 - workflow-agent - WARNING - 🚨 - This explains why agent stays on same node!
{"message": "🚨 - This explains why agent stays on same node!", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.928509+00:00"}
2025-07-23 11:00:07,929 - workflow-agent - WARNING - Could not extract JWT auth token for backend API calls
{"message": "Could not extract JWT auth token for backend API calls", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.929511+00:00"}
2025-07-23 11:00:07,930 - workflow-agent - WARNING - User ID available but no JWT token - using legacy app tools only
{"message": "User ID available but no JWT token - using legacy app tools only", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.930519+00:00"}
2025-07-23 11:00:07,931 - workflow-agent - INFO - Added legacy Google Calendar tools as fallback
{"message": "Added legacy Google Calendar tools as fallback", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.931511+00:00"}
2025-07-23 11:00:07,931 - workflow-agent - INFO - Found current step node: conversation-1752584446694 (type: conversation)
{"message": "Found current step node: conversation-1752584446694 (type: conversation)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.931511+00:00"}
2025-07-23 11:00:07,931 - workflow-agent - INFO - Creating tools for pathway node: conversation-1752584446694 (type: conversation)
{"message": "Creating tools for pathway node: conversation-1752584446694 (type: conversation)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.931511+00:00"}
2025-07-23 11:00:07,931 - workflow-agent - INFO - Added 0 pathway node tools for node: conversation-1752584446694
{"message": "Added 0 pathway node tools for node: conversation-1752584446694", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.931511+00:00"}
2025-07-23 11:00:07,931 - workflow-agent - INFO - Enhanced tools for step conversation-1752584446694: 7 total tools
{"message": "Enhanced tools for step conversation-1752584446694: 7 total tools", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.931511+00:00"}
2025-07-23 11:00:07,931 - workflow-agent - INFO - Updated agent instructions for workflow step: conversation-1752584446694
{"message": "Updated agent instructions for workflow step: conversation-1752584446694", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.931511+00:00"}
2025-07-23 11:00:07,931 - workflow-agent - INFO - WorkflowAgent llm_node executing with 7 tools for step: conversation-1752584446694
{"message": "WorkflowAgent llm_node executing with 7 tools for step: conversation-1752584446694", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:07.931511+00:00"}
2025-07-23 11:00:17,988 - workflow-agent - INFO - WorkflowAgent user turn completed - updating workflow context
{"message": "WorkflowAgent user turn completed - updating workflow context", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:17.988204+00:00"}
2025-07-23 11:00:17,992 - workflow-agent - INFO - 🚨 ============ PATHWAY TOOL INJECTION START ============ 🚨
{"message": "🚨 ============ PATHWAY TOOL INJECTION START ============ 🚨", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:17.992321+00:00"}
2025-07-23 11:00:17,993 - workflow-agent - INFO - 🔍 Current workflow state: conversation-1752584446694
{"message": "🔍 Current workflow state: conversation-1752584446694", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:17.993200+00:00"}
2025-07-23 11:00:17,994 - workflow-agent - INFO - Found current step node: conversation-1752584446694 (type: conversation)
{"message": "Found current step node: conversation-1752584446694 (type: conversation)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:17.994203+00:00"}
2025-07-23 11:00:17,994 - workflow-agent - INFO - 🎯 CURRENT NODE FOUND: conversation-1752584446694 (type: conversation)
{"message": "🎯 CURRENT NODE FOUND: conversation-1752584446694 (type: conversation)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:17.994203+00:00"}
2025-07-23 11:00:17,995 - workflow-agent - INFO - 🔄 ============ CHECKING TRANSITIONS FROM NODE: conversation-1752584446694 ============ 🔄
{"message": "🔄 ============ CHECKING TRANSITIONS FROM NODE: conversation-1752584446694 ============ 🔄", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:17.995203+00:00"}
2025-07-23 11:00:17,995 - workflow-agent - INFO - 🔍 OUTGOING EDGES from conversation-1752584446694: 3
{"message": "🔍 OUTGOING EDGES from conversation-1752584446694: 3", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:17.995203+00:00"}
2025-07-23 11:00:17,996 - workflow-agent - INFO -   📋 Edge 1: conversation-1752584446694 → condition-1752585419519 (type: condition)
{"message": "  📋 Edge 1: conversation-1752584446694 → condition-1752585419519 (type: condition)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:17.996202+00:00"}
2025-07-23 11:00:17,996 - workflow-agent - INFO -     🎭 CONDITION TYPE: ai
{"message": "    🎭 CONDITION TYPE: ai", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:17.996202+00:00"}
2025-07-23 11:00:17,997 - workflow-agent - INFO -     📝 CONDITION CONFIG: {'type': 'ai', 'prompt': 'Person is available to talk now and shows interest in the conversation', 'next_node': 'qualify_lead', 'confidence_threshold': 0.7}
{"message": "    📝 CONDITION CONFIG: {'type': 'ai', 'prompt': 'Person is available to talk now and shows interest in the conversation', 'next_node': 'qualify_lead', 'confidence_threshold': 0.7}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:17.997200+00:00"}
2025-07-23 11:00:17,997 - workflow-agent - INFO - 🎯 EVALUATING CONDITION: condition-1752585419519 (type: ai)
{"message": "🎯 EVALUATING CONDITION: condition-1752585419519 (type: ai)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:17.997200+00:00"}
2025-07-23 11:00:17,997 - workflow-agent - INFO - 🔍 CONDITION DATA: {'type': 'ai', 'prompt': 'Person is available to talk now and shows interest in the conversation', 'next_node': 'qualify_lead', 'confidence_threshold': 0.7}
{"message": "🔍 CONDITION DATA: {'type': 'ai', 'prompt': 'Person is available to talk now and shows interest in the conversation', 'next_node': 'qualify_lead', 'confidence_threshold': 0.7}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:17.997855+00:00"}
2025-07-23 11:00:17,998 - workflow-agent - INFO - 🧠 AI CONDITION PROMPT: Person is available to talk now and shows interest in the conversation
{"message": "🧠 AI CONDITION PROMPT: Person is available to talk now and shows interest in the conversation", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:17.998361+00:00"}
2025-07-23 11:00:17,998 - workflow-agent - INFO - 🎯 CONFIDENCE THRESHOLD: 0.7
{"message": "🎯 CONFIDENCE THRESHOLD: 0.7", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:17.998361+00:00"}
2025-07-23 11:00:17,999 - workflow-agent - INFO - 🧠 EVALUATING AI CONDITION with context: 157 chars
{"message": "🧠 EVALUATING AI CONDITION with context: 157 chars", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:17.999371+00:00"}
2025-07-23 11:00:18,000 - workflow-agent - ERROR - LLM evaluation failed: 'ChatContext' object has no attribute 'append'
{"message": "LLM evaluation failed: 'ChatContext' object has no attribute 'append'", "level": "ERROR", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:18.000371+00:00"}
2025-07-23 11:00:18,000 - workflow-agent - WARNING - 🚨 LLM evaluation failed - using keyword-based fallback
{"message": "🚨 LLM evaluation failed - using keyword-based fallback", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:18.000371+00:00"}
2025-07-23 11:00:18,001 - workflow-agent - INFO - 🔄 FALLBACK RESULT: 4/12 keywords matched, confidence: 0.33, should_trigger: False
{"message": "🔄 FALLBACK RESULT: 4/12 keywords matched, confidence: 0.33, should_trigger: False", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:18.001372+00:00"}
2025-07-23 11:00:18,002 - workflow-agent - INFO -     ✅ CONDITION STATUS: {'should_trigger': False, 'confidence': 0.3333333333333333, 'reason': "Fallback keyword analysis: 4/12 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')", 'condition_type': 'ai_fallback', 'prompt': 'Person is available to talk now and shows interest in the conversation'}
{"message": "    ✅ CONDITION STATUS: {'should_trigger': False, 'confidence': 0.3333333333333333, 'reason': \"Fallback keyword analysis: 4/12 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')\", 'condition_type': 'ai_fallback', 'prompt': 'Person is available to talk now and shows interest in the conversation'}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:18.002375+00:00"}
2025-07-23 11:00:18,003 - workflow-agent - INFO -     ❌ CONDITION NOT MET: Fallback keyword analysis: 4/12 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')
{"message": "    ❌ CONDITION NOT MET: Fallback keyword analysis: 4/12 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:18.003370+00:00"}
2025-07-23 11:00:18,003 - workflow-agent - INFO -   📋 Edge 2: conversation-1752584446694 → condition-1752585422872 (type: condition)
{"message": "  📋 Edge 2: conversation-1752584446694 → condition-1752585422872 (type: condition)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:18.003370+00:00"}
2025-07-23 11:00:18,003 - workflow-agent - INFO -     🎭 CONDITION TYPE: ai
{"message": "    🎭 CONDITION TYPE: ai", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:18.003370+00:00"}
2025-07-23 11:00:18,004 - workflow-agent - INFO -     📝 CONDITION CONFIG: {'type': 'ai', 'prompt': 'Person seems uninterested, hostile, or wants to end the call', 'next_node': 'polite_decline', 'confidence_threshold': 0.8}
{"message": "    📝 CONDITION CONFIG: {'type': 'ai', 'prompt': 'Person seems uninterested, hostile, or wants to end the call', 'next_node': 'polite_decline', 'confidence_threshold': 0.8}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:18.004368+00:00"}
2025-07-23 11:00:18,004 - workflow-agent - INFO - 🎯 EVALUATING CONDITION: condition-1752585422872 (type: ai)
{"message": "🎯 EVALUATING CONDITION: condition-1752585422872 (type: ai)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:18.004368+00:00"}
2025-07-23 11:00:18,004 - workflow-agent - INFO - 🔍 CONDITION DATA: {'type': 'ai', 'prompt': 'Person seems uninterested, hostile, or wants to end the call', 'next_node': 'polite_decline', 'confidence_threshold': 0.8}
{"message": "🔍 CONDITION DATA: {'type': 'ai', 'prompt': 'Person seems uninterested, hostile, or wants to end the call', 'next_node': 'polite_decline', 'confidence_threshold': 0.8}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:18.004368+00:00"}
2025-07-23 11:00:18,004 - workflow-agent - INFO - 🧠 AI CONDITION PROMPT: Person seems uninterested, hostile, or wants to end the call
{"message": "🧠 AI CONDITION PROMPT: Person seems uninterested, hostile, or wants to end the call", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:18.004368+00:00"}
2025-07-23 11:00:18,005 - workflow-agent - INFO - 🎯 CONFIDENCE THRESHOLD: 0.8
{"message": "🎯 CONFIDENCE THRESHOLD: 0.8", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:18.005369+00:00"}
2025-07-23 11:00:18,005 - workflow-agent - INFO - 🧠 EVALUATING AI CONDITION with context: 157 chars
{"message": "🧠 EVALUATING AI CONDITION with context: 157 chars", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:18.005369+00:00"}
2025-07-23 11:00:18,005 - workflow-agent - ERROR - LLM evaluation failed: 'ChatContext' object has no attribute 'append'
{"message": "LLM evaluation failed: 'ChatContext' object has no attribute 'append'", "level": "ERROR", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:18.005369+00:00"}
2025-07-23 11:00:18,005 - workflow-agent - WARNING - 🚨 LLM evaluation failed - using keyword-based fallback
{"message": "🚨 LLM evaluation failed - using keyword-based fallback", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:18.005369+00:00"}
2025-07-23 11:00:18,005 - workflow-agent - INFO - 🔄 FALLBACK RESULT: 1/10 keywords matched, confidence: 0.10, should_trigger: False
{"message": "🔄 FALLBACK RESULT: 1/10 keywords matched, confidence: 0.10, should_trigger: False", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:18.005369+00:00"}
2025-07-23 11:00:18,006 - workflow-agent - INFO -     ✅ CONDITION STATUS: {'should_trigger': False, 'confidence': 0.1, 'reason': "Fallback keyword analysis: 1/10 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')", 'condition_type': 'ai_fallback', 'prompt': 'Person seems uninterested, hostile, or wants to end the call'}
{"message": "    ✅ CONDITION STATUS: {'should_trigger': False, 'confidence': 0.1, 'reason': \"Fallback keyword analysis: 1/10 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')\", 'condition_type': 'ai_fallback', 'prompt': 'Person seems uninterested, hostile, or wants to end the call'}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:18.006370+00:00"}
2025-07-23 11:00:18,006 - workflow-agent - INFO -     ❌ CONDITION NOT MET: Fallback keyword analysis: 1/10 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')
{"message": "    ❌ CONDITION NOT MET: Fallback keyword analysis: 1/10 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:18.006370+00:00"}
2025-07-23 11:00:18,006 - workflow-agent - INFO -   📋 Edge 3: conversation-1752584446694 → condition-1752585421207 (type: condition)
{"message": "  📋 Edge 3: conversation-1752584446694 → condition-1752585421207 (type: condition)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:18.006370+00:00"}
2025-07-23 11:00:18,006 - workflow-agent - INFO -     🎭 CONDITION TYPE: ai
{"message": "    🎭 CONDITION TYPE: ai", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:18.006370+00:00"}
2025-07-23 11:00:18,007 - workflow-agent - INFO -     📝 CONDITION CONFIG: {'type': 'ai', 'prompt': 'Person is busy or wants to be called back later', 'next_node': 'schedule_callback', 'confidence_threshold': 0.7}
{"message": "    📝 CONDITION CONFIG: {'type': 'ai', 'prompt': 'Person is busy or wants to be called back later', 'next_node': 'schedule_callback', 'confidence_threshold': 0.7}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:18.007370+00:00"}
2025-07-23 11:00:18,007 - workflow-agent - INFO - 🎯 EVALUATING CONDITION: condition-1752585421207 (type: ai)
{"message": "🎯 EVALUATING CONDITION: condition-1752585421207 (type: ai)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:18.007370+00:00"}
2025-07-23 11:00:18,007 - workflow-agent - INFO - 🔍 CONDITION DATA: {'type': 'ai', 'prompt': 'Person is busy or wants to be called back later', 'next_node': 'schedule_callback', 'confidence_threshold': 0.7}
{"message": "🔍 CONDITION DATA: {'type': 'ai', 'prompt': 'Person is busy or wants to be called back later', 'next_node': 'schedule_callback', 'confidence_threshold': 0.7}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:18.007370+00:00"}
2025-07-23 11:00:18,007 - workflow-agent - INFO - 🧠 AI CONDITION PROMPT: Person is busy or wants to be called back later
{"message": "🧠 AI CONDITION PROMPT: Person is busy or wants to be called back later", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:18.007370+00:00"}
2025-07-23 11:00:18,007 - workflow-agent - INFO - 🎯 CONFIDENCE THRESHOLD: 0.7
{"message": "🎯 CONFIDENCE THRESHOLD: 0.7", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:18.007370+00:00"}
2025-07-23 11:00:18,008 - workflow-agent - INFO - 🧠 EVALUATING AI CONDITION with context: 157 chars
{"message": "🧠 EVALUATING AI CONDITION with context: 157 chars", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:18.008370+00:00"}
2025-07-23 11:00:18,008 - workflow-agent - ERROR - LLM evaluation failed: 'ChatContext' object has no attribute 'append'
{"message": "LLM evaluation failed: 'ChatContext' object has no attribute 'append'", "level": "ERROR", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:18.008370+00:00"}
2025-07-23 11:00:18,008 - workflow-agent - WARNING - 🚨 LLM evaluation failed - using keyword-based fallback
{"message": "🚨 LLM evaluation failed - using keyword-based fallback", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:18.008370+00:00"}
2025-07-23 11:00:18,008 - workflow-agent - INFO - 🔄 FALLBACK RESULT: 1/10 keywords matched, confidence: 0.10, should_trigger: False
{"message": "🔄 FALLBACK RESULT: 1/10 keywords matched, confidence: 0.10, should_trigger: False", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:18.008370+00:00"}
2025-07-23 11:00:18,008 - workflow-agent - INFO -     ✅ CONDITION STATUS: {'should_trigger': False, 'confidence': 0.1, 'reason': "Fallback keyword analysis: 1/10 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')", 'condition_type': 'ai_fallback', 'prompt': 'Person is busy or wants to be called back later'}
{"message": "    ✅ CONDITION STATUS: {'should_trigger': False, 'confidence': 0.1, 'reason': \"Fallback keyword analysis: 1/10 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')\", 'condition_type': 'ai_fallback', 'prompt': 'Person is busy or wants to be called back later'}", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:18.008370+00:00"}
2025-07-23 11:00:18,009 - workflow-agent - INFO -     ❌ CONDITION NOT MET: Fallback keyword analysis: 1/10 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')
{"message": "    ❌ CONDITION NOT MET: Fallback keyword analysis: 1/10 keywords matched (LLM failed: 'ChatContext' object has no attribute 'append')", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:18.009369+00:00"}
2025-07-23 11:00:18,009 - workflow-agent - INFO - 🔍 CHECKING WORKFLOWAGENT TRANSITION MECHANISM
{"message": "🔍 CHECKING WORKFLOWAGENT TRANSITION MECHANISM", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:18.009369+00:00"}
2025-07-23 11:00:18,009 - workflow-agent - WARNING - ❌ NO _determine_next_node METHOD - This might be the issue!
{"message": "❌ NO _determine_next_node METHOD - This might be the issue!", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:18.009369+00:00"}
2025-07-23 11:00:18,009 - workflow-agent - WARNING - ❌ NO _move_to_next_step METHOD
{"message": "❌ NO _move_to_next_step METHOD", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:18.009369+00:00"}
2025-07-23 11:00:18,010 - workflow-agent - WARNING - 🚨 WORKFLOWAGENT TRANSITION ANALYSIS:
{"message": "🚨 WORKFLOWAGENT TRANSITION ANALYSIS:", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:18.010370+00:00"}
2025-07-23 11:00:18,010 - workflow-agent - WARNING - 🚨 - Current approach: LLM tool-based workflow
{"message": "🚨 - Current approach: LLM tool-based workflow", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:18.010370+00:00"}
2025-07-23 11:00:18,010 - workflow-agent - WARNING - 🚨 - Transition method: Function tools (@function_tool)
{"message": "🚨 - Transition method: Function tools (@function_tool)", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:18.010370+00:00"}
2025-07-23 11:00:18,010 - workflow-agent - WARNING - 🚨 - Condition evaluation: ❓ NEEDS INVESTIGATION
{"message": "🚨 - Condition evaluation: ❓ NEEDS INVESTIGATION", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:18.010370+00:00"}
2025-07-23 11:00:18,010 - workflow-agent - WARNING - 🚨 - This explains why agent stays on same node!
{"message": "🚨 - This explains why agent stays on same node!", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:18.010370+00:00"}
2025-07-23 11:00:18,011 - workflow-agent - WARNING - Could not extract JWT auth token for backend API calls
{"message": "Could not extract JWT auth token for backend API calls", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:18.011372+00:00"}
2025-07-23 11:00:18,013 - workflow-agent - WARNING - User ID available but no JWT token - using legacy app tools only
{"message": "User ID available but no JWT token - using legacy app tools only", "level": "WARNING", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:18.013372+00:00"}
2025-07-23 11:00:18,014 - workflow-agent - INFO - Added legacy Google Calendar tools as fallback
{"message": "Added legacy Google Calendar tools as fallback", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:18.014372+00:00"}
2025-07-23 11:00:18,014 - workflow-agent - INFO - Found current step node: conversation-1752584446694 (type: conversation)
{"message": "Found current step node: conversation-1752584446694 (type: conversation)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:18.014372+00:00"}
2025-07-23 11:00:18,014 - workflow-agent - INFO - Creating tools for pathway node: conversation-1752584446694 (type: conversation)
{"message": "Creating tools for pathway node: conversation-1752584446694 (type: conversation)", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:18.014372+00:00"}
2025-07-23 11:00:18,015 - workflow-agent - INFO - Added 0 pathway node tools for node: conversation-1752584446694
{"message": "Added 0 pathway node tools for node: conversation-1752584446694", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:18.015392+00:00"}
2025-07-23 11:00:18,015 - workflow-agent - INFO - Enhanced tools for step conversation-1752584446694: 7 total tools
{"message": "Enhanced tools for step conversation-1752584446694: 7 total tools", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:18.015392+00:00"}
2025-07-23 11:00:18,016 - workflow-agent - INFO - Updated agent instructions for workflow step: conversation-1752584446694
{"message": "Updated agent instructions for workflow step: conversation-1752584446694", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:18.016389+00:00"}
2025-07-23 11:00:18,016 - workflow-agent - INFO - WorkflowAgent llm_node executing with 7 tools for step: conversation-1752584446694
{"message": "WorkflowAgent llm_node executing with 7 tools for step: conversation-1752584446694", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:18.016389+00:00"}
2025-07-23 11:00:18,962 - livekit.agents - INFO - closing agent session due to participant disconnect (disable via `RoomInputOptions.close_on_disconnect=False`)
{"message": "closing agent session due to participant disconnect (disable via `RoomInputOptions.close_on_disconnect=False`)", "level": "INFO", "name": "livekit.agents", "participant": "agent_sip_participant_+33661329235", "reason": "CLIENT_INITIATED", "timestamp": "2025-07-23T09:00:18.962983+00:00"}
2025-07-23 11:00:18,966 - workflow-agent - INFO - WorkflowAgent exiting - saving workflow state
{"message": "WorkflowAgent exiting - saving workflow state", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:18.966990+00:00"}
2025-07-23 11:00:18,966 - workflow-agent - INFO - Userdata not available, workflow state maintained internally on exit
{"message": "Userdata not available, workflow state maintained internally on exit", "level": "INFO", "name": "workflow-agent", "timestamp": "2025-07-23T09:00:18.966990+00:00"}
