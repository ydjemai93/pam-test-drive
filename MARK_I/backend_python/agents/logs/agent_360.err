2025-07-25 18:55:30,767 - outbound-caller - INFO - Outbound Agent script démarre, args: ['C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\outbound_agent.py', 'start']
2025-07-25 18:55:30,767 - outbound-caller - INFO - Python version: 3.12.3 (tags/v3.12.3:f6650f9, Apr  9 2024, 14:05:25) [MSC v.1938 64 bit (AMD64)]
2025-07-25 18:55:30,767 - outbound-caller - INFO - Répertoire courant: C:\Users\y.djemai\pam-testdrive\MARK_I\backend_python\agents
2025-07-25 18:55:30,767 - outbound-caller - INFO - Encodage par défaut: utf-8
2025-07-25 18:55:30,767 - outbound-caller - INFO - Locale système: ('fr_FR', 'UTF-8')
2025-07-25 18:55:30,773 - outbound-caller - INFO - PATIENT_NAME: Jayden
2025-07-25 18:55:30,773 - outbound-caller - INFO - APPOINTMENT_TIME: next Tuesday at 3pm
2025-07-25 18:55:30,773 - outbound-caller - INFO - LK_ROOM_NAME: agent-call-360
2025-07-25 18:55:30,773 - outbound-caller - INFO - LK_JOB_METADATA: {"firstName": "Valued Customer", "lastName": "", "dial_info": {"agent_id": 11, "call_direction": "outbound", "room_name": "agent-call-360", "supabase_call_id": 360, "telnyx_call_control_id": null, "default_pathway_id": "d5fc510b-7635-4715-9066-e522daa2336d", "user_id": "b55837c4-270f-4f1f-8023-7ab09ee5f44d", "phone_number": "+33661329235", "sip_trunk_id": "ST_6CYLZwTLMCe2", "agent_caller_id_number": "+33189311209"}, "system_prompt": null, "initial_greeting": null, "wait_for_greeting": false, "pam_tier": "core", "interruption_threshold": 100, "ai_models": {"vad": {"provider": "silero"}, "stt": {"provider": "deepgram", "language": "en", "model": "nova-2"}, "tts": {"provider": "cartesia", "model": "sonic-2", "voice_id": "f9836c6e-a0bd-460e-9d3c-f7299fa60f94"}, "llm": {"provider": "openai", "model": "gpt-4o-mini"}}}
2025-07-25 18:55:30,773 - outbound-caller - INFO - LIVEKIT_URL: wss://pamtestdrive-euxn3osq.livekit.cloud
2025-07-25 18:55:30,773 - outbound-caller - INFO - LIVEKIT_API_KEY présent: Oui
2025-07-25 18:55:32,786 - outbound-caller - INFO - Pathway integration loaded successfully
2025-07-25 18:55:34,988 - outbound-caller - INFO - Starting entrypoint for supabase_call_id: 360
2025-07-25 18:55:34,989 - outbound-caller - INFO - Placeholder: Fetching pathway config for call_id 360 from backend...
2025-07-25 18:55:34,990 - outbound-caller - ERROR - Error fetching pathway config from Supabase for call_id 360: name 'get_call_details_from_supabase' is not defined
Traceback (most recent call last):
  File "C:\Users\y.djemai\pam-testdrive\MARK_I\backend_python\agents\outbound_agent.py", line 663, in get_pathway_for_call
    call_details = await get_call_details_from_supabase(supabase, call_id)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
NameError: name 'get_call_details_from_supabase' is not defined
2025-07-25 18:55:34,997 - outbound-caller - ERROR - No pathway configuration found for call_id 360. Aborting.
: name 'get_call_details_from_supabase' is not defined
Traceback (most recent call last):
  File "C:\Users\y.djemai\pam-testdrive\MARK_I\backend_python\agents\outbound_agent.py", line 663, in get_pathway_for_call
    call_details = await get_call_details_from_supabase(supabase, call_id)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
NameError: name 'get_call_details_from_supabase' is not defined
2025-07-25 18:55:34,997 - outbound-caller - ERROR - No pathway configuration found for call_id 360. Aborting.
2025-07-25 18:55:34,997 - livekit.agents - WARNING - The job task completed without establishing a connection or performing a proper shutdown. Ensure that job_ctx.connect()/job_ctx.shutdown() is called and the job is correctly finalized.
2025-07-25 19:06:52,122 - livekit.agents - WARNING - exiting forcefully
