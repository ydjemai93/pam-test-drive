2025-08-27 11:24:01 - outbound-caller - INFO - Outbound Agent script d√©marre, args: ['C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\outbound_agent.py', 'start']
2025-08-27 11:24:01 - outbound-caller - INFO - Outbound Agent script d√©marre, args: ['C:\\Users\\y.djemai\\pam-testdrive\\MARK_I\\backend_python\\agents\\outbound_agent.py', 'start']
2025-08-27 11:24:01 - outbound-caller - INFO - Python version: 3.12.3 (tags/v3.12.3:f6650f9, Apr  9 2024, 14:05:25) [MSC v.1938 64 bit (AMD64)]
2025-08-27 11:24:01 - outbound-caller - INFO - Python version: 3.12.3 (tags/v3.12.3:f6650f9, Apr  9 2024, 14:05:25) [MSC v.1938 64 bit (AMD64)]
2025-08-27 11:24:01 - outbound-caller - INFO - R√©pertoire courant: C:\Users\y.djemai\pam-testdrive\MARK_I\backend_python\agents
2025-08-27 11:24:01 - outbound-caller - INFO - R√©pertoire courant: C:\Users\y.djemai\pam-testdrive\MARK_I\backend_python\agents
2025-08-27 11:24:01 - outbound-caller - INFO - Encodage par d√©faut: utf-8
2025-08-27 11:24:01 - outbound-caller - INFO - Encodage par d√©faut: utf-8
2025-08-27 11:24:01 - outbound-caller - INFO - Locale syst√®me: ('fr_FR', 'UTF-8')
2025-08-27 11:24:01 - outbound-caller - INFO - Locale syst√®me: ('fr_FR', 'UTF-8')
2025-08-27 11:24:01 - outbound-caller - INFO - PATIENT_NAME: Jayden
2025-08-27 11:24:01 - outbound-caller - INFO - PATIENT_NAME: Jayden
2025-08-27 11:24:01 - outbound-caller - INFO - APPOINTMENT_TIME: next Tuesday at 3pm
2025-08-27 11:24:01 - outbound-caller - INFO - APPOINTMENT_TIME: next Tuesday at 3pm
2025-08-27 11:24:01 - outbound-caller - INFO - LK_ROOM_NAME: agent-call-553
2025-08-27 11:24:01 - outbound-caller - INFO - LK_ROOM_NAME: agent-call-553
2025-08-27 11:24:01 - outbound-caller - INFO - LK_JOB_METADATA: {"firstName": "Valued Customer", "lastName": "", "dial_info": {"agent_id": 11, "call_direction": "outbound", "room_name": "agent-call-553", "supabase_call_id": 553, "telnyx_call_control_id": null, "default_pathway_id": "d5fc510b-7635-4715-9066-e522daa2336d", "user_id": "b55837c4-270f-4f1f-8023-7ab09ee5f44d", "phone_number": "+33661329235", "sip_trunk_id": "ST_6CYLZwTLMCe2", "agent_caller_id_number": "+33189311209"}, "system_prompt": "test", "initial_greeting": "test", "wait_for_greeting": false, "pam_tier": "core", "interruption_threshold": 100, "ai_models": {"vad": {"provider": "silero"}, "stt": {"provider": "deepgram", "language": "fr", "model": "nova-2"}, "tts": {"provider": "cartesia", "model": "sonic-2", "voice_id": "65b25c5d-ff07-4687-a04c-da2f43ef6fa9"}, "llm": {"provider": "openai", "model": "gpt-4o-mini"}}}
2025-08-27 11:24:01 - outbound-caller - INFO - LK_JOB_METADATA: {"firstName": "Valued Customer", "lastName": "", "dial_info": {"agent_id": 11, "call_direction": "outbound", "room_name": "agent-call-553", "supabase_call_id": 553, "telnyx_call_control_id": null, "default_pathway_id": "d5fc510b-7635-4715-9066-e522daa2336d", "user_id": "b55837c4-270f-4f1f-8023-7ab09ee5f44d", "phone_number": "+33661329235", "sip_trunk_id": "ST_6CYLZwTLMCe2", "agent_caller_id_number": "+33189311209"}, "system_prompt": "test", "initial_greeting": "test", "wait_for_greeting": false, "pam_tier": "core", "interruption_threshold": 100, "ai_models": {"vad": {"provider": "silero"}, "stt": {"provider": "deepgram", "language": "fr", "model": "nova-2"}, "tts": {"provider": "cartesia", "model": "sonic-2", "voice_id": "65b25c5d-ff07-4687-a04c-da2f43ef6fa9"}, "llm": {"provider": "openai", "model": "gpt-4o-mini"}}}
2025-08-27 11:24:01 - outbound-caller - INFO - LIVEKIT_URL: wss://pamtestdrive-euxn3osq.livekit.cloud
2025-08-27 11:24:01 - outbound-caller - INFO - LIVEKIT_URL: wss://pamtestdrive-euxn3osq.livekit.cloud
2025-08-27 11:24:01 - outbound-caller - INFO - LIVEKIT_API_KEY pr√©sent: Oui
2025-08-27 11:24:01 - outbound-caller - INFO - LIVEKIT_API_KEY pr√©sent: Oui
2025-08-27 11:24:01 - db_client - INFO - Supabase service client initialized successfully.
2025-08-27 11:24:01 - outbound-caller - INFO - ‚úÖ Supabase client imported successfully
2025-08-27 11:24:01 - outbound-caller - INFO - ‚úÖ Supabase client imported successfully
2025-08-27 11:24:03 - pathway_global_context - INFO - ‚úÖ crypto_utils imported successfully
2025-08-27 11:24:03 - pathway_global_context - INFO - ‚úÖ crypto_utils imported successfully
2025-08-27 11:24:03 - api.db_client - INFO - Supabase service client initialized successfully.
2025-08-27 11:24:03 - workflow-agent - INFO - [SUCCESS] App actions module imported successfully
2025-08-27 11:24:03 - workflow-agent - INFO - [SUCCESS] App actions module imported successfully
2025-08-27 11:24:03 - agent_pathway_integration - INFO - Agent Pathway Integration module loaded successfully
2025-08-27 11:24:03 - outbound-caller - INFO - Pathway integration loaded successfully
2025-08-27 11:24:03 - outbound-caller - INFO - Pathway integration loaded successfully
2025-08-27 11:24:03 - root - INFO - Starting LiveKit Worker 'outbound-caller' on port 65164
2025-08-27 11:24:03 - livekit.agents - INFO - starting worker
2025-08-27 11:24:03 - livekit.agents - INFO - starting worker
2025-08-27 11:24:03 - livekit.agents - INFO - initializing job runner
2025-08-27 11:24:03 - livekit.agents - INFO - initializing job runner
2025-08-27 11:24:03 - livekit.agents - INFO - initializing job runner
2025-08-27 11:24:03 - livekit.agents - INFO - initializing job runner
2025-08-27 11:24:03 - livekit.agents - INFO - initializing job runner
2025-08-27 11:24:03 - livekit.agents - INFO - initializing job runner
2025-08-27 11:24:03 - livekit.agents - INFO - initializing job runner
2025-08-27 11:24:03 - livekit.agents - INFO - initializing job runner
2025-08-27 11:24:03 - livekit.agents - INFO - job runner initialized
2025-08-27 11:24:03 - livekit.agents - INFO - job runner initialized
2025-08-27 11:24:03 - livekit.agents - INFO - job runner initialized
2025-08-27 11:24:03 - livekit.agents - INFO - job runner initialized
2025-08-27 11:24:03 - livekit.agents - INFO - job runner initialized
2025-08-27 11:24:03 - livekit.agents - INFO - job runner initialized
2025-08-27 11:24:03 - livekit.agents - INFO - job runner initialized
2025-08-27 11:24:03 - livekit.agents - INFO - job runner initialized
2025-08-27 11:24:04 - livekit.agents - INFO - registered worker
2025-08-27 11:24:04 - livekit.agents - INFO - registered worker
2025-08-27 11:24:05 - livekit.agents - INFO - received job request
2025-08-27 11:24:05 - livekit.agents - INFO - received job request
2025-08-27 11:24:05 - outbound-caller - INFO - üìû Outbound Agent entrypoint called
2025-08-27 11:24:05 - outbound-caller - INFO - üìû Outbound Agent entrypoint called
2025-08-27 11:24:05 - outbound-caller - INFO - Starting entrypoint for supabase_call_id: 553
2025-08-27 11:24:05 - outbound-caller - INFO - Starting entrypoint for supabase_call_id: 553
2025-08-27 11:24:05 - outbound-caller - INFO - üìã Extracted dial_info: {'agent_id': 11, 'call_direction': 'outbound', 'room_name': 'agent-call-553', 'supabase_call_id': 553, 'telnyx_call_control_id': None, 'default_pathway_id': 'd5fc510b-7635-4715-9066-e522daa2336d', 'user_id': 'b55837c4-270f-4f1f-8023-7ab09ee5f44d', 'auth_token': None, 'phone_number': '+33661329235', 'sip_trunk_id': 'ST_6CYLZwTLMCe2', 'agent_caller_id_number': '+33189311209'}
2025-08-27 11:24:05 - outbound-caller - INFO - üìã Extracted dial_info: {'agent_id': 11, 'call_direction': 'outbound', 'room_name': 'agent-call-553', 'supabase_call_id': 553, 'telnyx_call_control_id': None, 'default_pathway_id': 'd5fc510b-7635-4715-9066-e522daa2336d', 'user_id': 'b55837c4-270f-4f1f-8023-7ab09ee5f44d', 'auth_token': None, 'phone_number': '+33661329235', 'sip_trunk_id': 'ST_6CYLZwTLMCe2', 'agent_caller_id_number': '+33189311209'}
2025-08-27 11:24:05 - livekit.agents - INFO - initializing job runner
2025-08-27 11:24:05 - livekit.agents - INFO - initializing job runner
2025-08-27 11:24:05 - livekit.agents - INFO - job runner initialized
2025-08-27 11:24:05 - livekit.agents - INFO - job runner initialized
2025-08-27 11:24:06 - outbound-caller - INFO - ‚úÖ Connected to LiveKit room
2025-08-27 11:24:06 - outbound-caller - INFO - ‚úÖ Connected to LiveKit room
2025-08-27 11:24:06 - outbound-caller - INFO - ‚úÖ Logging fix re-applied after LiveKit connection
2025-08-27 11:24:06 - outbound-caller - INFO - ‚úÖ Logging fix re-applied after LiveKit connection
2025-08-27 11:24:06 - outbound-caller - INFO - Configuring AI models from job metadata...
2025-08-27 11:24:06 - outbound-caller - INFO - Configuring AI models from job metadata...
2025-08-27 11:24:08 - outbound-caller - INFO - ‚úÖ AI Models configured successfully
2025-08-27 11:24:08 - outbound-caller - INFO - ‚úÖ AI Models configured successfully
2025-08-27 11:24:08 - agent_pathway_integration - INFO - Checking for default pathway for agent 11 and call 553
2025-08-27 11:24:09 - livekit.agents - INFO - worker is at full capacity, marking as unavailable
2025-08-27 11:24:09 - livekit.agents - INFO - worker is at full capacity, marking as unavailable
2025-08-27 11:24:09 - agent_pathway_integration - INFO - Created pathway execution record: a8b3a5bf-2be9-4765-81c9-be4bd24ced73
2025-08-27 11:24:09 - agent_pathway_integration - INFO - Linked call 553 to pathway execution a8b3a5bf-2be9-4765-81c9-be4bd24ced73
2025-08-27 11:24:09 - agent_pathway_integration - INFO - ‚úÖ Started pathway execution a8b3a5bf-2be9-4765-81c9-be4bd24ced73 for call 553
2025-08-27 11:24:09 - outbound-caller - INFO - ‚úÖ Auto-started pathway execution: a8b3a5bf-2be9-4765-81c9-be4bd24ced73
2025-08-27 11:24:09 - outbound-caller - INFO - ‚úÖ Auto-started pathway execution: a8b3a5bf-2be9-4765-81c9-be4bd24ced73
2025-08-27 11:24:09 - outbound-caller - INFO - Placeholder: Fetching pathway config for call_id 553 from backend...
2025-08-27 11:24:09 - outbound-caller - INFO - Placeholder: Fetching pathway config for call_id 553 from backend...
2025-08-27 11:24:09 - outbound-caller - INFO - üîç Fetching call details for call_id: 553
2025-08-27 11:24:09 - outbound-caller - INFO - üîç Fetching call details for call_id: 553
2025-08-27 11:24:10 - outbound-caller - INFO - üìû Call 553 found with pathway_execution_id: a8b3a5bf-2be9-4765-81c9-be4bd24ced73
2025-08-27 11:24:10 - outbound-caller - INFO - üìû Call 553 found with pathway_execution_id: a8b3a5bf-2be9-4765-81c9-be4bd24ced73
2025-08-27 11:24:10 - outbound-caller - INFO - üìã Pathway execution found with pathway_id: d5fc510b-7635-4715-9066-e522daa2336d
2025-08-27 11:24:10 - outbound-caller - INFO - üìã Pathway execution found with pathway_id: d5fc510b-7635-4715-9066-e522daa2336d
2025-08-27 11:24:10 - outbound-caller - INFO - ‚úÖ Found pathway 'B2B Sales- Pathway' with config
2025-08-27 11:24:10 - outbound-caller - INFO - ‚úÖ Found pathway 'B2B Sales- Pathway' with config
2025-08-27 11:24:10 - outbound-caller - INFO - Fetched pathway config for call_id 553: {'edges': [{'id': 'xy-edge__conversation-1752584446694-condition-1752585419519', 'key': 'xy-edge__conversation-1752584446694-condition-1752585419519', 'source': 'conversation-1752584446694', 'target': 'condition-1752585419519'}, {'id': 'xy-edge__condition-1752585419519true-conversation-1752585487904', 'key': 'xy-edge__condition-1752585419519true-conversation-1752585487904', 'source': 'condition-1752585419519', 'target': 'conversation-1752585487904'}, {'id': 'xy-edge__conversation-1752585487904-condition-1752585515969', 'key': 'xy-edge__conversation-1752585487904-condition-1752585515969', 'source': 'conversation-1752585487904', 'target': 'condition-1752585515969'}, {'id': 'xy-edge__conversation-1752585487904-condition-1752585517385', 'key': 'xy-edge__conversation-1752585487904-condition-1752585517385', 'source': 'conversation-1752585487904', 'target': 'condition-1752585517385'}, {'id': 'xy-edge__conversation-1752585487904-condition-1752585513967', 'key': 'xy-edge__conversation-1752585487904-condition-1752585513967', 'source': 'conversation-1752585487904', 'target': 'condition-1752585513967'}, {'id': 'xy-edge__conversation-1752584446694-condition-1752585422872', 'key': 'xy-edge__conversation-1752584446694-condition-1752585422872', 'source': 'conversation-1752584446694', 'target': 'condition-1752585422872'}, {'id': 'xy-edge__conversation-1752584446694-condition-1752585421207', 'key': 'xy-edge__conversation-1752584446694-condition-1752585421207', 'source': 'conversation-1752584446694', 'target': 'condition-1752585421207'}, {'id': 'xy-edge__condition-1752585421207true-conversation-1752585570818', 'key': 'xy-edge__condition-1752585421207true-conversation-1752585570818', 'source': 'condition-1752585421207', 'target': 'conversation-1752585570818'}, {'id': 'xy-edge__conversation-1752585570818-condition-1752585592634', 'key': 'xy-edge__conversation-1752585570818-condition-1752585592634', 'source': 'conversation-1752585570818', 'target': 'condition-1752585592634'}, {'id': 'xy-edge__condition-1752585515969true-conversation-1752585662522', 'key': 'xy-edge__condition-1752585515969true-conversation-1752585662522', 'source': 'condition-1752585515969', 'target': 'conversation-1752585662522'}, {'id': 'xy-edge__condition-1752585517385true-conversation-1752585818106', 'key': 'xy-edge__condition-1752585517385true-conversation-1752585818106', 'source': 'condition-1752585517385', 'target': 'conversation-1752585818106'}, {'id': 'xy-edge__condition-1752585513967true-conversation-1752585761728', 'key': 'xy-edge__condition-1752585513967true-conversation-1752585761728', 'source': 'condition-1752585513967', 'target': 'conversation-1752585761728'}, {'id': 'xy-edge__conversation-1752585761728-end_call-1752586102371', 'key': 'xy-edge__conversation-1752585761728-end_call-1752586102371', 'source': 'conversation-1752585761728', 'target': 'end_call-1752586102371'}, {'id': 'xy-edge__conversation-1752585662522-condition-1752585685583', 'key': 'xy-edge__conversation-1752585662522-condition-1752585685583', 'source': 'conversation-1752585662522', 'target': 'condition-1752585685583'}, {'id': 'xy-edge__conversation-1752585662522-condition-1752585687002', 'key': 'xy-edge__conversation-1752585662522-condition-1752585687002', 'source': 'conversation-1752585662522', 'target': 'condition-1752585687002'}, {'id': 'xy-edge__conversation-1752585662522-condition-1752585684024', 'key': 'xy-edge__conversation-1752585662522-condition-1752585684024', 'source': 'conversation-1752585662522', 'target': 'condition-1752585684024'}, {'id': 'xy-edge__condition-1752585685583true-app_action-1752586209057', 'key': 'xy-edge__condition-1752585685583true-app_action-1752586209057', 'source': 'condition-1752585685583', 'target': 'app_action-1752586209057'}, {'id': 'xy-edge__condition-1752585687002true-conversation-1752585818106', 'key': 'xy-edge__condition-1752585687002true-conversation-1752585818106', 'source': 'condition-1752585687002', 'target': 'conversation-1752585818106'}, {'id': 'xy-edge__condition-1752585684024true-conversation-1752585761728', 'key': 'xy-edge__condition-1752585684024true-conversation-1752585761728', 'source': 'condition-1752585684024', 'target': 'conversation-1752585761728'}, {'id': 'xy-edge__condition-1752586789213false-conversation-1752585818106', 'key': 'xy-edge__condition-1752586789213false-conversation-1752585818106', 'source': 'condition-1752586789213', 'target': 'conversation-1752585818106'}, {'id': 'xy-edge__app_action-1752586209057-condition-1752586789213', 'key': 'xy-edge__app_action-1752586209057-condition-1752586789213', 'source': 'app_action-1752586209057', 'target': 'condition-1752586789213'}, {'id': 'xy-edge__condition-1752585848810true-tools-1752586942596', 'key': 'xy-edge__condition-1752585848810true-tools-1752586942596', 'source': 'condition-1752585848810', 'target': 'tools-1752586942596'}, {'id': 'xy-edge__conversation-1752585818106-condition-1752585848810', 'key': 'xy-edge__conversation-1752585818106-condition-1752585848810', 'source': 'conversation-1752585818106', 'target': 'condition-1752585848810'}, {'id': 'xy-edge__conversation-1752585818106-condition-1752585852282', 'key': 'xy-edge__conversation-1752585818106-condition-1752585852282', 'source': 'conversation-1752585818106', 'target': 'condition-1752585852282'}, {'id': 'xy-edge__condition-1752585852282true-end_call-1752587058511', 'key': 'xy-edge__condition-1752585852282true-end_call-1752587058511', 'source': 'condition-1752585852282', 'target': 'end_call-1752587058511'}, {'id': 'xy-edge__condition-1752587369230true-conversation-1752586729436', 'key': 'xy-edge__condition-1752587369230true-conversation-1752586729436', 'source': 'condition-1752587369230', 'target': 'conversation-1752586729436'}, {'id': 'xy-edge__app_action-1752586209057-condition-1752587369230', 'key': 'xy-edge__app_action-1752586209057-condition-1752587369230', 'source': 'app_action-1752586209057', 'target': 'condition-1752587369230'}, {'id': 'xy-edge__conversation-1752586729436-condition-1752586879584', 'key': 'xy-edge__conversation-1752586729436-condition-1752586879584', 'source': 'conversation-1752586729436', 'target': 'condition-1752586879584'}, {'id': 'xy-edge__condition-1752586879584true-end_call-1752586890630', 'key': 'xy-edge__condition-1752586879584true-end_call-1752586890630', 'source': 'condition-1752586879584', 'target': 'end_call-1752586890630'}, {'id': 'xy-edge__tools-1752586942596-condition-1752586959602', 'key': 'xy-edge__tools-1752586942596-condition-1752586959602', 'source': 'tools-1752586942596', 'target': 'condition-1752586959602'}, {'id': 'xy-edge__condition-1752586959602true-end_call-1752586990804', 'key': 'xy-edge__condition-1752586959602true-end_call-1752586990804', 'source': 'condition-1752586959602', 'target': 'end_call-1752586990804'}, {'id': 'xy-edge__condition-1752585422872true-end_call-1753698161049', 'key': 'xy-edge__condition-1752585422872true-end_call-1753698161049', 'source': 'condition-1752585422872', 'target': 'end_call-1753698161049'}, {'id': 'xy-edge__condition-1752585592634true-app_action-1756221388241', 'key': 'xy-edge__condition-1752585592634true-app_action-1756221388241', 'source': 'condition-1752585592634', 'target': 'app_action-1756221388241'}, {'id': 'xy-edge__app_action-1756221388241-end_call-1753698161049', 'key': 'xy-edge__app_action-1756221388241-end_call-1753698161049', 'source': 'app_action-1756221388241', 'target': 'end_call-1753698161049'}], 'nodes': [{'id': 'conversation-1752584446694', 'name': 'Greeting', 'type': 'conversation', 'config': {'id': 'greeting', 'prompt': "Vous incarnez Pam de Dunder Mifflin. Vous effectuez un appel commercial sortant √† une personne qui s'est pr√©c√©demment renseign√©e sur vos services. Votre objectif est de d√©terminer si c'est le bon moment pour discuter. Soyez amicale et professionnelle. Commencez par vous pr√©senter et nommer votre entreprise, mentionnez que vous faites suite √† sa demande, puis demandez si elle a quelques minutes √† vous accorder. √âcoutez attentivement sa r√©ponse pour √©valuer sa disponibilit√© et son niveau d'int√©r√™t. Extrayez toute information qu'elle mentionne concernant sa situation actuelle ou ses besoins.", 'greeting': 'Bonjour Je suis Pam', 'language': 'en', 'temperature': 0.7, 'global_access': False, 'silence_timeout': 10, 'extracted_variables': [{'name': 'conversation_started', 'type': 'boolean', 'description': 'Conversation has started', 'extraction_prompt': 'Conversation has started'}, {'name': 'call_start_time', 'type': 'string', 'description': 'Timestamp when call started', 'extraction_prompt': 'Timestamp when call started'}], 'interruption_enabled': True, 'transition_condition': '', 'transcription_enabled': True, 'transition_condition_enabled': False}, 'position': {'x': 159.19974474711404, 'y': -406.435592953321}}, {'id': 'condition-1752585419519', 'name': 'Greeting Condition 1', 'type': 'condition', 'config': {'id': 'greeting_condition_1', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Person is available to talk now and shows interest in the conversation', 'next_node': 'qualify_lead', 'confidence_threshold': 0.7}, 'source_node': 'greeting'}, 'position': {'x': 112.72206178621366, 'y': 127.8578385636643}}, {'id': 'condition-1752585421207', 'name': 'Schedule Callback Condition', 'type': 'condition', 'config': {'id': 'greeting_condition_2', 'prompt': "La personne n'est pas disponible dans l'imm√©diat", 'source_node': 'greeting', 'routing_style': 'livekit', 'routing_targets': [{'name': 'Schedule Callback', 'node_id': 'conversation-1752585570818', 'description': 'Route to Schedule Callback', 'confidence_threshold': 0.7}]}, 'position': {'x': -313.0080598768747, 'y': -162.41507420188168}}, {'id': 'condition-1752585422872', 'name': 'Greeting Condition 3', 'type': 'condition', 'config': {'id': 'greeting_condition_3', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Person seems uninterested, hostile, or wants to end the call', 'next_node': 'polite_decline', 'confidence_threshold': 0.8}, 'source_node': 'greeting'}, 'position': {'x': -541.3518080512141, 'y': 374.79123495864394}}, {'id': 'conversation-1752585487904', 'name': 'Qualify Lead', 'type': 'conversation', 'config': {'id': 'qualify_lead', 'prompt': "The person is willing to talk. Now you need to qualify them as a potential customer. Ask about their current situation, what specific services they're looking for, their timeline, and any challenges they're facing. Be conversational but focused on gathering key qualifying information: budget range, decision-making authority, urgency of need, and fit for your services. Listen for buying signals and pain points. Ask open-ended questions to understand their needs deeply.", 'language': 'en', 'temperature': 0.7, 'global_access': False, 'system_prompt': '', 'silence_timeout': 10, 'extracted_variables': [{'name': 'qualification_started', 'type': 'boolean', 'description': 'Lead qualification process started', 'extraction_prompt': 'Lead qualification process started'}], 'interruption_enabled': True, 'transition_condition': '', 'transcription_enabled': True, 'transition_condition_enabled': False}, 'position': {'x': 163.4402281365625, 'y': 311.3499021877407}}, {'id': 'condition-1752585513967', 'name': 'Qualify Lead Condition 3', 'type': 'condition', 'config': {'id': 'qualify_lead_condition_3', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Person seems like a poor fit with no budget, no authority, no genuine need, or timing issues', 'next_node': 'polite_decline', 'confidence_threshold': 0.8}, 'source_node': 'qualify_lead'}, 'position': {'x': 573.7084072411365, 'y': 459.684096539979}}, {'id': 'condition-1752585515969', 'name': 'Qualify Lead Condition 1', 'type': 'condition', 'config': {'id': 'qualify_lead_condition_1', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Person is a qualified lead with genuine interest and potential budget for our services', 'next_node': 'book_appointment', 'confidence_threshold': 0.7}, 'source_node': 'qualify_lead'}, 'position': {'x': -191.31874774110742, 'y': 458.6868230734692}}, {'id': 'condition-1752585517385', 'name': 'Qualify Lead Condition 2', 'type': 'condition', 'config': {'id': 'qualify_lead_condition_2', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Person expressed interest but wants more information before scheduling anything', 'next_node': 'send_information', 'confidence_threshold': 0.7}, 'source_node': 'qualify_lead'}, 'position': {'x': 202.90168708178726, 'y': 488.9489925914291}}, {'id': 'conversation-1752585570818', 'name': 'Schedule Callback', 'type': 'conversation', 'config': {'id': 'schedule_callback', 'prompt': 'La personne indique qu\'elle est occup√©e ou qu\'elle souhaite √™tre rappel√©e plus tard. Montrez-vous compr√©hensif(ve) et arrangeant(e). Demandez-lui le moment qu\'elle pr√©f√©rerait pour un rappel.\n\nIMPORTANT: Une fois que vous obtenez un jour et un horaire pr√©cis (m√™me approximatif), confirmez les d√©tails et assurez-vous que le syst√®me va cr√©er l\'√©v√©nement dans le calendrier. Dites quelque chose comme "Parfait, je vais cr√©er cet √©v√©nement dans le calendrier maintenant."\n\nL\'objectif est d\'obtenir suffisamment de d√©tails pour d√©clencher la cr√©ation automatique du calendrier.', 'language': 'en', 'temperature': 0.7, 'global_access': False, 'system_prompt': '', 'silence_timeout': 10, 'extracted_variables': [{'name': 'callback_requested', 'type': 'boolean', 'description': 'Customer requested a callback', 'extraction_prompt': 'Customer requested a callback'}], 'interruption_enabled': True, 'transition_condition': '', 'transcription_enabled': True, 'transition_condition_enabled': False}, 'position': {'x': -824.9743648175192, 'y': 117.32593048536444}}, {'id': 'condition-1752585592634', 'name': 'Schedule Callback Condition 1', 'type': 'condition', 'config': {'id': 'schedule_callback_condition_1', 'prompt': 'Customer confirmed appointment time OR agent confirmed scheduling details', 'source_node': 'schedule_callback', 'routing_targets': [{'name': 'App_action Node', 'node_id': 'app_action-1756221388241', 'description': 'Route to App_action Node', 'confidence_threshold': 0.5}]}, 'position': {'x': -1310.484446829189, 'y': 285.194202724594}}, {'id': 'conversation-1752585662522', 'name': 'Book Appointment', 'type': 'conversation', 'config': {'id': 'book_appointment', 'prompt': "This is a qualified lead who has shown interest. Your goal is to schedule a consultation or appointment. Mention the value they'll get from the meeting and how it will help solve their specific needs you've identified. Offer specific time slots and be flexible with scheduling. Try to get their availability, preferred meeting type (phone, video, in-person), and contact details for scheduling. If they hesitate, address their concerns and offer to send more information first.", 'language': 'en', 'temperature': 0.7, 'global_access': False, 'system_prompt': '', 'silence_timeout': 10, 'extracted_variables': [{'name': 'booking_started', 'type': 'boolean', 'description': 'Appointment booking process started', 'extraction_prompt': 'Appointment booking process started'}, {'name': 'qualified_lead', 'type': 'boolean', 'description': 'Lead is qualified for appointment', 'extraction_prompt': 'Lead is qualified for appointment'}], 'interruption_enabled': True, 'transition_condition': '', 'transcription_enabled': True, 'transition_condition_enabled': False}, 'position': {'x': -157.01338060119002, 'y': 676.3166837636757}}, {'id': 'condition-1752585684024', 'name': 'Book Appointment Condition 3', 'type': 'condition', 'config': {'id': 'book_appointment_condition_3', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Person declined to schedule or seems hesitant about moving forward', 'next_node': 'polite_decline', 'confidence_threshold': 0.8}, 'source_node': 'book_appointment'}, 'position': {'x': -273.7854306622481, 'y': 1041.96815487565}}, {'id': 'condition-1752585685583', 'name': 'Book Appointment Condition 1', 'type': 'condition', 'config': {'id': 'book_appointment_condition_1', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Person agreed to schedule an appointment and provided their availability or preferred time', 'next_node': 'create_calendar_event', 'confidence_threshold': 0.7}, 'source_node': 'book_appointment'}, 'position': {'x': -943.9017843724146, 'y': 1044.3504442101917}}, {'id': 'condition-1752585687002', 'name': 'Book Appointment Condition 2', 'type': 'condition', 'config': {'id': 'book_appointment_condition_2', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Person wants to schedule but asked for information to be sent first', 'next_node': 'send_information', 'confidence_threshold': 0.7}, 'source_node': 'book_appointment'}, 'position': {'x': -606.1989666079745, 'y': 1056.062258946693}}, {'id': 'conversation-1752585761728', 'name': 'Polite Decline', 'type': 'conversation', 'config': {'id': 'polite_decline', 'prompt': "This person doesn't seem like a good fit right now. Be polite and professional. Thank them for their time, acknowledge that the timing might not be right, and offer to send them information for future reference. Ask if they'd like to receive updates or if there's a better time to reach out in the future. End on a positive note and leave the door open for future contact.", 'language': 'en', 'temperature': 0.7, 'global_access': False, 'system_prompt': '', 'silence_timeout': 10, 'extracted_variables': [{'name': 'lead_declined', 'type': 'boolean', 'description': 'Lead was politely declined', 'extraction_prompt': 'Lead was politely declined'}], 'interruption_enabled': True, 'transition_condition': '', 'transcription_enabled': True, 'transition_condition_enabled': False}, 'position': {'x': 716.720968381256, 'y': 1115.8291479001427}}, {'id': 'conversation-1752585818106', 'name': 'Send Information', 'type': 'conversation', 'config': {'id': 'send_information', 'prompt': "The person wants more information before scheduling. Ask for their email address to send details about your services, pricing, case studies, or whatever information would be most relevant to their specific needs. Be specific about what you'll send and when they can expect it. Also ask if they have any specific questions you can address in the information packet. Make them feel comfortable that this isn't high-pressure follow-up.", 'language': 'en', 'temperature': 0.7, 'global_access': False, 'system_prompt': '', 'silence_timeout': 10, 'extracted_variables': [{'name': 'info_requested', 'type': 'boolean', 'description': 'Customer requested information packet', 'extraction_prompt': 'Customer requested information packet'}], 'interruption_enabled': True, 'transition_condition': '', 'transcription_enabled': True, 'transition_condition_enabled': False}, 'position': {'x': 378.9665058084346, 'y': 1507.51975168371}}, {'id': 'condition-1752585848810', 'name': 'Send Information Condition 1', 'type': 'condition', 'config': {'id': 'send_information_condition_1', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Person provided their email address for sending information', 'next_node': 'capture_email', 'confidence_threshold': 0.7}, 'source_node': 'send_information'}, 'position': {'x': 165.51654504146074, 'y': 1635.6430622199036}}, {'id': 'condition-1752585852282', 'name': 'Send Information Condition 2', 'type': 'condition', 'config': {'id': 'send_information_condition_2', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Person declined to provide their email or seems uninterested in receiving information', 'next_node': 'end_declined', 'confidence_threshold': 0.8}, 'source_node': 'send_information'}, 'position': {'x': 500.68393482997806, 'y': 1628.8051584512218}}, {'id': 'end_call-1752586102371', 'name': 'End Declined', 'type': 'end_call', 'config': {'id': 'end_declined', 'custom_data': {}, 'save_recording': False, 'email_recipient': '', 'goodbye_message': 'Thank you for your time. Have a great day!', 'save_transcript': True, 'call_disposition': 'completed', 'send_summary_email': False, 'extracted_variables': [{'name': 'call_outcome', 'type': 'string', 'description': 'Final call outcome', 'extraction_prompt': 'Final call outcome'}, {'name': 'decline_reason', 'type': 'string', 'description': 'Reason for declining', 'extraction_prompt': 'Reason for declining'}]}, 'position': {'x': 667.7410507582531, 'y': 1363.7408872996832}}, {'id': 'app_action-1752586209057', 'name': 'Create Calendar Event', 'type': 'app_action', 'config': {'id': 'create_calendar_event', 'data': {'app_name': 'google_calendar', 'action_type': 'create_event', 'action_config': {'calendar_id': 'primary', 'duration_minutes': 60}, 'field_mappings': {'summary': 'Consultation with {contact_name}', 'attendees': ['{contact_email}'], 'start_time': '{selected_appointment_time}', 'description': 'Sales consultation scheduled via PAM'}}, 'app_name': '', 'action_type': '', 'action_config': {}, 'field_mappings': {}, 'user_connection_id': '', 'extracted_variables': [{'name': 'appointment_booked', 'type': 'boolean', 'description': 'Appointment successfully booked', 'extraction_prompt': 'Appointment successfully booked'}]}, 'position': {'x': -931.7621809606596, 'y': 1347.8657791544829}}, {'id': 'conversation-1752586729436', 'name': 'Confirm Appointment', 'type': 'conversation', 'config': {'id': 'confirm_appointment', 'prompt': "The calendar event has been successfully created. Confirm the appointment details with enthusiasm. Mention the date, time, and format of the meeting. Let them know they'll receive a calendar invite shortly. Ask if they have any specific topics they'd like to discuss or questions they want addressed during the consultation. Set clear expectations for what the meeting will cover and how long it will take.", 'language': 'en', 'temperature': 0.7, 'global_access': False, 'system_prompt': '', 'silence_timeout': 10, 'extracted_variables': [{'name': 'appointment_confirmed', 'type': 'boolean', 'description': 'Appointment details confirmed with customer', 'extraction_prompt': 'Appointment details confirmed with customer'}], 'interruption_enabled': True, 'transition_condition': '', 'transcription_enabled': True, 'transition_condition_enabled': False}, 'position': {'x': -981.7639769305733, 'y': 1813.2009923352334}}, {'id': 'condition-1752586789213', 'name': 'Create Calendar Event Condition 2', 'type': 'condition', 'config': {'id': 'create_calendar_event_condition_2', 'prompt': 'Calendar event creation failed or encountered an error', 'source_node': 'create_calendar_event'}, 'position': {'x': -764.0953358329234, 'y': 1530.225098242719}}, {'id': 'condition-1752586879584', 'name': 'Confirm Appointment Condition 1', 'type': 'condition', 'config': {'id': 'confirm_appointment_condition_1', 'prompt': 'Appointment has been confirmed and conversation wrapped up successfully', 'source_node': 'confirm_appointment'}, 'position': {'x': -1011.2849335976309, 'y': 1938.9218754961776}}, {'id': 'end_call-1752586890630', 'name': 'End Success', 'type': 'end_call', 'config': {'id': 'end_success', 'custom_data': {}, 'save_recording': False, 'email_recipient': '', 'goodbye_message': 'Thank you! Looking forward to speaking with you on {appointment_date}. Have a great day!', 'save_transcript': True, 'call_disposition': 'completed', 'send_summary_email': False, 'extracted_variables': [{'name': 'call_outcome', 'type': 'string', 'description': 'Final call outcome', 'extraction_prompt': 'Final call outcome'}, {'name': 'success', 'type': 'boolean', 'description': 'Call was successful', 'extraction_prompt': 'Call was successful'}, {'name': 'appointment_date', 'type': 'string', 'description': 'Scheduled appointment date', 'extraction_prompt': 'Scheduled appointment date'}, {'name': 'appointment_time', 'type': 'string', 'description': 'Scheduled appointment time', 'extraction_prompt': 'Scheduled appointment time'}]}, 'position': {'x': -1000.4160641634687, 'y': 2109.1766822906798}}, {'id': 'tools-1752586942596', 'name': 'Capture Email', 'type': 'tools', 'config': {'id': 'capture_email', 'app_name': 'google_calendar', 'parameters': {'email': '{contact_email}', 'notes': '{conversation_summary}', 'source': 'phone_call', 'status': 'info_requested', 'contact_name': '{contact_name}', 'phone_number': '{phone_number}', 'interest_level': '{interest_level}', 'qualification_score': '{qualification_score}'}, 'webhook_url': 'https://hook.us1.make.com/abc123def456', 'selected_app_id': 'ebce972a-6206-4708-8557-90bfd816ad14', 'selected_app_name': 'Google Calendar', 'variable_mappings': {}, 'selected_action_id': '', 'extracted_variables': [{'name': 'email_captured', 'type': 'boolean', 'description': 'Customer email address captured', 'extraction_prompt': 'Customer email address captured'}], 'selected_action_name': '', 'selected_action_description': ''}, 'position': {'x': 212.10097682093254, 'y': 1877.1337109778142}}, {'id': 'condition-1752586959602', 'name': 'Condition Node', 'type': 'condition', 'config': {'prompt': 'email captured'}, 'position': {'x': 207.1067512553629, 'y': 2061.4359900186564}}, {'id': 'end_call-1752586990804', 'name': 'End Info Sent', 'type': 'end_call', 'config': {'id': 'end_info_sent', 'custom_data': {}, 'save_recording': False, 'email_recipient': '', 'goodbye_message': "Great! I'll send that information right over. Feel free to call us with any questions. Have a wonderful day!", 'save_transcript': True, 'call_disposition': 'completed', 'send_summary_email': False, 'extracted_variables': [{'name': 'call_outcome', 'type': 'string', 'description': 'Final call outcome', 'extraction_prompt': 'Final call outcome'}, {'name': 'follow_up_required', 'type': 'boolean', 'description': 'Follow-up is required', 'extraction_prompt': 'Follow-up is required'}]}, 'position': {'x': 201.81395080636105, 'y': 2189.0828212015595}}, {'id': 'end_call-1752587058511', 'name': 'End Declined', 'type': 'end_call', 'config': {'id': 'end_declined', 'custom_data': {}, 'save_recording': False, 'email_recipient': '', 'goodbye_message': 'Thank you for your time. Have a great day!', 'save_transcript': True, 'call_disposition': 'completed', 'send_summary_email': False, 'extracted_variables': [{'name': 'call_outcome', 'type': 'string', 'description': 'Final call outcome', 'extraction_prompt': 'Final call outcome'}, {'name': 'decline_reason', 'type': 'string', 'description': 'Reason for declining', 'extraction_prompt': 'Reason for declining'}]}, 'position': {'x': 860.3817328453051, 'y': 1807.0939093564982}}, {'id': 'condition-1752587369230', 'name': 'Create Calendar Event Condition 1', 'type': 'condition', 'config': {'id': 'create_calendar_event_condition_1', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Calendar event was successfully created', 'next_node': 'confirm_appointment', 'confidence_threshold': 0.9}, 'source_node': 'create_calendar_event'}, 'position': {'x': -1149.0097523440525, 'y': 1584.6468586902927}}, {'id': 'end_call-1753698161049', 'name': 'End_call  Greeting', 'type': 'end_call', 'config': {'custom_data': {}, 'save_recording': False, 'email_recipient': '', 'goodbye_message': 'Thank you for your time. Have a great day!', 'save_transcript': True, 'call_disposition': 'completed', 'send_summary_email': False}, 'position': {'x': -517.2888315376458, 'y': 701.791880267355}}, {'id': 'app_action-1756221388241', 'name': 'App_action Node', 'type': 'app_action', 'config': {'data': {'app_name': 'google_calendar', 'action_type': 'create_event', 'action_config': {}, 'field_mappings': {'summary': 'Consultation call with {contact_name}', 'attendees': ['{contact_email}'], 'start_time': '{appointment_time}', 'description': 'Sales consultation scheduled via PAM', 'duration_minutes': 60}}, 'app_name': 'google_calendar', 'action_type': 'Create Event', 'action_config': {}, 'field_mappings': {}, 'user_connection_id': ''}, 'position': {'x': -1052.0806028894622, 'y': 490.2157596581883}}], 'variables': {}, 'entry_point': 'conversation-1752584446694'}
2025-08-27 11:24:10 - outbound-caller - INFO - Fetched pathway config for call_id 553: {'edges': [{'id': 'xy-edge__conversation-1752584446694-condition-1752585419519', 'key': 'xy-edge__conversation-1752584446694-condition-1752585419519', 'source': 'conversation-1752584446694', 'target': 'condition-1752585419519'}, {'id': 'xy-edge__condition-1752585419519true-conversation-1752585487904', 'key': 'xy-edge__condition-1752585419519true-conversation-1752585487904', 'source': 'condition-1752585419519', 'target': 'conversation-1752585487904'}, {'id': 'xy-edge__conversation-1752585487904-condition-1752585515969', 'key': 'xy-edge__conversation-1752585487904-condition-1752585515969', 'source': 'conversation-1752585487904', 'target': 'condition-1752585515969'}, {'id': 'xy-edge__conversation-1752585487904-condition-1752585517385', 'key': 'xy-edge__conversation-1752585487904-condition-1752585517385', 'source': 'conversation-1752585487904', 'target': 'condition-1752585517385'}, {'id': 'xy-edge__conversation-1752585487904-condition-1752585513967', 'key': 'xy-edge__conversation-1752585487904-condition-1752585513967', 'source': 'conversation-1752585487904', 'target': 'condition-1752585513967'}, {'id': 'xy-edge__conversation-1752584446694-condition-1752585422872', 'key': 'xy-edge__conversation-1752584446694-condition-1752585422872', 'source': 'conversation-1752584446694', 'target': 'condition-1752585422872'}, {'id': 'xy-edge__conversation-1752584446694-condition-1752585421207', 'key': 'xy-edge__conversation-1752584446694-condition-1752585421207', 'source': 'conversation-1752584446694', 'target': 'condition-1752585421207'}, {'id': 'xy-edge__condition-1752585421207true-conversation-1752585570818', 'key': 'xy-edge__condition-1752585421207true-conversation-1752585570818', 'source': 'condition-1752585421207', 'target': 'conversation-1752585570818'}, {'id': 'xy-edge__conversation-1752585570818-condition-1752585592634', 'key': 'xy-edge__conversation-1752585570818-condition-1752585592634', 'source': 'conversation-1752585570818', 'target': 'condition-1752585592634'}, {'id': 'xy-edge__condition-1752585515969true-conversation-1752585662522', 'key': 'xy-edge__condition-1752585515969true-conversation-1752585662522', 'source': 'condition-1752585515969', 'target': 'conversation-1752585662522'}, {'id': 'xy-edge__condition-1752585517385true-conversation-1752585818106', 'key': 'xy-edge__condition-1752585517385true-conversation-1752585818106', 'source': 'condition-1752585517385', 'target': 'conversation-1752585818106'}, {'id': 'xy-edge__condition-1752585513967true-conversation-1752585761728', 'key': 'xy-edge__condition-1752585513967true-conversation-1752585761728', 'source': 'condition-1752585513967', 'target': 'conversation-1752585761728'}, {'id': 'xy-edge__conversation-1752585761728-end_call-1752586102371', 'key': 'xy-edge__conversation-1752585761728-end_call-1752586102371', 'source': 'conversation-1752585761728', 'target': 'end_call-1752586102371'}, {'id': 'xy-edge__conversation-1752585662522-condition-1752585685583', 'key': 'xy-edge__conversation-1752585662522-condition-1752585685583', 'source': 'conversation-1752585662522', 'target': 'condition-1752585685583'}, {'id': 'xy-edge__conversation-1752585662522-condition-1752585687002', 'key': 'xy-edge__conversation-1752585662522-condition-1752585687002', 'source': 'conversation-1752585662522', 'target': 'condition-1752585687002'}, {'id': 'xy-edge__conversation-1752585662522-condition-1752585684024', 'key': 'xy-edge__conversation-1752585662522-condition-1752585684024', 'source': 'conversation-1752585662522', 'target': 'condition-1752585684024'}, {'id': 'xy-edge__condition-1752585685583true-app_action-1752586209057', 'key': 'xy-edge__condition-1752585685583true-app_action-1752586209057', 'source': 'condition-1752585685583', 'target': 'app_action-1752586209057'}, {'id': 'xy-edge__condition-1752585687002true-conversation-1752585818106', 'key': 'xy-edge__condition-1752585687002true-conversation-1752585818106', 'source': 'condition-1752585687002', 'target': 'conversation-1752585818106'}, {'id': 'xy-edge__condition-1752585684024true-conversation-1752585761728', 'key': 'xy-edge__condition-1752585684024true-conversation-1752585761728', 'source': 'condition-1752585684024', 'target': 'conversation-1752585761728'}, {'id': 'xy-edge__condition-1752586789213false-conversation-1752585818106', 'key': 'xy-edge__condition-1752586789213false-conversation-1752585818106', 'source': 'condition-1752586789213', 'target': 'conversation-1752585818106'}, {'id': 'xy-edge__app_action-1752586209057-condition-1752586789213', 'key': 'xy-edge__app_action-1752586209057-condition-1752586789213', 'source': 'app_action-1752586209057', 'target': 'condition-1752586789213'}, {'id': 'xy-edge__condition-1752585848810true-tools-1752586942596', 'key': 'xy-edge__condition-1752585848810true-tools-1752586942596', 'source': 'condition-1752585848810', 'target': 'tools-1752586942596'}, {'id': 'xy-edge__conversation-1752585818106-condition-1752585848810', 'key': 'xy-edge__conversation-1752585818106-condition-1752585848810', 'source': 'conversation-1752585818106', 'target': 'condition-1752585848810'}, {'id': 'xy-edge__conversation-1752585818106-condition-1752585852282', 'key': 'xy-edge__conversation-1752585818106-condition-1752585852282', 'source': 'conversation-1752585818106', 'target': 'condition-1752585852282'}, {'id': 'xy-edge__condition-1752585852282true-end_call-1752587058511', 'key': 'xy-edge__condition-1752585852282true-end_call-1752587058511', 'source': 'condition-1752585852282', 'target': 'end_call-1752587058511'}, {'id': 'xy-edge__condition-1752587369230true-conversation-1752586729436', 'key': 'xy-edge__condition-1752587369230true-conversation-1752586729436', 'source': 'condition-1752587369230', 'target': 'conversation-1752586729436'}, {'id': 'xy-edge__app_action-1752586209057-condition-1752587369230', 'key': 'xy-edge__app_action-1752586209057-condition-1752587369230', 'source': 'app_action-1752586209057', 'target': 'condition-1752587369230'}, {'id': 'xy-edge__conversation-1752586729436-condition-1752586879584', 'key': 'xy-edge__conversation-1752586729436-condition-1752586879584', 'source': 'conversation-1752586729436', 'target': 'condition-1752586879584'}, {'id': 'xy-edge__condition-1752586879584true-end_call-1752586890630', 'key': 'xy-edge__condition-1752586879584true-end_call-1752586890630', 'source': 'condition-1752586879584', 'target': 'end_call-1752586890630'}, {'id': 'xy-edge__tools-1752586942596-condition-1752586959602', 'key': 'xy-edge__tools-1752586942596-condition-1752586959602', 'source': 'tools-1752586942596', 'target': 'condition-1752586959602'}, {'id': 'xy-edge__condition-1752586959602true-end_call-1752586990804', 'key': 'xy-edge__condition-1752586959602true-end_call-1752586990804', 'source': 'condition-1752586959602', 'target': 'end_call-1752586990804'}, {'id': 'xy-edge__condition-1752585422872true-end_call-1753698161049', 'key': 'xy-edge__condition-1752585422872true-end_call-1753698161049', 'source': 'condition-1752585422872', 'target': 'end_call-1753698161049'}, {'id': 'xy-edge__condition-1752585592634true-app_action-1756221388241', 'key': 'xy-edge__condition-1752585592634true-app_action-1756221388241', 'source': 'condition-1752585592634', 'target': 'app_action-1756221388241'}, {'id': 'xy-edge__app_action-1756221388241-end_call-1753698161049', 'key': 'xy-edge__app_action-1756221388241-end_call-1753698161049', 'source': 'app_action-1756221388241', 'target': 'end_call-1753698161049'}], 'nodes': [{'id': 'conversation-1752584446694', 'name': 'Greeting', 'type': 'conversation', 'config': {'id': 'greeting', 'prompt': "Vous incarnez Pam de Dunder Mifflin. Vous effectuez un appel commercial sortant √† une personne qui s'est pr√©c√©demment renseign√©e sur vos services. Votre objectif est de d√©terminer si c'est le bon moment pour discuter. Soyez amicale et professionnelle. Commencez par vous pr√©senter et nommer votre entreprise, mentionnez que vous faites suite √† sa demande, puis demandez si elle a quelques minutes √† vous accorder. √âcoutez attentivement sa r√©ponse pour √©valuer sa disponibilit√© et son niveau d'int√©r√™t. Extrayez toute information qu'elle mentionne concernant sa situation actuelle ou ses besoins.", 'greeting': 'Bonjour Je suis Pam', 'language': 'en', 'temperature': 0.7, 'global_access': False, 'silence_timeout': 10, 'extracted_variables': [{'name': 'conversation_started', 'type': 'boolean', 'description': 'Conversation has started', 'extraction_prompt': 'Conversation has started'}, {'name': 'call_start_time', 'type': 'string', 'description': 'Timestamp when call started', 'extraction_prompt': 'Timestamp when call started'}], 'interruption_enabled': True, 'transition_condition': '', 'transcription_enabled': True, 'transition_condition_enabled': False}, 'position': {'x': 159.19974474711404, 'y': -406.435592953321}}, {'id': 'condition-1752585419519', 'name': 'Greeting Condition 1', 'type': 'condition', 'config': {'id': 'greeting_condition_1', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Person is available to talk now and shows interest in the conversation', 'next_node': 'qualify_lead', 'confidence_threshold': 0.7}, 'source_node': 'greeting'}, 'position': {'x': 112.72206178621366, 'y': 127.8578385636643}}, {'id': 'condition-1752585421207', 'name': 'Schedule Callback Condition', 'type': 'condition', 'config': {'id': 'greeting_condition_2', 'prompt': "La personne n'est pas disponible dans l'imm√©diat", 'source_node': 'greeting', 'routing_style': 'livekit', 'routing_targets': [{'name': 'Schedule Callback', 'node_id': 'conversation-1752585570818', 'description': 'Route to Schedule Callback', 'confidence_threshold': 0.7}]}, 'position': {'x': -313.0080598768747, 'y': -162.41507420188168}}, {'id': 'condition-1752585422872', 'name': 'Greeting Condition 3', 'type': 'condition', 'config': {'id': 'greeting_condition_3', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Person seems uninterested, hostile, or wants to end the call', 'next_node': 'polite_decline', 'confidence_threshold': 0.8}, 'source_node': 'greeting'}, 'position': {'x': -541.3518080512141, 'y': 374.79123495864394}}, {'id': 'conversation-1752585487904', 'name': 'Qualify Lead', 'type': 'conversation', 'config': {'id': 'qualify_lead', 'prompt': "The person is willing to talk. Now you need to qualify them as a potential customer. Ask about their current situation, what specific services they're looking for, their timeline, and any challenges they're facing. Be conversational but focused on gathering key qualifying information: budget range, decision-making authority, urgency of need, and fit for your services. Listen for buying signals and pain points. Ask open-ended questions to understand their needs deeply.", 'language': 'en', 'temperature': 0.7, 'global_access': False, 'system_prompt': '', 'silence_timeout': 10, 'extracted_variables': [{'name': 'qualification_started', 'type': 'boolean', 'description': 'Lead qualification process started', 'extraction_prompt': 'Lead qualification process started'}], 'interruption_enabled': True, 'transition_condition': '', 'transcription_enabled': True, 'transition_condition_enabled': False}, 'position': {'x': 163.4402281365625, 'y': 311.3499021877407}}, {'id': 'condition-1752585513967', 'name': 'Qualify Lead Condition 3', 'type': 'condition', 'config': {'id': 'qualify_lead_condition_3', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Person seems like a poor fit with no budget, no authority, no genuine need, or timing issues', 'next_node': 'polite_decline', 'confidence_threshold': 0.8}, 'source_node': 'qualify_lead'}, 'position': {'x': 573.7084072411365, 'y': 459.684096539979}}, {'id': 'condition-1752585515969', 'name': 'Qualify Lead Condition 1', 'type': 'condition', 'config': {'id': 'qualify_lead_condition_1', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Person is a qualified lead with genuine interest and potential budget for our services', 'next_node': 'book_appointment', 'confidence_threshold': 0.7}, 'source_node': 'qualify_lead'}, 'position': {'x': -191.31874774110742, 'y': 458.6868230734692}}, {'id': 'condition-1752585517385', 'name': 'Qualify Lead Condition 2', 'type': 'condition', 'config': {'id': 'qualify_lead_condition_2', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Person expressed interest but wants more information before scheduling anything', 'next_node': 'send_information', 'confidence_threshold': 0.7}, 'source_node': 'qualify_lead'}, 'position': {'x': 202.90168708178726, 'y': 488.9489925914291}}, {'id': 'conversation-1752585570818', 'name': 'Schedule Callback', 'type': 'conversation', 'config': {'id': 'schedule_callback', 'prompt': 'La personne indique qu\'elle est occup√©e ou qu\'elle souhaite √™tre rappel√©e plus tard. Montrez-vous compr√©hensif(ve) et arrangeant(e). Demandez-lui le moment qu\'elle pr√©f√©rerait pour un rappel.\n\nIMPORTANT: Une fois que vous obtenez un jour et un horaire pr√©cis (m√™me approximatif), confirmez les d√©tails et assurez-vous que le syst√®me va cr√©er l\'√©v√©nement dans le calendrier. Dites quelque chose comme "Parfait, je vais cr√©er cet √©v√©nement dans le calendrier maintenant."\n\nL\'objectif est d\'obtenir suffisamment de d√©tails pour d√©clencher la cr√©ation automatique du calendrier.', 'language': 'en', 'temperature': 0.7, 'global_access': False, 'system_prompt': '', 'silence_timeout': 10, 'extracted_variables': [{'name': 'callback_requested', 'type': 'boolean', 'description': 'Customer requested a callback', 'extraction_prompt': 'Customer requested a callback'}], 'interruption_enabled': True, 'transition_condition': '', 'transcription_enabled': True, 'transition_condition_enabled': False}, 'position': {'x': -824.9743648175192, 'y': 117.32593048536444}}, {'id': 'condition-1752585592634', 'name': 'Schedule Callback Condition 1', 'type': 'condition', 'config': {'id': 'schedule_callback_condition_1', 'prompt': 'Customer confirmed appointment time OR agent confirmed scheduling details', 'source_node': 'schedule_callback', 'routing_targets': [{'name': 'App_action Node', 'node_id': 'app_action-1756221388241', 'description': 'Route to App_action Node', 'confidence_threshold': 0.5}]}, 'position': {'x': -1310.484446829189, 'y': 285.194202724594}}, {'id': 'conversation-1752585662522', 'name': 'Book Appointment', 'type': 'conversation', 'config': {'id': 'book_appointment', 'prompt': "This is a qualified lead who has shown interest. Your goal is to schedule a consultation or appointment. Mention the value they'll get from the meeting and how it will help solve their specific needs you've identified. Offer specific time slots and be flexible with scheduling. Try to get their availability, preferred meeting type (phone, video, in-person), and contact details for scheduling. If they hesitate, address their concerns and offer to send more information first.", 'language': 'en', 'temperature': 0.7, 'global_access': False, 'system_prompt': '', 'silence_timeout': 10, 'extracted_variables': [{'name': 'booking_started', 'type': 'boolean', 'description': 'Appointment booking process started', 'extraction_prompt': 'Appointment booking process started'}, {'name': 'qualified_lead', 'type': 'boolean', 'description': 'Lead is qualified for appointment', 'extraction_prompt': 'Lead is qualified for appointment'}], 'interruption_enabled': True, 'transition_condition': '', 'transcription_enabled': True, 'transition_condition_enabled': False}, 'position': {'x': -157.01338060119002, 'y': 676.3166837636757}}, {'id': 'condition-1752585684024', 'name': 'Book Appointment Condition 3', 'type': 'condition', 'config': {'id': 'book_appointment_condition_3', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Person declined to schedule or seems hesitant about moving forward', 'next_node': 'polite_decline', 'confidence_threshold': 0.8}, 'source_node': 'book_appointment'}, 'position': {'x': -273.7854306622481, 'y': 1041.96815487565}}, {'id': 'condition-1752585685583', 'name': 'Book Appointment Condition 1', 'type': 'condition', 'config': {'id': 'book_appointment_condition_1', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Person agreed to schedule an appointment and provided their availability or preferred time', 'next_node': 'create_calendar_event', 'confidence_threshold': 0.7}, 'source_node': 'book_appointment'}, 'position': {'x': -943.9017843724146, 'y': 1044.3504442101917}}, {'id': 'condition-1752585687002', 'name': 'Book Appointment Condition 2', 'type': 'condition', 'config': {'id': 'book_appointment_condition_2', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Person wants to schedule but asked for information to be sent first', 'next_node': 'send_information', 'confidence_threshold': 0.7}, 'source_node': 'book_appointment'}, 'position': {'x': -606.1989666079745, 'y': 1056.062258946693}}, {'id': 'conversation-1752585761728', 'name': 'Polite Decline', 'type': 'conversation', 'config': {'id': 'polite_decline', 'prompt': "This person doesn't seem like a good fit right now. Be polite and professional. Thank them for their time, acknowledge that the timing might not be right, and offer to send them information for future reference. Ask if they'd like to receive updates or if there's a better time to reach out in the future. End on a positive note and leave the door open for future contact.", 'language': 'en', 'temperature': 0.7, 'global_access': False, 'system_prompt': '', 'silence_timeout': 10, 'extracted_variables': [{'name': 'lead_declined', 'type': 'boolean', 'description': 'Lead was politely declined', 'extraction_prompt': 'Lead was politely declined'}], 'interruption_enabled': True, 'transition_condition': '', 'transcription_enabled': True, 'transition_condition_enabled': False}, 'position': {'x': 716.720968381256, 'y': 1115.8291479001427}}, {'id': 'conversation-1752585818106', 'name': 'Send Information', 'type': 'conversation', 'config': {'id': 'send_information', 'prompt': "The person wants more information before scheduling. Ask for their email address to send details about your services, pricing, case studies, or whatever information would be most relevant to their specific needs. Be specific about what you'll send and when they can expect it. Also ask if they have any specific questions you can address in the information packet. Make them feel comfortable that this isn't high-pressure follow-up.", 'language': 'en', 'temperature': 0.7, 'global_access': False, 'system_prompt': '', 'silence_timeout': 10, 'extracted_variables': [{'name': 'info_requested', 'type': 'boolean', 'description': 'Customer requested information packet', 'extraction_prompt': 'Customer requested information packet'}], 'interruption_enabled': True, 'transition_condition': '', 'transcription_enabled': True, 'transition_condition_enabled': False}, 'position': {'x': 378.9665058084346, 'y': 1507.51975168371}}, {'id': 'condition-1752585848810', 'name': 'Send Information Condition 1', 'type': 'condition', 'config': {'id': 'send_information_condition_1', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Person provided their email address for sending information', 'next_node': 'capture_email', 'confidence_threshold': 0.7}, 'source_node': 'send_information'}, 'position': {'x': 165.51654504146074, 'y': 1635.6430622199036}}, {'id': 'condition-1752585852282', 'name': 'Send Information Condition 2', 'type': 'condition', 'config': {'id': 'send_information_condition_2', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Person declined to provide their email or seems uninterested in receiving information', 'next_node': 'end_declined', 'confidence_threshold': 0.8}, 'source_node': 'send_information'}, 'position': {'x': 500.68393482997806, 'y': 1628.8051584512218}}, {'id': 'end_call-1752586102371', 'name': 'End Declined', 'type': 'end_call', 'config': {'id': 'end_declined', 'custom_data': {}, 'save_recording': False, 'email_recipient': '', 'goodbye_message': 'Thank you for your time. Have a great day!', 'save_transcript': True, 'call_disposition': 'completed', 'send_summary_email': False, 'extracted_variables': [{'name': 'call_outcome', 'type': 'string', 'description': 'Final call outcome', 'extraction_prompt': 'Final call outcome'}, {'name': 'decline_reason', 'type': 'string', 'description': 'Reason for declining', 'extraction_prompt': 'Reason for declining'}]}, 'position': {'x': 667.7410507582531, 'y': 1363.7408872996832}}, {'id': 'app_action-1752586209057', 'name': 'Create Calendar Event', 'type': 'app_action', 'config': {'id': 'create_calendar_event', 'data': {'app_name': 'google_calendar', 'action_type': 'create_event', 'action_config': {'calendar_id': 'primary', 'duration_minutes': 60}, 'field_mappings': {'summary': 'Consultation with {contact_name}', 'attendees': ['{contact_email}'], 'start_time': '{selected_appointment_time}', 'description': 'Sales consultation scheduled via PAM'}}, 'app_name': '', 'action_type': '', 'action_config': {}, 'field_mappings': {}, 'user_connection_id': '', 'extracted_variables': [{'name': 'appointment_booked', 'type': 'boolean', 'description': 'Appointment successfully booked', 'extraction_prompt': 'Appointment successfully booked'}]}, 'position': {'x': -931.7621809606596, 'y': 1347.8657791544829}}, {'id': 'conversation-1752586729436', 'name': 'Confirm Appointment', 'type': 'conversation', 'config': {'id': 'confirm_appointment', 'prompt': "The calendar event has been successfully created. Confirm the appointment details with enthusiasm. Mention the date, time, and format of the meeting. Let them know they'll receive a calendar invite shortly. Ask if they have any specific topics they'd like to discuss or questions they want addressed during the consultation. Set clear expectations for what the meeting will cover and how long it will take.", 'language': 'en', 'temperature': 0.7, 'global_access': False, 'system_prompt': '', 'silence_timeout': 10, 'extracted_variables': [{'name': 'appointment_confirmed', 'type': 'boolean', 'description': 'Appointment details confirmed with customer', 'extraction_prompt': 'Appointment details confirmed with customer'}], 'interruption_enabled': True, 'transition_condition': '', 'transcription_enabled': True, 'transition_condition_enabled': False}, 'position': {'x': -981.7639769305733, 'y': 1813.2009923352334}}, {'id': 'condition-1752586789213', 'name': 'Create Calendar Event Condition 2', 'type': 'condition', 'config': {'id': 'create_calendar_event_condition_2', 'prompt': 'Calendar event creation failed or encountered an error', 'source_node': 'create_calendar_event'}, 'position': {'x': -764.0953358329234, 'y': 1530.225098242719}}, {'id': 'condition-1752586879584', 'name': 'Confirm Appointment Condition 1', 'type': 'condition', 'config': {'id': 'confirm_appointment_condition_1', 'prompt': 'Appointment has been confirmed and conversation wrapped up successfully', 'source_node': 'confirm_appointment'}, 'position': {'x': -1011.2849335976309, 'y': 1938.9218754961776}}, {'id': 'end_call-1752586890630', 'name': 'End Success', 'type': 'end_call', 'config': {'id': 'end_success', 'custom_data': {}, 'save_recording': False, 'email_recipient': '', 'goodbye_message': 'Thank you! Looking forward to speaking with you on {appointment_date}. Have a great day!', 'save_transcript': True, 'call_disposition': 'completed', 'send_summary_email': False, 'extracted_variables': [{'name': 'call_outcome', 'type': 'string', 'description': 'Final call outcome', 'extraction_prompt': 'Final call outcome'}, {'name': 'success', 'type': 'boolean', 'description': 'Call was successful', 'extraction_prompt': 'Call was successful'}, {'name': 'appointment_date', 'type': 'string', 'description': 'Scheduled appointment date', 'extraction_prompt': 'Scheduled appointment date'}, {'name': 'appointment_time', 'type': 'string', 'description': 'Scheduled appointment time', 'extraction_prompt': 'Scheduled appointment time'}]}, 'position': {'x': -1000.4160641634687, 'y': 2109.1766822906798}}, {'id': 'tools-1752586942596', 'name': 'Capture Email', 'type': 'tools', 'config': {'id': 'capture_email', 'app_name': 'google_calendar', 'parameters': {'email': '{contact_email}', 'notes': '{conversation_summary}', 'source': 'phone_call', 'status': 'info_requested', 'contact_name': '{contact_name}', 'phone_number': '{phone_number}', 'interest_level': '{interest_level}', 'qualification_score': '{qualification_score}'}, 'webhook_url': 'https://hook.us1.make.com/abc123def456', 'selected_app_id': 'ebce972a-6206-4708-8557-90bfd816ad14', 'selected_app_name': 'Google Calendar', 'variable_mappings': {}, 'selected_action_id': '', 'extracted_variables': [{'name': 'email_captured', 'type': 'boolean', 'description': 'Customer email address captured', 'extraction_prompt': 'Customer email address captured'}], 'selected_action_name': '', 'selected_action_description': ''}, 'position': {'x': 212.10097682093254, 'y': 1877.1337109778142}}, {'id': 'condition-1752586959602', 'name': 'Condition Node', 'type': 'condition', 'config': {'prompt': 'email captured'}, 'position': {'x': 207.1067512553629, 'y': 2061.4359900186564}}, {'id': 'end_call-1752586990804', 'name': 'End Info Sent', 'type': 'end_call', 'config': {'id': 'end_info_sent', 'custom_data': {}, 'save_recording': False, 'email_recipient': '', 'goodbye_message': "Great! I'll send that information right over. Feel free to call us with any questions. Have a wonderful day!", 'save_transcript': True, 'call_disposition': 'completed', 'send_summary_email': False, 'extracted_variables': [{'name': 'call_outcome', 'type': 'string', 'description': 'Final call outcome', 'extraction_prompt': 'Final call outcome'}, {'name': 'follow_up_required', 'type': 'boolean', 'description': 'Follow-up is required', 'extraction_prompt': 'Follow-up is required'}]}, 'position': {'x': 201.81395080636105, 'y': 2189.0828212015595}}, {'id': 'end_call-1752587058511', 'name': 'End Declined', 'type': 'end_call', 'config': {'id': 'end_declined', 'custom_data': {}, 'save_recording': False, 'email_recipient': '', 'goodbye_message': 'Thank you for your time. Have a great day!', 'save_transcript': True, 'call_disposition': 'completed', 'send_summary_email': False, 'extracted_variables': [{'name': 'call_outcome', 'type': 'string', 'description': 'Final call outcome', 'extraction_prompt': 'Final call outcome'}, {'name': 'decline_reason', 'type': 'string', 'description': 'Reason for declining', 'extraction_prompt': 'Reason for declining'}]}, 'position': {'x': 860.3817328453051, 'y': 1807.0939093564982}}, {'id': 'condition-1752587369230', 'name': 'Create Calendar Event Condition 1', 'type': 'condition', 'config': {'id': 'create_calendar_event_condition_1', 'prompt': '', 'condition': {'type': 'ai', 'prompt': 'Calendar event was successfully created', 'next_node': 'confirm_appointment', 'confidence_threshold': 0.9}, 'source_node': 'create_calendar_event'}, 'position': {'x': -1149.0097523440525, 'y': 1584.6468586902927}}, {'id': 'end_call-1753698161049', 'name': 'End_call  Greeting', 'type': 'end_call', 'config': {'custom_data': {}, 'save_recording': False, 'email_recipient': '', 'goodbye_message': 'Thank you for your time. Have a great day!', 'save_transcript': True, 'call_disposition': 'completed', 'send_summary_email': False}, 'position': {'x': -517.2888315376458, 'y': 701.791880267355}}, {'id': 'app_action-1756221388241', 'name': 'App_action Node', 'type': 'app_action', 'config': {'data': {'app_name': 'google_calendar', 'action_type': 'create_event', 'action_config': {}, 'field_mappings': {'summary': 'Consultation call with {contact_name}', 'attendees': ['{contact_email}'], 'start_time': '{appointment_time}', 'description': 'Sales consultation scheduled via PAM', 'duration_minutes': 60}}, 'app_name': 'google_calendar', 'action_type': 'Create Event', 'action_config': {}, 'field_mappings': {}, 'user_connection_id': ''}, 'position': {'x': -1052.0806028894622, 'y': 490.2157596581883}}], 'variables': {}, 'entry_point': 'conversation-1752584446694'}
2025-08-27 11:24:10 - outbound-caller - INFO - ‚úÖ Fetched pathway config for call_id 553
2025-08-27 11:24:10 - outbound-caller - INFO - ‚úÖ Fetched pathway config for call_id 553
2025-08-27 11:24:10 - outbound-caller - INFO - Pre-initialized PathwayNodeAgent for node: conversation-1752584446694
2025-08-27 11:24:10 - outbound-caller - INFO - Pre-initialized PathwayNodeAgent for node: conversation-1752584446694
2025-08-27 11:24:10 - outbound-caller - INFO - Pre-initialized PathwayNodeAgent for node: conversation-1752585487904
2025-08-27 11:24:10 - outbound-caller - INFO - Pre-initialized PathwayNodeAgent for node: conversation-1752585487904
2025-08-27 11:24:10 - outbound-caller - INFO - Pre-initialized PathwayNodeAgent for node: conversation-1752585570818
2025-08-27 11:24:10 - outbound-caller - INFO - Pre-initialized PathwayNodeAgent for node: conversation-1752585570818
2025-08-27 11:24:10 - outbound-caller - INFO - Pre-initialized PathwayNodeAgent for node: conversation-1752585662522
2025-08-27 11:24:10 - outbound-caller - INFO - Pre-initialized PathwayNodeAgent for node: conversation-1752585662522
2025-08-27 11:24:10 - outbound-caller - INFO - Pre-initialized PathwayNodeAgent for node: conversation-1752585761728
2025-08-27 11:24:10 - outbound-caller - INFO - Pre-initialized PathwayNodeAgent for node: conversation-1752585761728
2025-08-27 11:24:10 - outbound-caller - INFO - Pre-initialized PathwayNodeAgent for node: conversation-1752585818106
2025-08-27 11:24:10 - outbound-caller - INFO - Pre-initialized PathwayNodeAgent for node: conversation-1752585818106
2025-08-27 11:24:10 - outbound-caller - INFO - Pre-initialized PathwayNodeAgent for node: conversation-1752586729436
2025-08-27 11:24:10 - outbound-caller - INFO - Pre-initialized PathwayNodeAgent for node: conversation-1752586729436
2025-08-27 11:24:10 - outbound-caller - INFO - ‚úÖ Creating session with PathwayNodeAgent for node: conversation-1752584446694
2025-08-27 11:24:10 - outbound-caller - INFO - ‚úÖ Creating session with PathwayNodeAgent for node: conversation-1752584446694
2025-08-27 11:24:10 - outbound-caller - INFO - Creating SIP participant to initiate outbound call...
2025-08-27 11:24:10 - outbound-caller - INFO - Creating SIP participant to initiate outbound call...
2025-08-27 11:24:10 - outbound-caller - INFO - Dialing +33661329235 using SIP trunk ST_6CYLZwTLMCe2
2025-08-27 11:24:10 - outbound-caller - INFO - Dialing +33661329235 using SIP trunk ST_6CYLZwTLMCe2
2025-08-27 11:24:10 - livekit.agents - WARNING - Running <Task pending name='job_user_entrypoint' coro=<_JobProc._run_job_task.<locals>._traceable_entrypoint() running at C:\Users\y.djemai\pam-testdrive\MARK_I\backend_python\agents\venv\Lib\site-packages\opentelemetry\util\_decorator.py:71> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at C:\Program Files\Python312\Lib\asyncio\tasks.py:922, Task.task_wakeup()]> cb=[_JobProc._run_job_task.<locals>.<lambda>() at C:\Users\y.djemai\pam-testdrive\MARK_I\backend_python\agents\venv\Lib\site-packages\livekit\agents\ipc\job_proc_lazy_main.py:258, _JobProc._run_job_task.<locals>.log_exception() at C:\Users\y.djemai\pam-testdrive\MARK_I\backend_python\agents\venv\Lib\site-packages\livekit\agents\ipc\job_proc_lazy_main.py:260]> took too long: 3.77 seconds
2025-08-27 11:24:10 - livekit.agents - WARNING - Running <Task pending name='job_user_entrypoint' coro=<_JobProc._run_job_task.<locals>._traceable_entrypoint() running at C:\Users\y.djemai\pam-testdrive\MARK_I\backend_python\agents\venv\Lib\site-packages\opentelemetry\util\_decorator.py:71> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at C:\Program Files\Python312\Lib\asyncio\tasks.py:922, Task.task_wakeup()]> cb=[_JobProc._run_job_task.<locals>.<lambda>() at C:\Users\y.djemai\pam-testdrive\MARK_I\backend_python\agents\venv\Lib\site-packages\livekit\agents\ipc\job_proc_lazy_main.py:258, _JobProc._run_job_task.<locals>.log_exception() at C:\Users\y.djemai\pam-testdrive\MARK_I\backend_python\agents\venv\Lib\site-packages\livekit\agents\ipc\job_proc_lazy_main.py:260]> took too long: 3.77 seconds
2025-08-27 11:24:11 - livekit.agents - INFO - worker is below capacity, marking as available
2025-08-27 11:24:11 - livekit.agents - INFO - worker is below capacity, marking as available
2025-08-27 11:24:18 - outbound-caller - INFO - SIP call initiated to +33661329235. Waiting for participant to join...
2025-08-27 11:24:18 - outbound-caller - INFO - SIP call initiated to +33661329235. Waiting for participant to join...
2025-08-27 11:24:18 - outbound-caller - INFO - ‚úÖ Final logging fix applied before session start
2025-08-27 11:24:18 - outbound-caller - INFO - ‚úÖ Final logging fix applied before session start
2025-08-27 11:24:18 - pathway_global_context - INFO - üéØ Entering pathway node: conversation-1752584446694
2025-08-27 11:24:18 - pathway_global_context - INFO - üéØ Entering pathway node: conversation-1752584446694
2025-08-27 11:24:18 - pathway_global_context - INFO - üí¨ Delivering greeting: 'Bonjour Je suis Pam'
2025-08-27 11:24:18 - pathway_global_context - INFO - üí¨ Delivering greeting: 'Bonjour Je suis Pam'
2025-08-27 11:24:20 - pathway_global_context - INFO - ü§ñ Starting conversation for node: conversation-1752584446694
2025-08-27 11:24:20 - pathway_global_context - INFO - ü§ñ Starting conversation for node: conversation-1752584446694
2025-08-27 11:25:00 - pathway_global_context - INFO - üéØ Attempting transition from conversation-1752584446694 to conversation-1752585570818 (schedule_callback)
2025-08-27 11:25:00 - pathway_global_context - INFO - üéØ Attempting transition from conversation-1752584446694 to conversation-1752585570818 (schedule_callback)
2025-08-27 11:25:00 - pathway_global_context - INFO - ‚úÖ Found target node: conversation-1752585570818
2025-08-27 11:25:00 - pathway_global_context - INFO - ‚úÖ Found target node: conversation-1752585570818
2025-08-27 11:25:00 - pathway_global_context - INFO - ‚úÖ Using existing PathwayNodeAgent for: conversation-1752585570818
2025-08-27 11:25:00 - pathway_global_context - INFO - ‚úÖ Using existing PathwayNodeAgent for: conversation-1752585570818
2025-08-27 11:25:00 - pathway_global_context - INFO - üëã Exiting pathway node: conversation-1752584446694
2025-08-27 11:25:00 - pathway_global_context - INFO - üëã Exiting pathway node: conversation-1752584446694
2025-08-27 11:25:00 - pathway_global_context - INFO - üéØ Entering pathway node: conversation-1752585570818
2025-08-27 11:25:00 - pathway_global_context - INFO - üéØ Entering pathway node: conversation-1752585570818
2025-08-27 11:25:00 - pathway_global_context - INFO - ü§ñ Starting conversation for node: conversation-1752585570818
2025-08-27 11:25:00 - pathway_global_context - INFO - ü§ñ Starting conversation for node: conversation-1752585570818
2025-08-27 11:25:16 - pathway_global_context - INFO - üéØ CALENDAR FUNCTION CALLED: transition_to_create_calendar_event triggered!
2025-08-27 11:25:16 - pathway_global_context - INFO - üéØ CALENDAR FUNCTION CALLED: transition_to_create_calendar_event triggered!
2025-08-27 11:25:16 - pathway_global_context - INFO - üìÖ About to create calendar event via app_action-1752586209057
2025-08-27 11:25:16 - pathway_global_context - INFO - üìÖ About to create calendar event via app_action-1752586209057
2025-08-27 11:25:16 - pathway_global_context - INFO - ‚úÖ Calendar event attempt flag set
2025-08-27 11:25:16 - pathway_global_context - INFO - ‚úÖ Calendar event attempt flag set
2025-08-27 11:25:16 - pathway_global_context - INFO - üéØ Attempting transition from conversation-1752585570818 to app_action-1752586209057 (create_calendar_event)
2025-08-27 11:25:16 - pathway_global_context - INFO - üéØ Attempting transition from conversation-1752585570818 to app_action-1752586209057 (create_calendar_event)
2025-08-27 11:25:16 - pathway_global_context - INFO - ‚úÖ Found target node: app_action-1752586209057
2025-08-27 11:25:16 - pathway_global_context - INFO - ‚úÖ Found target node: app_action-1752586209057
2025-08-27 11:25:16 - pathway_global_context - INFO - ‚úÖ Created new PathwayNodeAgent for: app_action-1752586209057
2025-08-27 11:25:16 - pathway_global_context - INFO - ‚úÖ Created new PathwayNodeAgent for: app_action-1752586209057
2025-08-27 11:25:23 - pathway_global_context - INFO - üëã Exiting pathway node: conversation-1752585570818
2025-08-27 11:25:23 - pathway_global_context - INFO - üëã Exiting pathway node: conversation-1752585570818
2025-08-27 11:25:23 - pathway_global_context - INFO - üéØ Entering pathway node: app_action-1752586209057
2025-08-27 11:25:23 - pathway_global_context - INFO - üéØ Entering pathway node: app_action-1752586209057
2025-08-27 11:25:23 - pathway_global_context - INFO - üöÄ Processing app_action node: app_action-1752586209057
2025-08-27 11:25:23 - pathway_global_context - INFO - üöÄ Processing app_action node: app_action-1752586209057
2025-08-27 11:25:23 - pathway_global_context - INFO - üìã Full node config: {'id': 'app_action-1752586209057', 'name': 'Create Calendar Event', 'type': 'app_action', 'config': {'id': 'create_calendar_event', 'data': {'app_name': 'google_calendar', 'action_type': 'create_event', 'action_config': {'calendar_id': 'primary', 'duration_minutes': 60}, 'field_mappings': {'summary': 'Consultation with {contact_name}', 'attendees': ['{contact_email}'], 'start_time': '{selected_appointment_time}', 'description': 'Sales consultation scheduled via PAM'}}, 'app_name': '', 'action_type': '', 'action_config': {}, 'field_mappings': {}, 'user_connection_id': '', 'extracted_variables': [{'name': 'appointment_booked', 'type': 'boolean', 'description': 'Appointment successfully booked', 'extraction_prompt': 'Appointment successfully booked'}]}, 'position': {'x': -931.7621809606596, 'y': 1347.8657791544829}}
2025-08-27 11:25:23 - pathway_global_context - INFO - üìã Full node config: {'id': 'app_action-1752586209057', 'name': 'Create Calendar Event', 'type': 'app_action', 'config': {'id': 'create_calendar_event', 'data': {'app_name': 'google_calendar', 'action_type': 'create_event', 'action_config': {'calendar_id': 'primary', 'duration_minutes': 60}, 'field_mappings': {'summary': 'Consultation with {contact_name}', 'attendees': ['{contact_email}'], 'start_time': '{selected_appointment_time}', 'description': 'Sales consultation scheduled via PAM'}}, 'app_name': '', 'action_type': '', 'action_config': {}, 'field_mappings': {}, 'user_connection_id': '', 'extracted_variables': [{'name': 'appointment_booked', 'type': 'boolean', 'description': 'Appointment successfully booked', 'extraction_prompt': 'Appointment successfully booked'}]}, 'position': {'x': -931.7621809606596, 'y': 1347.8657791544829}}
2025-08-27 11:25:23 - pathway_global_context - INFO - üìä Extracted app_name: 'google_calendar', action_type: 'create_event'
2025-08-27 11:25:23 - pathway_global_context - INFO - üìä Extracted app_name: 'google_calendar', action_type: 'create_event'
2025-08-27 11:25:23 - pathway_global_context - INFO - üìù Parameters: {}
2025-08-27 11:25:23 - pathway_global_context - INFO - üìù Parameters: {}
2025-08-27 11:25:23 - pathway_global_context - INFO - üîß Executing google_calendar.create_event with real API integration
2025-08-27 11:25:23 - pathway_global_context - INFO - üîß Executing google_calendar.create_event with real API integration
2025-08-27 11:25:23 - pathway_global_context - INFO - üîç Looking for google_calendar connection for user b55837c4-270f-4f1f-8023-7ab09ee5f44d
2025-08-27 11:25:23 - pathway_global_context - INFO - üîç Looking for google_calendar connection for user b55837c4-270f-4f1f-8023-7ab09ee5f44d
2025-08-27 11:25:23 - pathway_global_context - INFO - ‚úÖ Found Google Calendar connection: 03ce6556-bb08-4e19-abcd-c21f14b33bcf
2025-08-27 11:25:23 - pathway_global_context - INFO - ‚úÖ Found Google Calendar connection: 03ce6556-bb08-4e19-abcd-c21f14b33bcf
2025-08-27 11:25:23 - pathway_global_context - INFO - üîê Attempting to decrypt OAuth credentials
2025-08-27 11:25:23 - pathway_global_context - INFO - üîê Attempting to decrypt OAuth credentials
2025-08-27 11:25:23 - pathway_global_context - INFO - ‚úÖ Successfully decrypted credentials using crypto_utils
2025-08-27 11:25:23 - pathway_global_context - INFO - ‚úÖ Successfully decrypted credentials using crypto_utils
2025-08-27 11:25:23 - pathway_global_context - INFO - üìÖ Creating Google Calendar event with parameters: {}
2025-08-27 11:25:23 - pathway_global_context - INFO - üìÖ Creating Google Calendar event with parameters: {}
2025-08-27 11:25:23 - pathway_global_context - INFO - üì§ Sending calendar event to Google API: {'summary': 'Sales Callback Appointment', 'description': 'Scheduled during PAM conversation', 'start': {'dateTime': '2025-08-28T14:00:00', 'timeZone': 'America/New_York'}, 'end': {'dateTime': '2025-08-28T14:30:00', 'timeZone': 'America/New_York'}, 'reminders': {'useDefault': True}}
2025-08-27 11:25:23 - pathway_global_context - INFO - üì§ Sending calendar event to Google API: {'summary': 'Sales Callback Appointment', 'description': 'Scheduled during PAM conversation', 'start': {'dateTime': '2025-08-28T14:00:00', 'timeZone': 'America/New_York'}, 'end': {'dateTime': '2025-08-28T14:30:00', 'timeZone': 'America/New_York'}, 'reminders': {'useDefault': True}}
2025-08-27 11:25:24 - pathway_global_context - INFO - ‚úÖ Google Calendar event created successfully: iknnk82bal7oump7oamcabjr70
2025-08-27 11:25:24 - pathway_global_context - INFO - ‚úÖ Google Calendar event created successfully: iknnk82bal7oump7oamcabjr70
2025-08-27 11:25:24 - pathway_global_context - INFO - ‚úÖ App action completed: {'status': 'success', 'event_id': 'iknnk82bal7oump7oamcabjr70', 'event_link': 'https://www.google.com/calendar/event?eid=aWtubms4MmJhbDdvdW1wN29hbWNhYmpyNzAgeWFzcy5kamVtYWlAbQ', 'start_time': '2025-08-28T14:00:00', 'end_time': '2025-08-28T14:30:00', 'title': 'Sales Callback Appointment', 'user_message': "Perfect! I've scheduled your sales callback appointment for jeudi, ao√ªt 28 at 02:00 . You should receive a calendar invitation shortly."}
2025-08-27 11:25:24 - pathway_global_context - INFO - ‚úÖ App action completed: {'status': 'success', 'event_id': 'iknnk82bal7oump7oamcabjr70', 'event_link': 'https://www.google.com/calendar/event?eid=aWtubms4MmJhbDdvdW1wN29hbWNhYmpyNzAgeWFzcy5kamVtYWlAbQ', 'start_time': '2025-08-28T14:00:00', 'end_time': '2025-08-28T14:30:00', 'title': 'Sales Callback Appointment', 'user_message': "Perfect! I've scheduled your sales callback appointment for jeudi, ao√ªt 28 at 02:00 . You should receive a calendar invitation shortly."}
2025-08-27 11:25:34 - pathway_global_context - INFO - üéØ Auto-transitioning from app_action to next node
2025-08-27 11:25:34 - pathway_global_context - INFO - üéØ Auto-transitioning from app_action to next node
2025-08-27 11:25:34 - pathway_global_context - INFO - üéØ Auto-transitioning from app_action node: app_action-1752586209057
2025-08-27 11:25:34 - pathway_global_context - INFO - üéØ Auto-transitioning from app_action node: app_action-1752586209057
2025-08-27 11:25:34 - pathway_global_context - INFO - üéØ Auto-transitioning to: condition-1752586789213
2025-08-27 11:25:34 - pathway_global_context - INFO - üéØ Auto-transitioning to: condition-1752586789213
2025-08-27 11:25:34 - pathway_global_context - INFO - ‚úÖ Auto-transition completed to: condition-1752586789213
2025-08-27 11:25:34 - pathway_global_context - INFO - ‚úÖ Auto-transition completed to: condition-1752586789213
2025-08-27 11:25:56 - pathway_global_context - INFO - üéØ CALENDAR FUNCTION CALLED: transition_to_create_calendar_event triggered!
2025-08-27 11:25:56 - pathway_global_context - INFO - üéØ CALENDAR FUNCTION CALLED: transition_to_create_calendar_event triggered!
2025-08-27 11:25:56 - pathway_global_context - INFO - üìÖ About to create calendar event via app_action-1752586209057
2025-08-27 11:25:56 - pathway_global_context - INFO - üìÖ About to create calendar event via app_action-1752586209057
2025-08-27 11:25:56 - pathway_global_context - INFO - ‚úÖ Calendar event attempt flag set
2025-08-27 11:25:56 - pathway_global_context - INFO - ‚úÖ Calendar event attempt flag set
2025-08-27 11:25:56 - pathway_global_context - INFO - üéØ Attempting transition from app_action-1752586209057 to app_action-1752586209057 (create_calendar_event)
2025-08-27 11:25:56 - pathway_global_context - INFO - üéØ Attempting transition from app_action-1752586209057 to app_action-1752586209057 (create_calendar_event)
2025-08-27 11:25:56 - pathway_global_context - INFO - ‚úÖ Found target node: app_action-1752586209057
2025-08-27 11:25:56 - pathway_global_context - INFO - ‚úÖ Found target node: app_action-1752586209057
2025-08-27 11:25:56 - pathway_global_context - INFO - ‚úÖ Using existing PathwayNodeAgent for: app_action-1752586209057
2025-08-27 11:25:56 - pathway_global_context - INFO - ‚úÖ Using existing PathwayNodeAgent for: app_action-1752586209057
2025-08-27 11:25:56 - livekit.agents - ERROR - Error in _update_activity_task
Traceback (most recent call last):
  File "C:\Users\y.djemai\pam-testdrive\MARK_I\backend_python\agents\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\y.djemai\pam-testdrive\MARK_I\backend_python\agents\venv\Lib\site-packages\livekit\agents\voice\agent_session.py", line 870, in _update_activity_task
    await self._update_activity(agent)
  File "C:\Users\y.djemai\pam-testdrive\MARK_I\backend_python\agents\venv\Lib\site-packages\livekit\agents\voice\agent_session.py", line 821, in _update_activity
    raise RuntimeError("cannot start agent: an activity is already running")
RuntimeError: cannot start agent: an activity is already running
2025-08-27 11:25:56 - livekit.agents - ERROR - Error in _update_activity_task
Traceback (most recent call last):
  File "C:\Users\y.djemai\pam-testdrive\MARK_I\backend_python\agents\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\y.djemai\pam-testdrive\MARK_I\backend_python\agents\venv\Lib\site-packages\livekit\agents\voice\agent_session.py", line 870, in _update_activity_task
    await self._update_activity(agent)
  File "C:\Users\y.djemai\pam-testdrive\MARK_I\backend_python\agents\venv\Lib\site-packages\livekit\agents\voice\agent_session.py", line 821, in _update_activity
    raise RuntimeError("cannot start agent: an activity is already running")
RuntimeError: cannot start agent: an activity is already running
2025-08-27 11:26:15 - livekit.agents - INFO - closing agent session due to participant disconnect (disable via `RoomInputOptions.close_on_disconnect=False`)
2025-08-27 11:26:15 - livekit.agents - INFO - closing agent session due to participant disconnect (disable via `RoomInputOptions.close_on_disconnect=False`)
2025-08-27 11:26:15 - pathway_global_context - INFO - üëã Exiting pathway node: app_action-1752586209057
2025-08-27 11:26:15 - pathway_global_context - INFO - üëã Exiting pathway node: app_action-1752586209057
2025-08-27 12:01:02 - livekit.agents - INFO - worker is at full capacity, marking as unavailable
2025-08-27 12:01:02 - livekit.agents - INFO - worker is at full capacity, marking as unavailable
2025-08-27 12:01:05 - livekit.agents - INFO - worker is below capacity, marking as available
2025-08-27 12:01:05 - livekit.agents - INFO - worker is below capacity, marking as available
2025-08-27 12:03:15 - livekit.agents - INFO - draining worker
2025-08-27 12:03:15 - livekit.agents - INFO - draining worker
2025-08-27 12:03:15 - livekit.agents - INFO - shutting down worker
2025-08-27 12:03:15 - livekit.agents - INFO - shutting down worker
